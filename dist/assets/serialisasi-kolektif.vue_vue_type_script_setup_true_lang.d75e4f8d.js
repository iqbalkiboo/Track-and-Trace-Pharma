import{d as ee,b as ae,E as te,r as u,f as D,a1 as ne,p as le,o as y,c as z,a as w,k as e,w as t,q as _,i as l,F as B,g as oe,h as ie,S as se,ah as ue,af as de,am as re,an as ge,H as _e,I as me,v as ce,s as pe,b0 as fe,ad as ve,ae as he,R as ke,ao as be,L as ye,J as we,K as Ce,M as xe}from"./index.21c0d750.js";import{m as L}from"./master-kemasan-kolektif.2fd7ef6d.js";import{m as R}from"./master-kemasan-kategori-kolektif.b8aba5ae.js";import{_ as Pe}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";const Te={class:"body-tnt"},Ue={class:"card-tnt"},Me=["src"],De=ee({__name:"serialisasi-kolektif",props:{value:{}},emits:["hideForm","click:save"],setup(V,{emit:C}){const E=V,I=ae(),f=te(),a=u({});D(()=>{a.value=E.value});const x=()=>{setTimeout(()=>{C("hideForm",a.value.packaging_method)},100)},P=u(null),T=u();T.value={selling_packaging_category_id:{required:!0,message:"Kategori packaging tidak boleh kosong",trigger:"blur"},selling_packaging_id:{required:!0,message:"Tipe packaging tidak boleh kosong",trigger:"blur"},dimention_length:{type:"number",required:!0,message:"Tidak boleh kosong",trigger:"blur"},dimention_wide:{type:"number",required:!0,message:"Tidak boleh kosong",trigger:"blur"},dimention_height:{type:"number",required:!0,message:"Tidak boleh kosong",trigger:"blur"},dimention_weight:{type:"number",required:!0,message:"Tidak boleh kosong",trigger:"blur"},pWeightUnit:{required:!0,message:"Tidak boleh kosong",trigger:"blur"},maximum:{type:"number",required:!0,message:"Jumlah maksimum tidak boleh kosong",trigger:"blur"}};const h=u([]),U=u([]);D(()=>{j()});async function j(){await L.getPackagingCollectif({limit:100}).then(o=>{o.data.data.list.forEach(n=>{U.value.push({label:n.name,value:n.id})}),a.value.typeForm==="update"&&M(a.value.selling_packaging_id,""),s.value.show=!1}).catch(o=>{const n=o.response.data;f.error(n.message)})}async function M(o,n){n==="change"&&(h.value=[],a.value.selling_packaging_category_id=""),await R.getPackagingCategoryCollectif({limit:100,selling_packaging_id:o}).then(r=>{r.data.data.list.forEach(d=>{h.value.push({label:d.name,value:d.id})}),s.value.show=!1}).catch(r=>{const d=r.response.data;f.error(d.message)})}async function H(){await L.getDetailPackagingCollectif(a.value.selling_packaging_id).then(o=>{a.value.selling_packaging=o.data,s.value.show=!1}).catch(o=>{const n=o.response.data;f.error(n.message)})}async function q(){await R.getDetailPackagingCategoryCollectif(a.value.selling_packaging_category_id).then(o=>{a.value.selling_packaging_category=o.data,a.value.dimention_length=o.data.dimention?o.data.dimention.long:0,a.value.dimention_wide=o.data.dimention?o.data.dimention.wide:0,a.value.dimention_height=o.data.dimention?o.data.dimention.height:0,a.value.dimention_weight=o.data.dimention?o.data.dimention.weight:0,a.value.dimention_volume=o.data.dimention?o.data.dimention.volume:0;const n=u([]),r=u([]);o.data.images!==null&&(o.data.images.forEach(d=>{r.value.push({id:d.id,name:d.type,url:d.url,status:"finished"}),n.value.push(d.id)}),a.value.images_arr=r,a.value.images=n),a.value.images_arr=o.data.images?o.data.images:[],s.value.show=!1}).catch(o=>{const n=o.response.data;f.error(n.message)})}const k=u(!1),N=u(""),b=u([]);async function J(o){var n;o.preventDefault(),await((n=P.value)==null?void 0:n.validate()),a.value.images=[],b.value?(b.value.forEach(r=>{a.value.images.push(r.id)}),a.value.images_arr=b.value):(a.value.images=[],a.value.images_arr=[]),a.value.packaging_method="collective",await H(),await q(),C("click:save",a.value)}const s=u({show:u(!1),icon:ne(),iconColor:"#36A630",hideIcon:!1,title:"Selamat",subtitle:"Tipe kemasan kolektif berhasil ditambahkan"});function O(){s.value.show=!1}return(o,n)=>{const r=de,d=le("router-link"),K=re,S=ge,F=_e,m=me,g=ce,$=pe,c=fe,p=ve,W=he,A=ke,Q=be,G=ye,X=we,v=Ce,Y=xe;return y(),z(B,null,[w("div",Te,[e(r,{style:{"margin-bottom":"4px"}},{default:t(()=>[_("Collective Packaging")]),_:1}),e(S,null,{default:t(()=>[e(K,null,{default:t(()=>[e(d,{to:`/setting/master-produk/${l(I).params.id}`,onClick:x,class:"text-decoration-none"},{default:t(()=>[_(" Detail Produk ")]),_:1},8,["to"])]),_:1}),e(K,null,{default:t(()=>[_("Collective Packaging")]),_:1})]),_:1}),w("div",Ue,[e(X,{ref_key:"formRef",ref:P,class:"form-tnt","show-require-mark":!1,"label-width":80,model:l(a),rules:l(T)},{default:t(()=>[e(g,{vertical:"",size:0},{default:t(()=>[e(g,{vertical:"",size:0},{default:t(()=>[e(m,{label:"Tipe Packaging",path:"pType"},{default:t(()=>[e(F,{value:l(a).selling_packaging_id,"onUpdate:value":[n[0]||(n[0]=i=>l(a).selling_packaging_id=i),n[1]||(n[1]=i=>M(l(a).selling_packaging_id,"change"))],options:l(U),filterable:"",placeholder:"Pilih tipe packaging"},null,8,["value","options"])]),_:1})]),_:1}),e(g,{vertical:"",size:0},{default:t(()=>[e(m,{label:"Kategori Packaging",path:"pCategory"},{default:t(()=>[e(F,{value:l(a).selling_packaging_category_id,"onUpdate:value":[n[2]||(n[2]=i=>l(a).selling_packaging_category_id=i),q],options:l(h),filterable:"",placeholder:"Pilih kategori packaging"},null,8,["value","options"])]),_:1})]),_:1}),e(g,{vertical:"",size:0,style:{"margin-top":"14px"}},{default:t(()=>[e(G,{style:{"background-color":"#fafafa","border-radius":"10px"}},{default:t(()=>[e(g,{vertical:"",size:0},{default:t(()=>[e($,{style:{display:"block","padding-bottom":"6px","padding-left":"2px"}},{default:t(()=>[_("Volume (UOM)")]),_:1}),e(W,{cols:"5","item-responsive":"",responsive:"screen","x-gap":"16","y-gap":"0"},{default:t(()=>[e(p,{span:"5 m:1"},{default:t(()=>[e(m,{label:"Panjang (cm)",path:"pLength"},{default:t(()=>[e(c,{value:l(a).dimention_length,"onUpdate:value":n[3]||(n[3]=i=>l(a).dimention_length=i),readonly:"",placeholder:"0"},null,8,["value"])]),_:1})]),_:1}),e(p,{span:"5 m:1"},{default:t(()=>[e(m,{label:"Lebar (cm)",path:"pWidth"},{default:t(()=>[e(c,{value:l(a).dimention_wide,"onUpdate:value":n[4]||(n[4]=i=>l(a).dimention_wide=i),readonly:"",placeholder:"0"},null,8,["value"])]),_:1})]),_:1}),e(p,{span:"5 m:1"},{default:t(()=>[e(m,{label:"Tinggi (cm)",path:"pHeight"},{default:t(()=>[e(c,{value:l(a).dimention_height,"onUpdate:value":n[5]||(n[5]=i=>l(a).dimention_height=i),readonly:"",placeholder:"0"},null,8,["value"])]),_:1})]),_:1}),e(p,{span:"5 m:1"},{default:t(()=>[e(m,{label:"Volume (cm3)",path:"pVolume"},{default:t(()=>[e(c,{value:l(a).dimention_volume,"onUpdate:value":n[6]||(n[6]=i=>l(a).dimention_volume=i),readonly:"",placeholder:"0"},null,8,["value"])]),_:1})]),_:1}),e(p,{span:"5 m:1"},{default:t(()=>[e(m,{label:"Berat (gram)",path:"pWeight"},{default:t(()=>[e(c,{value:l(a).dimention_weight,"onUpdate:value":n[7]||(n[7]=i=>l(a).dimention_weight=i),readonly:"",placeholder:"0"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{vertical:"",size:0},{default:t(()=>[e($,{style:{display:"block","padding-bottom":"6px","padding-left":"2px"}},{default:t(()=>[_("Photo")]),_:1}),e(Q,null,{default:t(()=>[e(g,null,{default:t(()=>[(y(!0),z(B,null,oe(l(a).images_arr,(i,Z)=>(y(),ie(A,{width:"100",key:Z,src:i.url},null,8,["src"]))),128))]),_:1})]),_:1})]),_:1}),e(g,{vertical:"",size:0,style:{"margin-top":"24px"}},{default:t(()=>[e(m,{label:`Jumlah Maksimum Qty Level ${l(a).level}`,path:"pMaxQty"},{default:t(()=>[e(c,{disabled:l(a).level==1,value:l(a).maximum,"onUpdate:value":n[8]||(n[8]=i=>l(a).maximum=i),placeholder:"Masukkan jumlah maksimum"},null,8,["disabled","value"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),e(g,{justify:"center",style:{"margin-top":"24px"}},{default:t(()=>[e(v,{color:"#828282",class:"button-tnt",onClick:x},{default:t(()=>[_(" Batalkan ")]),_:1}),e(v,{color:"#219653",class:"button-tnt",onClick:J},{default:t(()=>[_(" Simpan ")]),_:1})]),_:1})]),e(Y,{show:l(k),"onUpdate:show":n[9]||(n[9]=i=>se(k)?k.value=i:null),preset:"card",style:{width:"600px"},title:"A Cool Picture"},{default:t(()=>[w("img",{src:l(N),style:{width:"100%"}},null,8,Me)]),_:1},8,["show"]),e(Pe,{show:l(s).show,"onUpdate:show":n[10]||(n[10]=i=>l(s).show=i),icon:l(s).icon,"icon-color":l(s).iconColor,"hide-icon":l(s).hideIcon,title:l(s).title,subtitle:l(s).subtitle},{default:t(()=>[e(g,{justify:"center"},{default:t(()=>[e(v,{color:"#828282",class:"button-tnt"},{default:t(()=>[_(" Kembali ke Beranda ")]),_:1}),e(v,{color:"#219653",class:"button-tnt",onClick:ue(O,["prevent"])},{default:t(()=>[_(" Tambah Lainnya ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{De as _};

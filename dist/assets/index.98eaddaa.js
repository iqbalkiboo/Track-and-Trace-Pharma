import{_ as ue}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as _e}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as z,o as h,c as C,a as f,u as ce,E as ie,r as p,a1 as de,f as pe,k as a,w as t,q as l,i as n,h as y,j as $,F as A,g as me,t as m,N as fe,ah as ge,af as he,am as ke,an as be,ak as ve,a7 as we,a8 as ye,aP as Ce,aQ as De,aR as xe,aS as Se,a9 as $e,K as Ne,y as Te,aT as Be,aa as Me,ab as Fe,ag as Ae,v as Le}from"./index.21c0d750.js";import{r as N}from"./render-icon.8c81e0de.js";import{h as je}from"./moment.62d3fb0a.js";import{f as L}from"./faktur-kembali.287d5b30.js";import{_ as ze}from"./modal-terima.vue_vue_type_script_setup_true_lang.47ddc87c.js";import{E as Ee}from"./EllipsisVertical.56989e7a.js";import{S as j}from"./SearchOutline.47b929a4.js";import{C as Ke}from"./CheckmarkCircleOutline.8fddcae1.js";import"./getCompanyId.7d0eb93b.js";const Oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ue=f("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M464 128L240 384l-96-96"},null,-1),Ve=f("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M144 384l-96-96"},null,-1),Ie=f("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 128L232 284"},null,-1),Re=[Ue,Ve,Ie],Pe=z({name:"CheckmarkDoneOutline",render:function(D,x){return h(),C("svg",Oe,Re)}}),He={class:"body-tnt"},Je={class:"card-tnt"},qe={class:"table-tnt"},Qe={style:{"text-transform":"capitalize"}},Ge={key:1},We=f("td",{colspan:"10",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),Xe=[We],Ye={class:"table-footer"},ca=z({__name:"index",setup(E){const D=ce(),x=ie(),w=p(!0),g=p(!1),k=p({}),_=p({code:"",sort:"created_at",dir:"desc",status:"selesai",page:1,limit:10}),c=p({show:!1,data:{},form:{}}),r=p({show:p(!1),type:"",icon:de(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),K=p([{label:"Detail",key:"detail",icon:N(j),disabled:!1},{label:"Terima",key:"terima",icon:N(Pe),disabled:!1}]),O=p([{label:"Detail",key:"detail",icon:N(j),disabled:!1}]);function U(u,o,v){switch(u){case"detail":D.push({path:`/pengiriman/faktur-kembali/${o}/detail`});break;case"terima":c.value.show=!0,c.value.data=v;break;case"lacak":D.push({path:`/lacak/manifest/${o}`});break}}pe(()=>{b()});async function b(){w.value=!0,g.value=!0,await L.getDO(_.value).then(u=>{k.value=u.data,w.value=!1,g.value=!1,r.value.show=!1}).catch(u=>{w.value=!1,g.value=!1,r.value.show=!1;const o=u.response.data;x.error(o.message)})}function V(u){_.value.page=1,_.value.limit=u,b()}const T=p(0);function I(){_.value.page=1,clearTimeout(T.value),T.value=setTimeout(function(){b()},600)}function R(){c.value.show=!1,c.value.form={}}function P(u){g.value=!0;const o={tanggal_terima_invoice:u.date,jam:u.hour,rayon_customer:u.rayon};L.updateFakturKembali(c.value.data.id,o).then(()=>{b(),setTimeout(()=>{c.value.show=!1,J(),g.value=!1},300)}).catch(v=>{g.value=!1;const S=v.response.data;x.error(S.message)})}function H(){r.value.show=!1}function J(){r.value.type="success",r.value.icon=Ke,r.value.iconColor="#219653",r.value.title="Berhasil",r.value.subtitle="Dokumen Serah Terima telah diterima",r.value.show=!0}return(u,o)=>{const v=he,S=ke,q=be,Q=ve,G=we,W=ye,X=_e,i=Ce,B=De,Y=xe,d=Se,Z=$e,M=Ne,ee=Te,ae=Be,te=Me,ne=Fe,oe=Ae,le=Le,se=ue;return h(),C(A,null,[f("div",He,[a(v,{style:{"margin-bottom":"4px"}},{default:t(()=>[l("Faktur Kembali")]),_:1}),a(q,null,{default:t(()=>[a(S,null,{default:t(()=>[l("Faktur Kembali")]),_:1})]),_:1}),f("div",Je,[a(W,{gutter:"16"},{default:t(()=>[a(G,{span:6},{default:t(()=>[a(Q,{placeholder:"Cari No DO",value:n(_).code,"onUpdate:value":o[0]||(o[0]=e=>n(_).code=e),onKeyup:I},null,8,["value"])]),_:1})]),_:1}),f("div",qe,[n(w)?(h(),y(X,{key:0})):(h(),y(ne,{key:1,"x-scrollable":""},{default:t(()=>[a(te,{"single-line":!0},{default:t(()=>[a(Y,null,{default:t(()=>[a(B,{style:{"border-radius":"20px"}},{default:t(()=>[a(i,null,{default:t(()=>[l("No")]),_:1}),a(i,null,{default:t(()=>[l("No. DO")]),_:1}),a(i,null,{default:t(()=>[l("Tanggal")]),_:1}),a(i,null,{default:t(()=>[l("No. Invoice")]),_:1}),a(i,null,{default:t(()=>[l("Tujuan")]),_:1}),$("",!0),a(i,null,{default:t(()=>[l("SLA Customer")]),_:1}),a(i,{style:{"text-align":"center"}},{default:t(()=>[l("Parameter SLA")]),_:1}),a(i,null,{default:t(()=>[l("Status Faktur")]),_:1}),a(i,null,{default:t(()=>[l("Driver")]),_:1}),a(i,{style:{"text-align":"center"}},{default:t(()=>[l("Aksi")]),_:1})]),_:1})]),_:1}),a(ae,null,{default:t(()=>[n(k).list.length>0?(h(!0),C(A,{key:0},me(n(k).list,(e,F)=>(h(),y(B,{key:F},{default:t(()=>[a(d,{"data-label":"No"},{default:t(()=>[l(m(n(_).limit*(n(_).page-1)+(F+1)),1)]),_:2},1024),a(d,{"data-label":"No. DO"},{default:t(()=>[l(m(e==null?void 0:e.code),1)]),_:2},1024),a(d,{"data-label":"Tanggal"},{default:t(()=>{var s;return[l(m(n(je)((s=e==null?void 0:e.do)==null?void 0:s.created_at).format("yyyy-MM-DD")),1)]}),_:2},1024),a(d,{"data-label":"No. Invoice"},{default:t(()=>[l(m(u.$filters.isEmpty(e==null?void 0:e.no_invoice)),1)]),_:2},1024),a(d,{"data-label":"Tujuan"},{default:t(()=>{var s;return[l(m((s=e==null?void 0:e.destination)==null?void 0:s.name),1)]}),_:2},1024),$("",!0),a(d,{"data-label":"SLA Customer"},{default:t(()=>{var s;return[l(m(u.$filters.isEmpty((s=e==null?void 0:e.customer)==null?void 0:s.standart_sla)+" Hari"),1)]}),_:2},1024),a(d,{"data-label":"Parameter SLA",style:{"text-align":"center"}},{default:t(()=>[a(Z,{round:"",bordered:!1,type:"success"},{default:t(()=>{var s;return[f("span",Qe,m(u.$filters.isEmpty((s=e==null?void 0:e.faktur)==null?void 0:s.parameter_sla)),1)]}),_:2},1024)]),_:2},1024),a(d,{"data-label":"Status Faktur"},{default:t(()=>{var s;return[l(m(u.$filters.isEmpty((s=e==null?void 0:e.faktur)==null?void 0:s.status_faktur)),1)]}),_:2},1024),a(d,{"data-label":"Driver"},{default:t(()=>{var s;return[l(m((s=e==null?void 0:e.driver)==null?void 0:s.name),1)]}),_:2},1024),a(d,{"data-label":"Aksi",style:{"text-align":"center"}},{default:t(()=>{var s;return[a(ee,{trigger:"click",placement:"bottom-end",options:((s=e==null?void 0:e.faktur)==null?void 0:s.tanggal_terima_invoice.length)>0?n(O):n(K),"show-arrow":!0,onSelect:re=>U(re,e.id,e)},{default:t(()=>[a(M,{tertiary:""},{icon:t(()=>[a(n(fe),null,{default:t(()=>[a(n(Ee))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])]}),_:2},1024)]),_:2},1024))),128)):(h(),C("tr",Ge,Xe))]),_:1})]),_:1})]),_:1})),f("div",Ye,[a(oe,{page:n(_).page,"onUpdate:page":[o[1]||(o[1]=e=>n(_).page=e),b],"page-size":n(_).limit,"onUpdate:pageSize":[o[2]||(o[2]=e=>n(_).limit=e),V],"page-count":n(k).total_page,"page-slot":7,"show-size-picker":n(k).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])])])]),a(ze,{show:n(c).show,"onUpdate:show":o[3]||(o[3]=e=>n(c).show=e),data:n(c).data,"onUpdate:data":o[4]||(o[4]=e=>n(c).data=e),form:n(c).form,"onUpdate:form":o[5]||(o[5]=e=>n(c).form=e),loading:n(g),"onClick:close":R,"onClick:confirm":P},null,8,["show","data","form","loading"]),a(se,{show:n(r).show,"onUpdate:show":o[6]||(o[6]=e=>n(r).show=e),icon:n(r).icon,"icon-color":n(r).iconColor,"hide-icon":n(r).hideIcon,title:n(r).title,subtitle:n(r).subtitle},{default:t(()=>[a(le,{justify:"center"},{default:t(()=>[n(r).type=="success"?(h(),y(M,{key:0,loading:n(g),color:"#828282",class:"button-tnt",onClick:ge(H,["prevent"])},{default:t(()=>[l(" Tutup ")]),_:1},8,["loading","onClick"])):$("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{ca as default};

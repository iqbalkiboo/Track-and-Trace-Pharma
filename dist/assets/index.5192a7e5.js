import{_ as me}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as fe}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as ge}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as he,u as ve,E as ke,r,a1 as ye,f as be,aF as M,p as we,o as u,c as g,a,k as n,w as s,q as d,i as e,h,N as C,j as x,F as $,g as Ce,t as p,ah as S,Q as G,af as xe,am as $e,an as Ae,K as Ie,v as Pe,ak as Me,a7 as Se,H as Te,a8 as De,a9 as Be,y as Ee,aa as Ne,ab as Fe,ag as Ge}from"./index.21c0d750.js";import{c as v}from"./constant.549d5c21.js";import{m as H}from"./master-customer.9a7cd6cf.js";import{_ as He}from"./modal-import-excel.vue_vue_type_script_setup_true_lang.4ceae1be.js";import{A as V}from"./Add.4f3b52cf.js";import{E as Ve}from"./EllipsisVertical.56989e7a.js";import{P as ze}from"./Pencil.0b65f5de.js";import{T as Re}from"./Trash.4f4f705c.js";import{C as Ue}from"./CheckmarkCircleOutline.8fddcae1.js";import{H as Le}from"./HelpCircleOutline.a54a41ed.js";import"./AlertCircleOutline.19cf574c.js";import"./getCompanyId.7d0eb93b.js";import"./master-customer.bc4f2735.js";const Oe={class:"body-tnt"},je={class:"card-tnt"},Ke={class:"table-tnt"},qe=a("thead",null,[a("tr",null,[a("th",{style:{"text-align":"center"}},"No"),a("th",null,"Nama Customer"),a("th",null,"Tipe"),a("th",null,"Alamat"),a("th",null,"Kode ERP"),a("th",null,"PIC"),a("th",{style:{"text-align":"center"}},"Status"),a("th",{style:{"text-align":"center"}},"Aksi")])],-1),Qe={style:{"text-align":"center"}},Je={style:{"text-align":"center"}},We={style:{"text-align":"center"}},Xe={key:1},Ye=a("td",{colspan:"8",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),Ze=[Ye],et={class:"table-footer"},vt=he({__name:"index",setup(tt){const z=ve(),T=ke(),b=r(!1),k=r(!1),y=r({}),A=r(!1),i=r({search:"",sort:"desc",sort_field:"created_at",page:1,limit:10,status:null}),t=r({show:r(!1),type:"",icon:ye(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),R=r([{label:"Aktif",value:1},{label:"Tidak Aktif",value:0}]),w=r({id:"",name:""}),I=r([]),D=o=>()=>G(C,null,{default:()=>G(o)});be(()=>{U(),M.isGranted(v.accessPrivileges.customer+".list")&&m()});function U(){M.isGranted(v.accessPrivileges.customer+".update")&&I.value.push({label:"Edit Data",key:"edit",icon:D(ze)}),M.isGranted(v.accessPrivileges.customer+".delete")&&I.value.push({label:"Hapus Data",key:"delete",icon:D(Re)})}async function m(){b.value=!0,await H.getCustomer(i.value).then(o=>{y.value=o.data.data,b.value=!1,t.value.show=!1}).catch(o=>{b.value=!1;const l=o.response.data;T.error(l.message)})}async function L(o){o&&(i.value.status=o),m()}function O(){setTimeout(()=>{m()},800)}function j(o){i.value.page=1,i.value.limit=o,m()}function K(o,l,P){switch(o){case"edit":z.push({path:`/setting/master-customer/update/${l}`});break;case"delete":w.value.id=l,w.value.name=P,W();break}}async function q(){k.value=!0,await H.deleteSoftCustomer(w.value.id).then(()=>{t.value.show=!1,setTimeout(()=>{J(),k.value=!1},300)}).catch(o=>{k.value=!1;const l=o.response.data;T.error(l.message)})}function Q(){t.value.show=!1}function J(){t.value.type="success",t.value.icon=Ue,t.value.iconColor="#219653",t.value.title="Berhasil",t.value.subtitle="Anda berhasil menghapus data customer",t.value.show=!0}function W(){t.value.type="delete",t.value.icon=Le,t.value.iconColor="#EB5757",t.value.title="Perhatian",t.value.subtitle=`Apakah Anda yakin untuk menghapus ${w.value.name} ?`,t.value.show=!0}function X(o){o.preventDefault(),A.value=!0}function Y(){A.value=!1}return(o,l)=>{const P=xe,Z=$e,ee=Ae,f=Ie,te=we("router-link"),B=Pe,ne=Me,E=Se,ae=Te,oe=De,se=ge,le=Be,ie=Ee,ce=Ne,ue=Fe,re=Ge,_e=fe,de=me;return u(),g($,null,[a("div",Oe,[n(P,{style:{"margin-bottom":"4px"}},{default:s(()=>[d("Master Customer")]),_:1}),n(ee,null,{default:s(()=>[n(Z,null,{default:s(()=>[d("Master Customer")]),_:1})]),_:1}),a("div",je,[n(B,null,{default:s(()=>[o.$filters.isGranted(e(v).accessPrivileges.customer+".create")?(u(),h(te,{key:0,to:{path:"/setting/master-customer/create/1"},class:"text-decoration-none"},{default:s(()=>[n(f,{color:"#219653",class:"button-tnt"},{default:s(()=>[n(e(C),{component:e(V)},null,8,["component"]),d(" Tambah Customer ")]),_:1})]),_:1})):x("",!0),o.$filters.isGranted(e(v).accessPrivileges.customer+".import")?(u(),h(f,{key:1,color:"#219653",class:"button-tnt",onClick:X},{default:s(()=>[n(e(C),{component:e(V)},null,8,["component"]),d(" Import Data Excel ")]),_:1})):x("",!0)]),_:1}),o.$filters.isGranted(e(v).accessPrivileges.customer+".list")?(u(),g($,{key:0},[n(oe,{gutter:"16",style:{"margin-top":"24px"}},{default:s(()=>[n(E,{span:6},{default:s(()=>[n(ne,{value:e(i).search,"onUpdate:value":l[0]||(l[0]=c=>e(i).search=c),onInput:O,type:"text",placeholder:"Cari nama customer"},null,8,["value"])]),_:1}),n(E,{span:6},{default:s(()=>[n(ae,{placeholder:"status",options:e(R),clearable:"",value:e(i).status,"onUpdate:value":[l[1]||(l[1]=c=>e(i).status=c),l[2]||(l[2]=c=>L(c))],style:{"max-width":"100%"}},null,8,["options","value"])]),_:1})]),_:1}),a("div",Ke,[e(b)?(u(),h(se,{key:0})):(u(),h(ue,{key:1,"x-scrollable":""},{default:s(()=>[n(ce,{"single-line":!1},{default:s(()=>{var c,N;return[qe,a("tbody",null,[((N=(c=e(y))==null?void 0:c.list)==null?void 0:N.length)>0?(u(!0),g($,{key:0},Ce(e(y).list,(_,F)=>(u(),g("tr",{key:F},[a("td",Qe,p(e(i).limit*(e(i).page-1)+(F+1)),1),a("td",null,p(_.name),1),a("td",null,p(_.customers_category.name),1),a("td",null,p(o.$filters.setAddress(_.address)),1),a("td",null,p(_.erp_code),1),a("td",null,p(_.pic.name),1),a("td",Je,[n(le,{bordered:!1,type:_.status.value===1?"success":"error"},{default:s(()=>[d(p(_.status.label=="active"?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),a("td",We,[n(ie,{placement:"bottom-end","show-arrow":!0,options:e(I),onSelect:pe=>K(pe,_.id,_.name)},{default:s(()=>[n(f,{tertiary:""},{icon:s(()=>[n(e(C),null,{default:s(()=>[n(e(Ve))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])]))),128)):(u(),g("tr",Xe,Ze))])]}),_:1})]),_:1})),a("div",et,[n(re,{page:e(i).page,"onUpdate:page":[l[3]||(l[3]=c=>e(i).page=c),m],"page-count":e(y).total_page,"page-slot":10,"show-size-picker":e(y).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":j},null,8,["page","page-count","show-size-picker"])])])],64)):(u(),h(_e,{key:1}))])]),n(He,{"is-show-modal":e(A),onHideModal:Y},null,8,["is-show-modal"]),n(de,{show:e(t).show,"onUpdate:show":l[4]||(l[4]=c=>e(t).show=c),icon:e(t).icon,"icon-color":e(t).iconColor,"hide-icon":e(t).hideIcon,title:e(t).title,subtitle:e(t).subtitle},{default:s(()=>[n(B,{justify:"center"},{default:s(()=>[e(t).type=="success"?(u(),h(f,{key:0,color:"#828282",class:"button-tnt",onClick:S(m,["prevent"])},{default:s(()=>[d(" Tutup ")]),_:1},8,["onClick"])):x("",!0),e(t).type=="delete"?(u(),g($,{key:1},[n(f,{loading:e(k),color:"#828282",class:"button-tnt",onClick:S(Q,["prevent"])},{default:s(()=>[d(" Tidak ")]),_:1},8,["loading","onClick"]),n(f,{loading:e(k),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:S(q,["prevent"])},{default:s(()=>[d(" Iya ")]),_:1},8,["loading","onClick"])],64)):x("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{vt as default};

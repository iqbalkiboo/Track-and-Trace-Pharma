import{_ as ve}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as be}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as ke,u as ye,E as we,r,a1 as Ce,f as xe,o as _,c as b,a as s,k as t,w as a,q as d,ah as h,i as e,N as S,h as M,F as O,g as De,t as m,j as q,af as Re,am as Se,an as Me,K as Oe,L as $e,ak as Be,a7 as Ne,a8 as Ie,a9 as Ae,y as Fe,aa as ze,ab as Te,ag as Ue,v as Ve,as as qe,I as Ee,J as Ke,M as Le,Q as E}from"./index.21c0d750.js";import{h as je}from"./moment.62d3fb0a.js";import{r as $}from"./return.bfb09c74.js";import{_ as He}from"./modal-import-excel.vue_vue_type_script_setup_true_lang.a8416a79.js";import{A as Qe}from"./Add.4f3b52cf.js";import{E as Ge}from"./EllipsisVertical.56989e7a.js";import{C as Je}from"./CheckmarkCircleOutline.8fddcae1.js";import{S as Pe}from"./SearchOutline.47b929a4.js";import{C as Ye}from"./CloseOutline.cda7564f.js";import"./getCompanyId.7d0eb93b.js";const We={class:"body-tnt"},Xe={class:"card-tnt"},Ze={class:"table-tnt"},et=s("thead",null,[s("tr",null,[s("th",null,"No"),s("th",null,"DO Return"),s("th",null,"Tanggal DO Return"),s("th",null,"DO Origin"),s("th",null,"Customer"),s("th",{style:{"text-align":"center"}},"Qty"),s("th",{style:{"text-align":"center"}},"Status"),s("th",{style:{"text-align":"center",width:"3rem"}},"Aksi")])],-1),tt={"data-label":"No"},nt={"data-label":"DO Return"},at={"data-label":"Tanggal DO Return"},ot={"data-label":"DO Origin"},st={"data-label":"Customer"},lt={"data-label":"Qty",style:{"text-align":"center"}},it={"data-label":"Status",style:{"text-align":"center"}},rt={"data-label":"Aksi"},ct={key:1},ut=s("td",{colspan:"6",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),dt=[ut],_t={class:"table-footer"},Rt=ke({__name:"index",setup(pt){const K=ye(),x=we(),k=r(!0),u=r(!1),g=r({}),c=r({search:"",status:"",sort:"desc",sort_field:"created_at",page:1,limit:10}),D=r({show:!1}),y=r({show:!1}),w=r({id:"",code:""}),B=r(),v=r({}),N=r();N.value={reason:{required:!0,message:"Alasan tidak boleh kosong",trigger:["input","blur"]}};const o=r({show:r(!1),type:"",icon:Ce(),iconColor:"",hideIcon:!1,title:"",subtitle:"",align:"center"}),I=i=>()=>E(S,null,{default:()=>E(i)}),L=i=>{const n=[];return n.push({label:"Detail",key:"detail",icon:I(Pe)}),i.status==="pending"&&n.push({key:"cancel",label:"Batalkan",icon:I(Ye)}),n};function j(i,n,C){switch(i){case"detail":K.push({name:"penerimaan-return-code",params:{code:n.code},query:{return_id:n.id}});break;case"cancel":w.value.id=n.id,w.value.code=n.code,P();break;case"lacak":$.getTrackReturn(n.id)}}xe(()=>{localStorage.removeItem("product_id"),f()});async function f(){k.value=!0,u.value=!0,await $.getReturn(c.value).then(i=>{g.value=i.data,k.value=!1,u.value=!1}).catch(i=>{k.value=!1,u.value=!1;const n=i.response.data;x.error(n.message)})}const A=r(0);function H(){c.value.page=1,clearTimeout(A.value),A.value=setTimeout(function(){f()},600)}function Q(i){c.value.page=1,c.value.limit=i,f()}function G(){D.value.show=!0}function J(){D.value.show=!1}function P(){y.value.show=!0}function F(){v.value.reason="",y.value.show=!1}async function Y(){u.value=!0;const i=new FormData;i.append("reason",v.value.reason),await $.cancelReturn(w.value.id,i).then(()=>{o.value.show=!1,F(),setTimeout(()=>{ee(),u.value=!1},300)}).catch(n=>{u.value=!1;const C=n.response.data;x.error(C.message)})}function W(){var i;(i=B.value)==null||i.validate().then(()=>{o.value.type="confirm",o.value.hideIcon=!0,o.value.title="Konfirmasi Cancel",o.value.subtitle=`Apakah Anda yakin untuk membatalkan kode ${w.value.code} ?`,o.value.show=!0}).catch(()=>{x.error("Form tidak valid, tolong periksa kembali")})}function X(){o.value.show=!1}function Z(){f(),o.value.show=!1}function ee(){o.value.type="success",o.value.icon=Je,o.value.iconColor="#219653",o.value.title="Berhasil",o.value.subtitle="Anda berhasil membatalkan return",o.value.show=!0}return(i,n)=>{const C=Re,te=Se,ne=Me,p=Oe,ae=$e,z=Be,oe=Ne,se=Ie,le=be,ie=Ae,re=Fe,ce=ze,ue=Te,de=Ue,R=Ve,_e=ve,pe=qe,me=Ee,fe=Ke,he=Le;return _(),b(O,null,[s("div",We,[t(C,{style:{"margin-bottom":"4px"}},{default:a(()=>[d("Return")]),_:1}),t(ne,null,{default:a(()=>[t(te,null,{default:a(()=>[d("Return")]),_:1})]),_:1}),t(ae,{style:{"border-radius":"10px","margin-top":"18px"}},{default:a(()=>[t(p,{color:"#219653",class:"button-tnt",onClick:h(G,["prevent"])},{default:a(()=>[t(e(S),{component:e(Qe)},null,8,["component"]),d(" Upload DO Return ")]),_:1},8,["onClick"])]),_:1}),s("div",Xe,[t(se,{gutter:"16"},{default:a(()=>[t(oe,{span:6},{default:a(()=>[t(z,{value:e(c).search,"onUpdate:value":[n[0]||(n[0]=l=>e(c).search=l),H],clearable:"",type:"text",placeholder:"Cari Kode DO"},null,8,["value"])]),_:1})]),_:1}),s("div",Ze,[e(k)?(_(),M(le,{key:0})):(_(),M(ue,{key:1,"x-scrollable":""},{default:a(()=>[t(ce,{"single-line":!1},{default:a(()=>[et,s("tbody",null,[e(g).list.length>0?(_(!0),b(O,{key:0},De(e(g).list,(l,T)=>{var U,V;return _(),b("tr",{key:T},[s("td",tt,m(e(c).limit*(e(c).page-1)+(T+1)),1),s("td",nt,m(l.code),1),s("td",at,m(e(je)(l.created_at).format("yyyy-MM-DD")),1),s("td",ot,m(l.do_origin_code),1),s("td",st,m((U=l.customer)==null?void 0:U.name),1),s("td",lt,m(i.$filters.toNumber((V=l.qty)==null?void 0:V.request)),1),s("td",it,[t(ie,{round:"",bordered:!1,type:l.status==="cancel"?"error":l.status==="pending"?"warning":l.status==="scanned"?"primary":"success"},{default:a(()=>[d(m(i.$filters.toStatus(l.status)),1)]),_:2},1032,["type"])]),s("td",rt,[t(re,{placement:"bottom-end",options:L(l),onSelect:ge=>j(ge,l,l.to_number)},{default:a(()=>[t(p,{tertiary:""},{icon:a(()=>[t(e(S),null,{default:a(()=>[t(e(Ge))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])])}),128)):(_(),b("tr",ct,dt))])]),_:1})]),_:1})),s("div",_t,[t(de,{page:e(c).page,"onUpdate:page":[n[1]||(n[1]=l=>e(c).page=l),f],"page-size":e(c).limit,"onUpdate:pageSize":[n[2]||(n[2]=l=>e(c).limit=l),Q],"page-count":e(g).total_page,"page-slot":7,"show-size-picker":e(g).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])])])]),t(He,{"is-show-modal":e(D).show,onHideModal:J,onGetData:f},null,8,["is-show-modal"]),t(_e,{show:e(o).show,"onUpdate:show":n[3]||(n[3]=l=>e(o).show=l),icon:e(o).icon,"icon-color":e(o).iconColor,"hide-icon":e(o).hideIcon,title:e(o).title,subtitle:e(o).subtitle,align:e(o).align},{default:a(()=>[t(R,{justify:"center",style:{width:"100%"}},{default:a(()=>[e(o).type=="success"?(_(),M(p,{key:0,color:"#828282",class:"button-tnt",onClick:h(Z,["prevent"])},{default:a(()=>[d(" Tutup ")]),_:1},8,["onClick"])):q("",!0),e(o).type=="confirm"?(_(),b(O,{key:1},[t(p,{loading:e(u),color:"#828282",class:"button-tnt",onClick:h(X,["prevent"])},{default:a(()=>[d(" Batalkan ")]),_:1},8,["loading","onClick"]),t(p,{loading:e(u),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:h(Y,["prevent"])},{default:a(()=>[d(" Yakin ")]),_:1},8,["loading","onClick"])],64)):q("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle","align"]),t(he,{"mask-closable":!1,show:e(y).show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"470px","max-width":"100%","border-radius":"8px"},"header-style":"padding-bottom: 10px","onUpdate:show":n[5]||(n[5]=l=>e(y).show=!1)},{default:a(()=>[t(R,{vertical:""},{default:a(()=>[t(pe,{style:{"margin-bottom":"0"}},{default:a(()=>[d("Konfirmasi Cancel")]),_:1}),t(fe,{ref_key:"formRef",ref:B,model:e(v),rules:e(N),"show-require-mark":!1,class:"form-tnt",style:{width:"100%"}},{default:a(()=>[t(me,{path:"reason",label:"Alasan"},{default:a(()=>[t(z,{value:e(v).reason,"onUpdate:value":n[4]||(n[4]=l=>e(v).reason=l),placeholder:"Masukkan alasan"},null,8,["value"])]),_:1})]),_:1},8,["model","rules"]),t(R,{justify:"center"},{default:a(()=>[t(p,{loading:e(u),color:"#828282",class:"button-tnt",onClick:h(F,["prevent"])},{default:a(()=>[d(" Batalkan ")]),_:1},8,["loading","onClick"]),t(p,{loading:e(u),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:h(W,["prevent"])},{default:a(()=>[d(" Konfirmasi ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["show"])],64)}}});export{Rt as default};

import{m as R}from"./master-user.75b9491b.js";import{d as L,r as d,E as M,o as U,h as V,w as a,k as o,i as t,q as h,a as q,ak as E,I as K,J as N,v as D,K as F,L as T,M as j}from"./index.21c0d750.js";const z=q("h4",{style:{"margin-top":"0","font-weight":"500"}},"Reset Password",-1),S=L({__name:"t-modal-reset-password",props:{show:{type:Boolean},user_id:{}},emits:["update:show"],setup(v,{emit:k}){const b=v,n=d({new_password:"",confirm_password:""}),_=d(null),p=M(),c=d(),i=d(!1),u=d(!1);c.value={new_password:{required:!0,message:"Password Baru tidak boleh kosong",trigger:["input","blur"]},confirm_password:{required:!0,validator:(s,e)=>{if(e){if(e!==n.value.new_password)return new Error("Password belum sesuai")}else return new Error("Konfirmasi Password tidak boleh kosong")},trigger:["input","blur"]}};function m(){k("update:show",!1)}function x(){i.value=!0,u.value=!0;const s=new FormData;s.append("new_password",n.value.new_password),s.append("confirm_password",n.value.confirm_password),R.resetPasswordUser(b.user_id,s).then(()=>{i.value=!1,u.value=!1,m(),p.success("success update password")}).catch(e=>{if(e.response){const l=e.response.data;p.error(l.message)}u.value=!1})}async function y(){var s;await((s=_.value)==null?void 0:s.validate().then(()=>{x()}).catch(()=>{p.error("Form tidak valid, tolong periksa kembali")}))}return(s,e)=>{const l=E,w=K,B=N,f=D,g=F,P=T,C=j;return U(),V(C,{show:s.show,"onUpdate:show":e[2]||(e[2]=r=>s.$emit("update:show",r))},{default:a(()=>[o(P,{style:{"--n-border-radius":"10px",width:"470px","max-width":"100%"},"header-style":{paddingLeft:"30px",paddingRight:"30px",paddingBottom:"15px"},"content-style":{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"20px"},bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:a(()=>[o(f,{vertical:"",style:{"padding-left":"10px","padding-right":"10px","padding-bottom":"10px"}},{default:a(()=>[z,o(B,{ref_key:"formRef",ref:_,class:"form-tnt","show-require-mark":!1,"label-width":80,model:t(n),rules:t(c)},{default:a(()=>[o(w,{label:"Password Baru",path:"new_password"},{default:a(()=>[o(l,{placeholder:"",type:"password","show-password-on":"click",value:t(n).new_password,"onUpdate:value":e[0]||(e[0]=r=>t(n).new_password=r)},null,8,["value"])]),_:1}),o(w,{label:"Konfirmasi Password",path:"confirm_password"},{default:a(()=>[o(l,{placeholder:"",type:"password","show-password-on":"click",value:t(n).confirm_password,"onUpdate:value":e[1]||(e[1]=r=>t(n).confirm_password=r)},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(f,{justify:"center"},{default:a(()=>[o(g,{color:"#828282",class:"button-tnt",onClick:m},{default:a(()=>[h(" Tutup ")]),_:1}),o(g,{loading:t(i),type:"primary",class:"button-tnt",onClick:y},{default:a(()=>[h(" Simpan ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])}}});export{S as _};

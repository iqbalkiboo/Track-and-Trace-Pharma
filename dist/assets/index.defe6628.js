import{_ as we}from"./t-modal-scan-serialisasi.vue_vue_type_script_setup_true_lang.9d726df6.js";import{_ as Se}from"./t-product-location-modal.vue_vue_type_script_setup_true_lang.ce2f4aa0.js";import{_ as Ce}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as De,r as c,E as Pe,b as Le,u as xe,f as ze,aU as $e,p as Me,o as r,h as w,w as a,k as e,q as o,t as l,c as S,F as D,j as Be,a as C,g as R,i as Ne,aG as Te,as as Ae,ac as Re,v as je,ak as Ee,K as Ie,ad as Ue,ae as Ve,aP as qe,aQ as Qe,aR as Fe,aS as He,N as Ke,y as Ge,aT as Je,aa as Oe,ag as We,_ as Xe,L as Ye}from"./index.21c0d750.js";import{d as Ze,f as Y,h as ea,e as aa,i as na}from"./reception.0ba4dd71.js";import{E as ta}from"./EllipsisVertical.56989e7a.js";import"./getCompanyId.7d0eb93b.js";const oa={key:0},la={style:{"margin-top":"18px"}},sa=["onClick"],ia={style:{"font-size":"0.8rem",color:"#0b8f9d",cursor:"pointer","text-decoration":"underline"}},ua=["onClick"],ca=["onClick"],ka=De({__name:"index",setup(_a){const Z=c(Array(10).fill(0).map((t,s)=>({id:s}))),ee=c(Array(2).fill(0).map((t,s)=>({id:s}))),ae=c([{label:"Delete",key:"delete",disabled:!1}]),B=Pe(),P=Le(),j=xe(),E=c(!1),N=c(!1),p=c(null),f=c(null),I=c(null),U=c(null),L=c(null),T=c(),x=c(!1),A=c(!1),V=c(!1),z=c(null);function ne(t){console.log(t)}const te=c([]);ze(()=>{oe()});async function oe(){N.value=!0,await se(),await le(),p.value&&await q(),N.value=!1}async function le(){const t=await Ze(P.params.id);p.value=t.data,T.value={page:1,limit:10,reception_id:p.value.id,company_id:""}}async function se(){const t=await Y(P.params.code);f.value=t.data,f.value.level==2&&j.replace({name:"penerimaan-id-code-packing"})}async function q(){if(T.value){const t=await ea(T.value);I.value=t.data}}async function ie(t){t.active=!t.active}async function ue(t){t.active=!t.active,t.active&&(t.loading=!0,await Q(1,t),t.loading=!1)}async function Q(t,s){var k;const m=await aa({parent_code:P.params.code,page:(k=s.page)!=null?k:1,limit:10,product_code:s.code,reception_code:p==null?void 0:p.value.code});s.serialize=m.data.list,s.page=m.data.page,s.total_page=m.data.total_page}function ce(t,s){U.value=t,L.value=s,x.value=!0}async function _e(t){L.value?(await na({warehouse_building_id:t,reception_id:P.params.id,packing_code:U.value.packing.code,product_code:L.value.code,company_id:""}),await q(),B.success("Lokasi produk berhasil diperbarui."),x.value=!1):B.error("Tidak ada produk yang dipilih!")}async function re(t){E.value=!0;const s=await Y(t).finally(()=>{E.value=!1});V.value=!0,z.value=s.data}async function de(){return z.value?j.push({name:"penerimaan-id-code",params:{code:z.value.code}}):B.error("Data serialize tidak tersedia.")}return $e(()=>{const s=Z.value.map(m=>({...m,active:!1})).map(m=>({...m,table:ee.value.map(k=>({...k,active:!1}))}));te.value=s}),(t,s)=>{const m=Te,k=Ae,y=Re,_=je,F=Ce,pe=Ee,g=Ie,h=Ue,H=Ve,K=Me("n-5"),$=qe,G=Qe,fe=Fe,M=He,me=Ke,ge=Ge,ve=Je,ke=Oe,ye=We,J=Xe,O=Ye,be=Se,he=we;return r(),w(_,{style:{padding:"1rem"},vertical:""},{default:a(()=>{var W,X;return[e(_,{size:0,vertical:""},{default:a(()=>[e(m,{style:{"margin-bottom":"0"}},{default:a(()=>[o(" Daftar Packing ")]),_:1}),e(k,{style:{"margin-bottom":"0"}},{default:a(()=>{var n,u;return[o(" ID Level "+l((n=f.value)==null?void 0:n.level)+": "+l((u=f.value)==null?void 0:u.code),1)]}),_:1}),e(y,null,{default:a(()=>{var n;return[o("ID Manifest: "+l((n=f.value)==null?void 0:n.manifest.code),1)]}),_:1}),e(y,null,{default:a(()=>{var n;return[o("ID DO: "+l((n=f.value)==null?void 0:n.do.code),1)]}),_:1}),e(y,null,{default:a(()=>{var n;return[o("Produk: "+l((n=f.value)==null?void 0:n.product.name),1)]}),_:1}),e(y,null,{default:a(()=>{var n,u;return[o(" Location: "+l((n=f.value)==null?void 0:n.warehouse_building.code)+" - "+l((u=f.value)==null?void 0:u.warehouse_building.name),1)]}),_:1})]),_:1}),N.value?(r(),w(F,{key:0})):(r(),S(D,{key:1},[((W=p.value)==null?void 0:W.status)!="received"?(r(),S("div",oa,[e(_,{justify:"space-between",style:{padding:"1rem"}},{default:a(()=>[e(pe,{placeholder:"ID Kemasan/Product"}),e(_,null,{default:a(()=>[e(g,{type:"error"},{default:a(()=>[o("Bulk Aksi")]),_:1}),e(g,{type:"warning",onClick:s[0]||(s[0]=n=>A.value=!0)},{default:a(()=>[o("ScanQR")]),_:1})]),_:1})]),_:1})])):Be("",!0),C("div",la,[e(H,{cols:"3","item-responsive":"",responsive:"screen","x-gap":"26","y-gap":"16"},{default:a(()=>[e(h,{span:"3 s:2 m:1"},{default:a(()=>[e(g,{block:"",color:"#219653",class:"button-tnt"},{default:a(()=>{var n,u;return[o(" Approved ("+l((u=(n=p.value)==null?void 0:n.total.approved)!=null?u:0)+") ",1)]}),_:1})]),_:1}),e(h,{span:"3 s:2 m:1"},{default:a(()=>[e(g,{block:"",type:"warning",class:"button-tnt"},{default:a(()=>{var n,u;return[o(" Broken ("+l((u=(n=p.value)==null?void 0:n.total.broken)!=null?u:0)+") ",1)]}),_:1})]),_:1}),e(h,{span:"3 s:2 m:1"},{default:a(()=>[e(g,{block:"",type:"error",class:"button-tnt"},{default:a(()=>{var n,u;return[o(" Missing ("+l((u=(n=p.value)==null?void 0:n.total.missing)!=null?u:0)+") ",1)]}),_:1})]),_:1})]),_:1})]),e(O,null,{default:a(()=>[e(_,{vertical:""},{default:a(()=>{var n,u;return[(r(!0),S(D,null,R((u=(n=I.value)==null?void 0:n.list)!=null?u:[],d=>(r(),w(O,{key:d.id,"content-style":{background:"#eee"}},{default:a(()=>[e(_,{justify:"space-between"},{default:a(()=>[C("div",null,[e(k,{style:{margin:"0"}},{default:a(()=>[o(" Packing Code: "+l(d.packing.code),1)]),_:2},1024),e(y,{style:{margin:"0"}},{default:a(()=>[o("Jenis Product: "+l(d.total.product),1)]),_:2},1024),e(y,{style:{margin:"0"}},{default:a(()=>[o("Qty Product: "+l(d.total.qty),1)]),_:2},1024)]),e(_,{align:"center"},{default:a(()=>[e(y,{style:{"font-size":"0.8rem"}},{default:a(()=>[o(l(d.total.approved/d.total.qty*100)+"% Approved",1)]),_:2},1024),C("div",{onClick:i=>ie(d)},[C("div",ia,l(d.active?"Tampilkan Lebih Sedikit":"Tampilkan Detail"),1)],8,sa)]),_:2},1024)]),_:2},1024),e(J,{show:!!d.active},{default:a(()=>[(r(!0),S(D,null,R(d.products,i=>(r(),w(_,{key:i.id,vertical:"",style:{padding:"1rem"}},{default:a(()=>[e(_,{justify:"space-between"},{default:a(()=>[e(K,null,{default:a(()=>[o(l(i.name)+" ("+l(i.approved)+"/"+l(i.qty)+") ",1)]),_:2},1024),C("div",{onClick:b=>ue(i),style:{"font-size":"0.8rem",color:"#0b8f9d",cursor:"pointer","text-decoration":"underline"}},l(i.active?"Tampilkan Lebih Sedikit":"Tampilkan Detail"),9,ua)]),_:2},1024),e(_,{justify:"space-between",style:{"margin-top":"0.5rem"}},{default:a(()=>[e(K,null,{default:a(()=>[o(" Location: "+l(i.warehouse_building.code)+" - "+l(i.warehouse_building.name)+" ",1),C("a",{href:"#",onClick:b=>ce(d,i)}," Edit ",8,ca)]),_:2},1024),e(H,{cols:"3","item-responsive":"",responsive:"screen","x-gap":"26","y-gap":"16"},{default:a(()=>[e(h,null,{default:a(()=>[e(g,{block:"",color:"#219653",class:"button-tnt"},{default:a(()=>[o(" Approved ("+l(i.approved)+") ",1)]),_:2},1024)]),_:2},1024),e(h,null,{default:a(()=>[e(g,{block:"",type:"warning",class:"button-tnt"},{default:a(()=>[o(" Broken ("+l(i.broken)+") ",1)]),_:2},1024)]),_:2},1024),e(h,null,{default:a(()=>[e(g,{block:"",type:"error",class:"button-tnt"},{default:a(()=>[o(" Missing ("+l(i.missing)+") ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(J,{show:!!i.active},{default:a(()=>[e(_,{vertical:""},{default:a(()=>[i.loading?(r(),w(F,{key:0})):(r(),S(D,{key:1},[e(ke,{"bottom-bordered":!1,bordered:!1,"single-line":!0},{default:a(()=>[e(fe,null,{default:a(()=>[e(G,{style:{"border-radius":"20px"}},{default:a(()=>[e($,{style:{"background-color":"#f2994a",color:"white"}},{default:a(()=>[o("Code")]),_:1}),e($,{style:{"background-color":"#f2994a",color:"white"}},{default:a(()=>[o("Level")]),_:1}),e($,{style:{"background-color":"#f2994a",color:"white"}},{default:a(()=>[o("Status")]),_:1}),e($,{style:{"background-color":"#f2994a",color:"white"}},{default:a(()=>[o("Aksi")]),_:1})]),_:1})]),_:1}),e(ve,null,{default:a(()=>{var b;return[(r(!0),S(D,null,R((b=i.serialize)!=null?b:[],v=>(r(),w(G,{key:v.id},{default:a(()=>[e(M,null,{default:a(()=>[o(l(v.code),1)]),_:2},1024),e(M,null,{default:a(()=>[o(l(v.name),1)]),_:2},1024),e(M,null,{default:a(()=>[o(l(v.status),1)]),_:2},1024),e(M,null,{default:a(()=>[e(ge,{trigger:"click",options:ae.value,"show-arrow":!0,onSelect:ne},{default:a(()=>[e(me,{component:Ne(ta),style:{cursor:"pointer"}},null,8,["component"])]),_:1},8,["options"])]),_:1})]),_:2},1024))),128))]}),_:2},1024)]),_:2},1024),e(_,{justify:"center"},{default:a(()=>{var b;return[e(ye,{page:i.page,"onUpdate:page":[v=>i.page=v,v=>Q(v,i)],"page-count":(b=i.total_page)!=null?b:0,"page-slot":5},null,8,["page","onUpdate:page","page-count"])]}),_:2},1024)],64))]),_:2},1024)]),_:2},1032,["show"])]),_:2},1024))),128))]),_:2},1032,["show"])]),_:2},1024))),128))]}),_:1})]),_:1})],64)),e(be,{show:x.value,"onUpdate:show":s[1]||(s[1]=n=>x.value=n),name:(X=L.value)==null?void 0:X.name,"onClick:submit":_e},null,8,["show","name"]),e(he,{show:A.value,"onUpdate:show":s[2]||(s[2]=n=>A.value=n),result:V.value,data:z.value,"onClick:submit":re,"onClick:continue":de},null,8,["show","result","data"])]}),_:1})}}});export{ka as default};

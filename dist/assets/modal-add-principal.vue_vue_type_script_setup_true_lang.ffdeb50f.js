import{d as D,r as s,f as N,e as q,o as B,h as C,w as o,k as a,q as c,i as t,as as S,ak as R,I as U,J as V,K as z,v as E,L as K,M as T}from"./index.21c0d750.js";import{p as A}from"./principal.7a723d63.js";const F=D({__name:"modal-add-principal",props:{isShowModal:{type:Boolean}},emits:["hideModal","fetchData","update:isShowModal"],setup(k,{emit:m}){const v=k,u=s(),n=s({}),b=s(),i=s(!1),w=s({name:[{required:!0,validator:(l,e)=>{if(!e||e.length<1)return new Error("Nama Principal tidak boleh kosong")},trigger:["input","blur"]}],code:[{required:!0,validator:(l,e)=>{if(!e||e.length<1)return new Error("Kode Customer tidak boleh kosong")},trigger:["input","blur"]}],description:[{required:!0,validator:(l,e)=>{if(!e||e.length<1)return new Error("Deskripsi tidak boleh kosong")},trigger:["input","blur"]}]});N(()=>{u.value=q.getAuth()});const f=()=>{setTimeout(()=>{m("hideModal")},100)};function x(){i.value=!0;let l="";u.value.xxtype==="5up3r4dm1n"?l=u.value["xx-usertype-access"].holding_id:l=u.value.users.user_type.id;const e={holding_id:l,name:n.value.name,description:n.value.description,erp_code:n.value.erp_code};A.createPrincipal(e).then(()=>{i.value=!1,d(),f(),m("fetchData")}).catch(()=>{i.value=!1});function d(){n.value.name=""}}return(l,e)=>{const d=S,p=R,_=U,M=V,h=z,g=E,y=K,P=T;return B(),C(P,{show:v.isShowModal,"onUpdate:show":e[3]||(e[3]=r=>l.$emit("update:isShowModal",r))},{default:o(()=>[a(y,{style:{width:"470px","--n-border-radius":"10px"},"content-style":"padding: 15px 20px 28px 20px;",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:o(()=>[a(g,{vertical:"",size:25},{default:o(()=>[a(d,{style:{"margin-bottom":"0"}},{default:o(()=>[c("Tambah Principal")]),_:1}),a(M,{ref_key:"formRef",ref:b,class:"form-tnt",model:t(n),rules:t(w),"show-require-mark":!1},{default:o(()=>[a(_,{path:"name",label:"Nama Principal"},{default:o(()=>[a(p,{value:t(n).name,"onUpdate:value":e[0]||(e[0]=r=>t(n).name=r),placeholder:"Masukkan Nama Principal"},null,8,["value"])]),_:1}),a(_,{path:"erp_code",label:"Kode Principal"},{default:o(()=>[a(p,{value:t(n).erp_code,"onUpdate:value":e[1]||(e[1]=r=>t(n).erp_code=r),placeholder:"Masukkan kode Principal"},null,8,["value"])]),_:1}),a(_,{label:"Deskripsi",path:"description"},{default:o(()=>[a(p,{value:t(n).description,"onUpdate:value":e[2]||(e[2]=r=>t(n).description=r),placeholder:"Masukkan deskripsi",type:"textarea",autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})]),_:1},8,["model","rules"]),a(g,{justify:"center"},{default:o(()=>[a(h,{color:"#828282",class:"button-tnt",loading:t(i),onClick:f},{default:o(()=>[c("Batalkan")]),_:1},8,["loading"]),a(h,{color:"#219653",class:"button-tnt",loading:t(i),onClick:x},{default:o(()=>[c("Simpan")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}});export{F as _};

import{_ as st}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as _t,b as it,u as ut,E as ct,r as K,f as rt,p as dt,o as u,c as x,i as r,k as e,h as z,w as t,q as n,t as l,ah as O,a as c,F as P,g as T,j as S,af as ft,s as mt,v as pt,a7 as gt,K as yt,a8 as ht,ad as bt,ae as vt,aP as xt,aQ as kt,aR as wt,aS as zt,aT as Dt,aa as Mt,ab as Pt,_ as Nt,L as Tt,R as Ct}from"./index.21c0d750.js";import{h as G}from"./moment.62d3fb0a.js";import{l as U}from"./loading.ceda1b09.js";import"./getCompanyId.7d0eb93b.js";const $t={class:"body-tnt"},Kt={key:0,class:"card-tnt"},Lt={class:"card-tnt",style:{border:"1px solid #e5e5e5","border-radius":"10px","margin-top":"0",padding:"10px","text-align":"center"}},Bt={class:"card-tnt",style:{border:"1px solid #e5e5e5","border-radius":"10px","margin-top":"0",padding:"10px","text-align":"center"}},Rt={key:0,class:"table-tnt",style:{"margin-top":"0"}},St=c("div",null,"Pemilik : "+l("?"),-1),jt={class:"table-tnt",style:{"margin-top":"0"}},Vt={style:{"margin-bottom":".5rem"}},qt={style:{"margin-bottom":".5rem"}},Et={style:{"margin-bottom":".5rem"}},Ft={style:{"margin-bottom":".5rem"}},Ht={style:{"margin-bottom":".5rem"}},It={style:{"margin-bottom":".5rem"}},Qt={style:{"margin-bottom":".5rem"}},At={class:"bottom-action-button"},Jt={class:"action-item"},Zt=_t({__name:"detail",setup(Ot){const L=it(),W=ut(),j=ct(),B=K(!1),X=K(!1),p=K({}),V=K({});rt(()=>{localStorage.removeItem("manifest_id"),Y()});async function Y(){B.value=!0,tt(),await Z(),B.value=!1}async function Z(){const s=L.params.id;await U.getDetailManifest(s).then(async y=>{p.value=y.data}).catch(y=>{const k=y.response.data;j.error(k.message)})}async function tt(){const s={manifest_id:L.params.id,limit:1e3};await U.getManifestLog(s).then(async y=>{V.value=y.data}).catch(y=>{const k=y.response.data;j.error(k.message)})}function et(s){var h,D,M,N;const y=s==null?void 0:s.detail,k=(h=s==null?void 0:s.urban_village)==null?void 0:h.name,C=(D=s==null?void 0:s.sub_district)==null?void 0:D.name,_=(M=s==null?void 0:s.district)==null?void 0:M.name,i=(N=s==null?void 0:s.province)==null?void 0:N.name;return`${y}, ${k}, ${C}, ${_}, ${i}`}function nt(){localStorage.setItem("manifest_id",L.params.id);const s=W.resolve({path:"/print/loading-manifest"});window.open(s.href,"_blank")}return(s,y)=>{const k=st,C=ft,_=mt,i=pt,h=gt,D=yt,M=ht,N=bt,at=vt,b=xt,$=kt,q=wt,v=zt,E=Dt,F=Mt,H=Pt,I=Nt,Q=Tt,A=Ct,lt=dt("router-link");return u(),x("div",$t,[r(B)?(u(),x("div",Kt,[e(k)])):(u(),z(i,{key:1,vertical:"",size:24},{default:t(()=>{var J;return[e(M,{style:{display:"flex","justify-content":"space-between"}},{default:t(()=>[e(h,{span:10},{default:t(()=>[e(i,{vertical:"",size:0},{default:t(()=>[e(C,null,{default:t(()=>[n("Kode Manifest : "+l(r(p).code),1)]),_:1}),e(i,{vertical:""},{default:t(()=>[e(_,null,{default:t(()=>{var a;return[n("Kode DO : "+l((a=r(p).do)==null?void 0:a.code),1)]}),_:1}),e(_,null,{default:t(()=>[n("Target Tanggal Pengiriman : "+l(r(G)(r(p).target_delivery_date).format("yyyy-MM-DD")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(h,{span:10},{default:t(()=>[e(i,{vertical:"",size:0},{default:t(()=>[e(C,null,{default:t(()=>{var a,d;return[n(" Tujuan : "+l((d=(a=r(p).do)==null?void 0:a.destination)==null?void 0:d.name),1)]}),_:1}),e(_,null,{default:t(()=>{var a,d;return[n(l(et((d=(a=r(p).do)==null?void 0:a.destination)==null?void 0:d.address)),1)]}),_:1})]),_:1})]),_:1}),e(h,{span:4},{default:t(()=>[e(D,{ghost:"",type:"primary",class:"button-tnt",style:{float:"right"},onClick:O(nt,["prevent"])},{default:t(()=>[n(" Cetak Manifest ")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(at,{cols:"2","item-responsive":"",responsive:"screen","x-gap":16,"y-gap":16},{default:t(()=>[e(N,{span:"1"},{default:t(()=>[c("div",Lt,[e(_,{style:{"font-size":"13px","margin-bottom":"0"}},{default:t(()=>{var a;return[n(" Total Pack : "+l((a=r(p).total)==null?void 0:a.packing),1)]}),_:1})])]),_:1}),e(N,{span:"1"},{default:t(()=>[c("div",Bt,[e(_,{style:{"font-size":"13px","margin-bottom":"0"}},{default:t(()=>{var a;return[n(" Loaded Pack : "+l((a=r(p).total)==null?void 0:a.qty),1)]}),_:1})])]),_:1})]),_:1}),((J=r(p).products)==null?void 0:J.length)>0?(u(),x("div",Rt,[e(H,{"x-scrollable":""},{default:t(()=>[e(F,{bordered:!1,"single-line":!0},{default:t(()=>[e(q,null,{default:t(()=>[e($,{style:{"border-radius":"20px"}},{default:t(()=>[e(b,null,{default:t(()=>[n("No")]),_:1}),e(b,null,{default:t(()=>[n("Kode Produk")]),_:1}),e(b,null,{default:t(()=>[n("Nama Produk")]),_:1}),e(b,null,{default:t(()=>[n("Batch")]),_:1})]),_:1})]),_:1}),e(E,null,{default:t(()=>[(u(!0),x(P,null,T(r(p).products,(a,d)=>(u(),z($,{key:d},{default:t(()=>[e(v,null,{default:t(()=>[n(l(d+1),1)]),_:2},1024),e(v,null,{default:t(()=>[n(l(a.name),1)]),_:2},1024),e(v,null,{default:t(()=>[n(l(a.code),1)]),_:2},1024),e(v,null,{default:t(()=>[n(l(a.batch),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):S("",!0),e(i,{vertical:"",style:{"margin-top":"1rem"}},{default:t(()=>{var a,d;return[(u(!0),x(P,null,T((d=(a=r(p))==null?void 0:a.driver_info)==null?void 0:d.drivers,(m,f)=>(u(),z(Q,{key:f,style:{"border-radius":"8px"},"content-style":{background:"#eee",borderRadius:"8px"}},{default:t(()=>[e(M,{cols:12},{default:t(()=>[e(h,{span:12,style:{"font-size":"13px"}},{default:t(()=>{var o;return[c("div",null,"Nama Driver : "+l(m.name),1),c("div",null,"Plat Nomor Kendaraan : "+l((o=m.vehicle)==null?void 0:o.plate_number),1)]}),_:2},1024),e(h,{span:12,style:{"font-size":"13px"}},{default:t(()=>{var o;return[c("div",null,"Tipe Kendaraan : "+l((o=m.vehicle_category)==null?void 0:o.name),1),St]}),_:2},1024)]),_:2},1024),e(I,null,{default:t(()=>[(u(!0),x(P,null,T(m==null?void 0:m.packings,(o,ot)=>(u(),z(i,{key:ot,vertical:"",style:{padding:"1rem",background:"#dfe2e7","border-radius":"8px","margin-top":".8rem"}},{default:t(()=>[e(i,{justify:"space-between"},{default:t(()=>{var w;return[e(_,null,{default:t(()=>[n("Kode Packing : "+l(o.code),1)]),_:2},1024),((w=m==null?void 0:m.packings)==null?void 0:w.length)>0?(u(),z(D,{key:0,loading:r(X),text:"",type:"primary",onClick:O(R=>o.is_show_detail=!o.is_show_detail,["prevent"])},{default:t(()=>[n(l(o.is_show_detail?"Tutup":"Tampilkan Detail"),1)]),_:2},1032,["loading","onClick"])):S("",!0)]}),_:2},1024),e(I,{show:o.is_show_detail===!0},{default:t(()=>[c("div",jt,[e(H,{"x-scrollable":""},{default:t(()=>[e(F,{bordered:!1,"single-line":!0},{default:t(()=>[e(q,null,{default:t(()=>[e($,{style:{"border-radius":"20px"}},{default:t(()=>[e(b,null,{default:t(()=>[n("No")]),_:1}),e(b,null,{default:t(()=>[n("Kode Serialisasi")]),_:1}),e(b,null,{default:t(()=>[n("Level")]),_:1}),e(b,null,{default:t(()=>[n("Produk")]),_:1}),e(b,null,{default:t(()=>[n("Qty Level")]),_:1})]),_:1})]),_:1}),e(E,null,{default:t(()=>[(u(!0),x(P,null,T(o.serializations,(w,R)=>(u(),z($,{key:R},{default:t(()=>[e(v,null,{default:t(()=>[n(l(R+1),1)]),_:2},1024),e(v,null,{default:t(()=>{var g;return[n(l((g=w.serialization)==null?void 0:g.code),1)]}),_:2},1024),e(v,null,{default:t(()=>{var g;return[n(l((g=w.serialization)==null?void 0:g.name),1)]}),_:2},1024),e(v,null,{default:t(()=>{var g;return[n(l((g=w.serialization)==null?void 0:g.product_name),1)]}),_:2},1024),e(v,null,{default:t(()=>{var g;return[n(l((g=w.serialization)==null?void 0:g.qty),1)]}),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["show"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))]}),_:1}),(u(!0),x(P,null,T(r(V).list,(a,d)=>{var m;return u(),x(P,null,[(m=a.attributes)!=null&&m.receiver?(u(),z(Q,{key:d,style:{"border-radius":"10px"}},{default:t(()=>[e(i,{vertical:""},{default:t(()=>[e(_,{style:{"font-size":"14px","font-weight":"500","margin-bottom":"0px"}},{default:t(()=>[n("Penerima")]),_:1}),e(M,null,{default:t(()=>[e(h,{span:12},{default:t(()=>[c("div",Vt,[e(i,{vertical:"",size:0},{default:t(()=>[e(_,{style:{"font-weight":"500"}},{default:t(()=>[n("Nama Penerima")]),_:1}),e(_,null,{default:t(()=>{var f,o;return[n(l((o=(f=a.attributes)==null?void 0:f.receiver)==null?void 0:o.name),1)]}),_:2},1024)]),_:2},1024)]),c("div",qt,[e(i,{vertical:"",size:0},{default:t(()=>[e(_,{style:{"font-weight":"500"}},{default:t(()=>[n("No.Hp Penerima")]),_:1}),e(_,null,{default:t(()=>{var f,o;return[n(l((o=(f=a.attributes)==null?void 0:f.receiver)==null?void 0:o.phone),1)]}),_:2},1024)]),_:2},1024)]),c("div",Et,[e(i,{vertical:"",size:0},{default:t(()=>[e(_,{style:{"font-weight":"500"}},{default:t(()=>[n("Email")]),_:1}),e(_,null,{default:t(()=>{var f,o;return[n(l((o=(f=a.attributes)==null?void 0:f.receiver)==null?void 0:o.email),1)]}),_:2},1024)]),_:2},1024)]),c("div",Ft,[e(i,{vertical:"",size:0},{default:t(()=>[e(_,{style:{"font-weight":"500"}},{default:t(()=>[n("Jabatan Penerima")]),_:1}),e(_,null,{default:t(()=>{var f,o;return[n(l((o=(f=a.attributes)==null?void 0:f.receiver)==null?void 0:o.department),1)]}),_:2},1024)]),_:2},1024)]),c("div",Ht,[e(i,{vertical:"",size:0},{default:t(()=>[e(_,{style:{"font-weight":"500"}},{default:t(()=>[n("Foto Bukti")]),_:1}),e(A,{width:"100",style:{backgroundColor:"#f1f1f1"},src:""})]),_:1})]),c("div",It,[e(i,{vertical:"",size:0},{default:t(()=>[e(_,{style:{"font-weight":"500"}},{default:t(()=>[n("Tanda Tangan Digital")]),_:1}),e(A,{width:"100",style:{backgroundColor:"#f1f1f1"},src:""})]),_:1})])]),_:2},1024),e(h,{span:12},{default:t(()=>[e(_,{style:{"font-weight":"500","margin-bottom":"0px"}},{default:t(()=>[n("Tanggal")]),_:1}),c("div",Qt,[e(_,null,{default:t(()=>[n(l(r(G)(a.created_at).format("yyyy-MM-DD")),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):S("",!0)],64)}),256))]}),_:1})),c("div",At,[c("div",Jt,[e(lt,{to:{name:"pengiriman-loading-porter"},class:"text-decoration-none"},{default:t(()=>[e(D,{color:"#828282",class:"button-tnt",style:{width:"120px"}},{default:t(()=>[n("Kembali")]),_:1})]),_:1})])])])}}});export{Zt as default};

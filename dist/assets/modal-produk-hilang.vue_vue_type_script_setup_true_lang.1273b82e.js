import{_ as F}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as I,E as H,r as k,G as Q,o as f,h as L,w as a,k as o,q as w,t as l,i as r,S as K,ah as T,a as e,c as R,F as W,g as A,s as J,v as X,b1 as Y,K as Z,aa as ee,ab as te,bn as ne,M as ae}from"./index.21c0d750.js";import{h as oe}from"./moment.62d3fb0a.js";import{a as le}from"./adjustment.098753fc.js";const se={class:"table-tnt",style:{"margin-top":"0"}},ue=e("thead",null,[e("tr",null,[e("th"),e("th",{style:{"text-align":"center"}},"No"),e("th",null,"Kode Produk"),e("th",null,"Nama Produk"),e("th",null,"Room"),e("th",null,"Rack"),e("th",null,"Batch"),e("th",null,"Exp Date"),e("th",null,"Qty"),e("th",null,"Kode DO")])],-1),de={key:0},ce=e("td",{colspan:"10",style:{"text-align":"center"}},"Belum ada data tersedia",-1),ie=[ce],_e={style:{"text-align":"center"}},re=e("td",null,l("?"),-1),pe=e("td",null,l("?"),-1),ke=I({__name:"modal-produk-hilang",props:{show:{type:Boolean,default:!1},product:{}},emits:["update:show","click:close","click:input"],setup(z,{emit:B}){const n=z,E=H(),y=k(!1),x=k(!1),h=k({}),M=k(!1),c=k([]);Q(()=>n.show,s=>{s&&Object.keys(h.value).length===0&&G()});async function G(){var s,u,i,d,g,b,v;if(Object.keys((u=(s=n.product)==null?void 0:s.from)==null?void 0:u.room).length>0)h.value={};else{y.value=!0,x.value=!0;const C={warehouse_code:(g=(d=(i=n.product)==null?void 0:i.from)==null?void 0:d.warehouse)==null?void 0:g.code,product_code:(v=(b=n.product)==null?void 0:b.product)==null?void 0:v.item_code,limit:1e3,status:"missing"};await le.getListMissingProduct(C).then(m=>{y.value=!1,x.value=!1,h.value=m.data}).catch(m=>{y.value=!1,x.value=!1;const P=m.response.data;E.error(P.message)})}}function O(s){c.value=s}function S(s){var u;s?(u=h.value)==null||u.list.map(i=>{var d;(d=c.value)==null||d.push(i)}):c.value=[]}function U(){B("click:input",c.value),B("click:close",!1)}function $(){B("click:close",!1)}return(s,u)=>{const i=J,d=X,g=Y,b=Z,v=F,C=ee,m=te,P=ne,q=ae;return f(),L(q,{"mask-closable":!1,show:s.show,preset:"card",role:"dialog",size:"huge",title:"Warehouse Produk Hilang",bordered:!1,style:{width:"1100px","max-width":"100%","border-radius":"10px"},"header-style":{paddingLeft:"30px",paddingRight:"30px",paddingBottom:"15px"},"content-style":{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"20px"},"onUpdate:show":$},{default:a(()=>[o(m,{"x-scrollable":"",style:{"max-height":"450px"}},{default:a(()=>[o(d,{vertical:"",size:14,style:{"padding-left":"10px","padding-right":"10px"}},{default:a(()=>[o(d,{vertical:"",size:0},{default:a(()=>[o(i,null,{default:a(()=>{var t,_;return[w("Kode Produk : "+l((_=(t=n==null?void 0:n.product)==null?void 0:t.product)==null?void 0:_.item_code),1)]}),_:1}),o(i,null,{default:a(()=>{var t,_;return[w("Nama Produk : "+l((_=(t=n==null?void 0:n.product)==null?void 0:t.product)==null?void 0:_.short_name),1)]}),_:1}),o(i,null,{default:a(()=>{var t;return[w("Batch : "+l((t=n==null?void 0:n.product)==null?void 0:t.batch),1)]}),_:1})]),_:1}),o(d,{justify:"space-between"},{default:a(()=>[o(g,{label:"Pilih Semua",checked:r(M),"onUpdate:checked":[u[0]||(u[0]=t=>K(M)?M.value=t:null),S]},null,8,["checked"]),o(b,{disabled:r(c).length===0,loading:r(x),type:"primary",class:"button-tnt",style:{width:"120px"},onClick:T(U,["prevent"])},{default:a(()=>[w(" Input ")]),_:1},8,["disabled","loading","onClick"])]),_:1}),e("div",se,[r(y)?(f(),L(v,{key:0})):(f(),L(P,{key:1,value:r(c),"onUpdate:value":[u[1]||(u[1]=t=>K(c)?c.value=t:null),O]},{default:a(()=>[o(m,{"x-scrollable":""},{default:a(()=>[o(C,{"single-line":!1},{default:a(()=>{var t,_;return[ue,e("tbody",null,[((_=(t=r(h))==null?void 0:t.list)==null?void 0:_.length)===0?(f(),R("tr",de,ie)):(f(!0),R(W,{key:1},A(r(h).list,(p,N)=>{var D,V,j;return f(),R("tr",{key:N},[e("td",null,[o(g,{value:p,label:""},null,8,["value"])]),e("td",_e,l(N+1),1),e("td",null,l((D=p.product)==null?void 0:D.code),1),e("td",null,l((V=p.product)==null?void 0:V.name),1),re,pe,e("td",null,l(p.batch_number),1),e("td",null,l(r(oe)(p.expired_date).format("yyyy-MM-DD")),1),e("td",null,l(p.qty),1),e("td",null,l((j=p.do)==null?void 0:j.code),1)])}),128))])]}),_:1})]),_:1})]),_:1},8,["value"]))])]),_:1})]),_:1})]),_:1},8,["show"])}}});export{ke as _};

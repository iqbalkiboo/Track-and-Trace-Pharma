import{_ as ue}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as _e}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as re}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as pe,u as de,E as me,r as _,a1 as fe,f as ge,aF as S,p as he,o as i,c as v,a as b,k as e,w as t,q as l,i as a,h as r,N as A,j as N,F as y,g as ke,t as T,ah as $,Q as F,af as ve,am as be,an as ye,K as we,v as Ce,ak as xe,a7 as Pe,a8 as Ae,aP as Ne,aQ as $e,aR as Re,aS as Be,y as Ee,aT as He,aa as Se,ab as Te,ag as Fe}from"./index.21c0d750.js";import{c as w}from"./constant.549d5c21.js";import{a as D}from"./hak-akses.99e628b7.js";import{A as De}from"./Add.4f3b52cf.js";import{E as Ie}from"./EllipsisVertical.56989e7a.js";import{P as Ve}from"./Pencil.0b65f5de.js";import{H as ze}from"./HelpCircleOutline.a54a41ed.js";import{C as Ge}from"./CheckmarkCircleOutline.8fddcae1.js";import"./AlertCircleOutline.19cf574c.js";import"./getCompanyId.7d0eb93b.js";const Me={class:"body-tnt"},Ue={class:"card-tnt"},Le={class:"table-tnt"},Oe={class:"table-footer"},st=pe({__name:"index",setup(je){const I=de(),R=me(),g=_(!1),p=_(!1),h=_({}),u=_({search:"",sort:"desc",sort_field:"created_at",page:1,limit:10}),n=_({show:_(!1),type:"",icon:fe(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),k=_({id:"",name:""}),B=_([]),V=o=>()=>F(A,null,{default:()=>F(o)});ge(()=>{z(),S.isGranted(w.accessPrivileges.accessPrivileges+".list")&&d()});function z(){S.isGranted(w.accessPrivileges.accessPrivileges+".update")&&B.value.push({label:"Edit Data",key:"edit",icon:V(Ve)})}async function d(){g.value=!0,await D.getRole(u.value).then(o=>{let s=(u.value.page-1)*u.value.limit+1;o.data.list.forEach(m=>{const C=m;C.number=s,s++}),h.value=o.data,g.value=!1,n.value.show=!1}).catch(o=>{g.value=!1;const s=o.response.data;R.error(s.message)})}function G(){u.value.page=0;const o=_();clearTimeout(o.value),o.value=setTimeout(()=>{d()},1e3)}function M(o){u.value.limit=o,d()}function U(o,s,m){switch(o){case"edit":I.push({path:`/setting/hak-akses/update/${s}`});break;case"delete":k.value.id=s,k.value.name=m,j();break}}function L(){n.value.show=!1}function O(){n.value.type="success",n.value.icon=Ge,n.value.iconColor="#219653",n.value.title="Berhasil",n.value.subtitle="Anda berhasil menghapus data hak akses",n.value.show=!0}function j(){n.value.type="delete",n.value.icon=ze,n.value.iconColor="#EB5757",n.value.title="Perhatian",n.value.subtitle=`Apakah Anda yakin untuk menghapus ${k.value.name} ?`,n.value.show=!0}function K(){p.value=!0,D.deleteRole(k.value.id).then(()=>{n.value.show=!1,setTimeout(()=>{O(),p.value=!1},300)}).catch(o=>{p.value=!1;const s=o.response.data;R.error(s.message)})}return(o,s)=>{const m=ve,C=be,Q=ye,f=we,q=he("router-link"),E=Ce,J=xe,W=Pe,X=Ae,Y=re,x=Ne,H=$e,Z=Re,P=Be,ee=Ee,te=He,ae=Se,ne=Te,oe=Fe,se=_e,le=ue;return i(),v(y,null,[b("div",Me,[e(m,{style:{"margin-bottom":"4px"}},{default:t(()=>[l("Hak Akses")]),_:1}),e(Q,null,{default:t(()=>[e(C,null,{default:t(()=>[l("Hak Akses")]),_:1})]),_:1}),b("div",Ue,[o.$filters.isGranted(a(w).accessPrivileges.accessPrivileges+".create")?(i(),r(E,{key:0},{default:t(()=>[e(q,{to:{path:"/setting/hak-akses/create/1"},class:"text-decoration-none"},{default:t(()=>[e(f,{color:"#219653",class:"button-tnt"},{default:t(()=>[e(a(A),{component:a(De)},null,8,["component"]),l(" Tambah Hak Akses ")]),_:1})]),_:1})]),_:1})):N("",!0),o.$filters.isGranted(a(w).accessPrivileges.accessPrivileges+".list")?(i(),v(y,{key:1},[e(X,{gutter:"16",style:{"margin-top":"24px"}},{default:t(()=>[e(W,{span:6},{default:t(()=>[e(J,{value:a(u).search,"onUpdate:value":s[0]||(s[0]=c=>a(u).search=c),onKeyup:G,type:"text",placeholder:"Cari hak akses"},null,8,["value"])]),_:1})]),_:1}),b("div",Le,[a(g)?(i(),r(Y,{key:0})):(i(),r(ne,{key:1,"x-scrollable":""},{default:t(()=>[e(ae,{bordered:!1,"single-line":!0},{default:t(()=>[e(Z,null,{default:t(()=>[e(H,null,{default:t(()=>[e(x,{style:{"text-align":"center"}},{default:t(()=>[l("No")]),_:1}),e(x,{style:{width:"80%"}},{default:t(()=>[l("Nama Hak Akses")]),_:1}),e(x,{style:{"text-align":"center"}},{default:t(()=>[l("Aksi")]),_:1})]),_:1})]),_:1}),e(te,null,{default:t(()=>[(i(!0),v(y,null,ke(a(h).list,(c,ce)=>(i(),r(H,{key:ce},{default:t(()=>[e(P,{"data-label":"No",style:{"text-align":"center"}},{default:t(()=>[l(T(c.number),1)]),_:2},1024),e(P,{"data-label":"Nama Hak Akses"},{default:t(()=>[l(T(c.name),1)]),_:2},1024),e(P,{"data-label":"Aksi",style:{"text-align":"center"}},{default:t(()=>[e(ee,{placement:"bottom-end",options:a(B),"show-arrow":!0,onSelect:ie=>U(ie,c.id,c.name)},{default:t(()=>[e(f,{tertiary:""},{icon:t(()=>[e(a(A),null,{default:t(()=>[e(a(Ie))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})),b("div",Oe,[e(oe,{page:a(u).page,"onUpdate:page":[s[1]||(s[1]=c=>a(u).page=c),d],"page-count":a(h).total_page,"page-slot":10,"show-size-picker":a(h).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":M},null,8,["page","page-count","show-size-picker"])])])],64)):(i(),r(se,{key:2}))])]),e(le,{show:a(n).show,"onUpdate:show":s[2]||(s[2]=c=>a(n).show=c),icon:a(n).icon,"icon-color":a(n).iconColor,"hide-icon":a(n).hideIcon,title:a(n).title,subtitle:a(n).subtitle},{default:t(()=>[e(E,{justify:"center"},{default:t(()=>[a(n).type=="success"?(i(),r(f,{key:0,color:"#828282",class:"button-tnt",onClick:$(d,["prevent"])},{default:t(()=>[l(" Tutup ")]),_:1},8,["onClick"])):N("",!0),a(n).type=="delete"?(i(),v(y,{key:1},[e(f,{loading:a(p),color:"#828282",class:"button-tnt",onClick:$(L,["prevent"])},{default:t(()=>[l(" Tidak ")]),_:1},8,["loading","onClick"]),e(f,{loading:a(p),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:$(K,["prevent"])},{default:t(()=>[l(" Iya ")]),_:1},8,["loading","onClick"])],64)):N("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{st as default};

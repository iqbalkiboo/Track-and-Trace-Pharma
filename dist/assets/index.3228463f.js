import{_ as ue}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as _e}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as re}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as de,u as pe,E as me,r as _,a1 as ge,f as fe,aF as $,p as he,o as i,c as b,a as k,k as e,w as t,q as l,i as n,h as r,N as H,j as P,F as y,g as ve,t as F,ah as T,Q as G,af as be,am as ke,an as ye,K as we,v as Ce,ak as xe,a7 as Ne,a8 as $e,aP as He,aQ as Pe,aR as Te,aS as Be,y as Se,aT as Ae,aa as De,ab as Ee,ag as Fe}from"./index.21c0d750.js";import{c as g}from"./constant.549d5c21.js";import{m as I}from"./master-holding.d2183378.js";import{A as Ge}from"./Add.4f3b52cf.js";import{E as Ie}from"./EllipsisVertical.56989e7a.js";import{P as Re}from"./Pencil.0b65f5de.js";import{T as Ve}from"./Trash.4f4f705c.js";import{H as ze}from"./HelpCircleOutline.a54a41ed.js";import{C as Me}from"./CheckmarkCircleOutline.8fddcae1.js";import"./AlertCircleOutline.19cf574c.js";import"./getSuperholdingId.94511ad9.js";const Ue={class:"body-tnt"},Le={class:"card-tnt"},Oe={class:"table-tnt"},je={class:"table-footer"},it=de({__name:"index",setup(Ke){const R=pe(),B=me(),f=_(!1),d=_(!1),h=_({}),c=_({search:"",sort:"desc",dir:"created_at",page:1,limit:10}),a=_({show:_(!1),type:"",icon:ge(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),v=_({id:"",name:""}),w=_([]),S=o=>()=>G(H,null,{default:()=>G(o)});fe(()=>{V(),$.isGranted(g.accessPrivileges.holding+".list")&&p()});function V(){$.isGranted(g.accessPrivileges.holding+".update")&&w.value.push({label:"Edit Data",key:"edit",icon:S(Re)}),$.isGranted(g.accessPrivileges.holding+".delete")&&w.value.push({label:"Hapus Data",key:"delete",icon:S(Ve)})}async function p(){f.value=!0,await I.getHolding(c.value).then(o=>{h.value=o.data,f.value=!1,a.value.show=!1}).catch(o=>{f.value=!1;const s=o.response.data;B.error(s.message)})}function z(){c.value.page=0;const o=_();clearTimeout(o.value),o.value=setTimeout(()=>{p()},1e3)}function M(o){c.value.limit=o,p()}function U(o,s,C){switch(o){case"edit":R.push({path:`/setting/master-holding/update/${s}`});break;case"delete":v.value.id=s,v.value.name=C,j();break}}function L(){a.value.show=!1}function O(){a.value.type="success",a.value.icon=Me,a.value.iconColor="#219653",a.value.title="Berhasil",a.value.subtitle="Anda berhasil menghapus data holding",a.value.show=!0}function j(){a.value.type="delete",a.value.icon=ze,a.value.iconColor="#EB5757",a.value.title="Perhatian",a.value.subtitle=`Apakah Anda yakin untuk menghapus ${v.value.name} ?`,a.value.show=!0}function K(){d.value=!0,I.deleteHolding(v.value.id).then(()=>{a.value.show=!1,setTimeout(()=>{O(),d.value=!1},300)}).catch(o=>{d.value=!1;const s=o.response.data;B.error(s.message)})}return(o,s)=>{const C=be,Q=ke,q=ye,m=we,J=he("router-link"),A=Ce,W=xe,X=Ne,Y=$e,Z=re,x=He,D=Pe,ee=Te,N=Be,te=Se,ne=Ae,ae=De,oe=Ee,se=Fe,le=_e,ie=ue;return i(),b(y,null,[k("div",Ue,[e(C,{style:{"margin-bottom":"4px"}},{default:t(()=>[l("holding")]),_:1}),e(q,null,{default:t(()=>[e(Q,null,{default:t(()=>[l("holding")]),_:1})]),_:1}),k("div",Le,[o.$filters.isGranted(n(g).accessPrivileges.holding+".create")?(i(),r(A,{key:0},{default:t(()=>[e(J,{to:{path:"/setting/master-holding/create/1"},class:"text-decoration-none"},{default:t(()=>[e(m,{color:"#219653",class:"button-tnt"},{default:t(()=>[e(n(H),{component:n(Ge)},null,8,["component"]),l(" Tambah Holding ")]),_:1})]),_:1})]),_:1})):P("",!0),o.$filters.isGranted(n(g).accessPrivileges.holding+".list")?(i(),b(y,{key:1},[e(Y,{gutter:"16",style:{"margin-top":"24px"}},{default:t(()=>[e(X,{span:6},{default:t(()=>[e(W,{value:n(c).search,"onUpdate:value":s[0]||(s[0]=u=>n(c).search=u),onKeyup:z,type:"text",placeholder:"Cari holding"},null,8,["value"])]),_:1})]),_:1}),k("div",Oe,[n(f)?(i(),r(Z,{key:0})):(i(),r(oe,{key:1,"x-scrollable":""},{default:t(()=>[e(ae,{bordered:!1,"single-line":!0},{default:t(()=>[e(ee,null,{default:t(()=>[e(D,null,{default:t(()=>[e(x,{style:{"text-align":"center"}},{default:t(()=>[l("No")]),_:1}),e(x,null,{default:t(()=>[l("Nama Holding")]),_:1}),e(x,{style:{"text-align":"center"}},{default:t(()=>[l("Aksi")]),_:1})]),_:1})]),_:1}),e(ne,null,{default:t(()=>[(i(!0),b(y,null,ve(n(h).list,(u,E)=>(i(),r(D,{key:E},{default:t(()=>[e(N,{"data-label":"No",style:{"text-align":"center"}},{default:t(()=>[l(F(n(c).limit*(n(c).page-1)+(E+1)),1)]),_:2},1024),e(N,{"data-label":"Nama Holding",style:{width:"80%"}},{default:t(()=>[l(F(u.name),1)]),_:2},1024),e(N,{"data-label":"Aksi",style:{"text-align":"center"}},{default:t(()=>[e(te,{placement:"bottom-end",options:n(w),"show-arrow":!0,onSelect:ce=>U(ce,u.id,u.name)},{default:t(()=>[e(m,{tertiary:""},{icon:t(()=>[e(n(H),null,{default:t(()=>[e(n(Ie))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})),k("div",je,[e(se,{page:n(c).page,"onUpdate:page":[s[1]||(s[1]=u=>n(c).page=u),p],"page-count":n(h).total_page,"page-slot":10,"show-size-picker":n(h).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":M},null,8,["page","page-count","show-size-picker"])])])],64)):(i(),r(le,{key:2}))])]),e(ie,{show:n(a).show,"onUpdate:show":s[2]||(s[2]=u=>n(a).show=u),icon:n(a).icon,"icon-color":n(a).iconColor,"hide-icon":n(a).hideIcon,title:n(a).title,subtitle:n(a).subtitle},{default:t(()=>[e(A,{justify:"center"},{default:t(()=>[n(a).type=="success"?(i(),r(m,{key:0,color:"#828282",class:"button-tnt",onClick:T(p,["prevent"])},{default:t(()=>[l(" Tutup ")]),_:1},8,["onClick"])):P("",!0),n(a).type=="delete"?(i(),b(y,{key:1},[e(m,{loading:n(d),color:"#828282",class:"button-tnt",onClick:T(L,["prevent"])},{default:t(()=>[l(" Tidak ")]),_:1},8,["loading","onClick"]),e(m,{loading:n(d),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:T(K,["prevent"])},{default:t(()=>[l(" Iya ")]),_:1},8,["loading","onClick"])],64)):P("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{it as default};

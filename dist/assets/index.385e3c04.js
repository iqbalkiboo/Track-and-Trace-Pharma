import{_ as ie}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as ce}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as ue,b as re,E as de,r as i,f as me,e as pe,a1 as fe,p as ge,o as m,c as x,a as g,k as o,w as n,i as a,h as _,q as r,j as y,t as V,N as _e,F,g as ve,ah as C,S as he,ak as ke,K as be,v as ye,am as Ce,an as we,L as xe,M as Ke}from"./index.21c0d750.js";import{c as K}from"./constant.549d5c21.js";import{m as U}from"./master-kemasan-kolektif.2fd7ef6d.js";import{m as j}from"./master-kemasan-kategori-kolektif.b8aba5ae.js";import{_ as H}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{A}from"./AlertCircleOutline.19cf574c.js";import{A as Pe}from"./Add.4f3b52cf.js";import{C as O}from"./CheckmarkCircleOutline.8fddcae1.js";import{H as $e}from"./HelpCircleOutline.a54a41ed.js";import"./getHoldingId.48f570fc.js";import"./getCompanyId.7d0eb93b.js";const Be={class:"body-tnt"},Fe={class:"card-tnt"},Ee={key:1,style:{"margin-top":"24px"}},De={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Ue={class:"bottom-action-button"},Ae={class:"action-item"},Ne={style:{display:"flex","align-items":"center",gap:"5px"}},Qe=ue({__name:"index",setup(Te){const w=re(),E=de(),P=i(),v=i(!1),h=i(!1),d=i(!1),$=i({}),L=i();L.value={name:{required:!0,message:"Nama kategori kemasan tidak boleh kosong",trigger:"blur"}};const N=i({}),p=i({}),D=i({selling_packaging_id:"",search:"",dir:"desc",sort:"created_at",page:1,limit:10}),T=i({id:"",name:""});me(()=>{P.value=pe.getAuth(),M()});function q(){d.value=!0;let t="";P.value.xxtype==="5up3r4dm1n"?t=P.value["xx-usertype-access"].holding_id:t=P.value.users.user_type.id;const l={holding_id:t,name:$.value.name,description:$.value.description,erp_code:$.value.erp_code},f=w.params.id;U.updatePackagingCollectif(f,l).then(()=>{d.value=!1,z(),k(),setTimeout(()=>{J(),v.value=!1},300)}).catch(s=>{const b=s.response.data;d.value=!1,k(),setTimeout(()=>{Y(b)},300)})}function z(){$.value={name:""}}function Y(t){e.value.type="failed",e.value.hideIcon=!1,e.value.iconColor="#EB5757",e.value.icon=A,e.value.title="Gagal",Object.keys(t.validation).length>0?e.value.subtitle=t.validation:e.value.subtitle=t.message,e.value.show=!0}function J(){e.value.type="success",e.value.hideIcon=!1,e.value.iconColor="#219653",e.value.icon=O,e.value.title="Berhasil Tambah Data",e.value.subtitle="Data kategori Kemasan berhasil diubah",e.value.show=!0}async function M(){h.value=!0,await U.getDetailPackagingCollectif(w.params.id).then(t=>{p.value=t.data,G(p.value.id),e.value.show=!1}).catch(t=>{h.value=!1;const l=t.response.data;E.error(l.message)})}async function G(t){h.value=!0,D.value.selling_packaging_id=t,await j.getPackagingCategoryCollectif(D.value).then(l=>{N.value=l.data.data,h.value=!1,e.value.show=!1}).catch(l=>{h.value=!1;const f=l.response.data;E.error(f.message)})}async function I(){d.value=!0,await U.updatePackagingCollectif(D.value.selling_packaging_id,{name:p.value.name}).then(()=>{d.value=!1,v.value=!1}).catch(t=>{d.value=!1,v.value=!1;const l=t.response.data;E.error(l.message)})}const c=i({type:"",show:i(!1),icon:fe(),iconColor:"#0b8f9d",hideIcon:!1,title:"Hapus Kategori Kemasan",subtitle:"Apakah Anda yakin untuk menghapus Kategori Kemasan?"});function Q(t){c.value.icon=$e,c.value.show=!0,c.value.type="delete",T.value.id=t}function k(){c.value.show=!1}function W(){e.value.icon=O,e.value.iconColor="#219653",e.value.title="Berhasil",e.value.subtitle="Anda berhasil menghapus data tipe kemasan",e.value.show=!0}function X(t){e.value.icon=A,e.value.iconColor="red",e.value.title="Gagal",Object.keys(t.validation).length>0?e.value.subtitle=t.validation:e.value.subtitle=t.message,e.value.show=!0}const e=i({type:"",show:i(!1),icon:A,iconColor:"#EB5757",hideIcon:!1,title:"Perhatian",subtitle:"Anda tidak dapat menghapus data, karena Kategori Kemasan sudah digunakan"});function Z(){e.value.show=!1,M()}function ee(){d.value=!0,j.deletePackagingCategoryCollectif(T.value.id).then(()=>{d.value=!1,G(w.params.id),k(),setTimeout(()=>{W()},300)}).catch(t=>{const l=t.response.data;d.value=!1,k(),setTimeout(()=>{X(l)},300)})}function ae(t){const l=t.name,f=t.dimention.volume,s=t.dimention.weight;return`${l} - ${f}cm\xB3 - ${s}gram`}return(t,l)=>{const f=ke,s=be,b=ye,B=ge("router-link"),R=Ce,te=we,ne=ce,S=xe,oe=ie,le=Ke;return m(),x(F,null,[g("div",Be,[o(b,{align:"center",size:24,style:{"margin-bottom":"4px"}},{default:n(()=>[o(f,{placeholder:"name",value:a(p).name,"onUpdate:value":l[0]||(l[0]=u=>a(p).name=u),style:{width:"400px"}},null,8,["value"]),t.$filters.isGranted(a(K).accessPrivileges.collectivePackaging+".update")?(m(),_(s,{key:0,type:"primary",loading:a(d),onClick:I},{default:n(()=>[r(" Ubah ")]),_:1},8,["loading"])):y("",!0)]),_:1}),o(te,null,{default:n(()=>[o(R,null,{default:n(()=>[o(B,{to:"/setting/kategori-kemasan",class:"text-decoration-none"},{default:n(()=>[r(" Kategori Kemasan ")]),_:1})]),_:1}),o(R,null,{default:n(()=>[r(V(a(p).name),1)]),_:1})]),_:1}),g("div",Fe,[t.$filters.isGranted(a(K).accessPrivileges.collectivePackaging+".create")?(m(),_(b,{key:0},{default:n(()=>[o(B,{to:`/setting/kategori-kemasan/${a(w).params.id}/create/1`,class:"text-decoration-none"},{default:n(()=>[o(s,{color:"#219653",class:"button-tnt"},{icon:n(()=>[o(a(_e),null,{default:n(()=>[o(a(Pe))]),_:1})]),default:n(()=>[r(" Tambah Tipe Kemasan Kolektif ")]),_:1})]),_:1},8,["to"])]),_:1})):y("",!0),t.$filters.isGranted(a(K).accessPrivileges.collectivePackaging+".list")?(m(),x("div",Ee,[a(h)?(m(),_(ne,{key:0})):(m(!0),x(F,{key:1},ve(a(N).list,(u,se)=>(m(),_(S,{style:{"margin-bottom":"10px","border-radius":"10px",background:"#f1f3f3"},"content-style":"padding: 15px;",key:se},{default:n(()=>[g("div",De,[g("div",null,V(ae(u)),1),g("div",null,[t.$filters.isGranted(a(K).accessPrivileges.collectivePackaging+".update")?(m(),_(B,{key:0,to:`/setting/kategori-kemasan/${a(w).params.id}/update/${u.id}`,style:{"text-decoration":"none"}},{default:n(()=>[o(s,{color:"#F2C94C","text-color":"#1E1E1E",class:"button-tnt",style:{"margin-right":"10px"}},{default:n(()=>[r(" Edit ")]),_:1})]),_:2},1032,["to"])):y("",!0),t.$filters.isGranted(a(K).accessPrivileges.collectivePackaging+".delete")?(m(),_(s,{key:1,color:"#EB5757",class:"button-tnt",onClick:C(Me=>Q(u.id),["prevent"])},{default:n(()=>[r(" Hapus ")]),_:2},1032,["onClick"])):y("",!0)])])]),_:2},1024))),128))])):(m(),_(oe,{key:2}))]),g("div",Ue,[g("div",Ae,[o(B,{to:{name:"setting-kategori-kemasan"},class:"text-decoration-none"},{default:n(()=>[o(s,{color:"#828282",class:"button-tnt"},{default:n(()=>[r("Kembali")]),_:1})]),_:1})])])]),o(H,{show:a(c).show,"onUpdate:show":l[1]||(l[1]=u=>a(c).show=u),icon:a(c).icon,"icon-color":a(c).iconColor,"hide-icon":a(c).hideIcon,title:a(c).title,subtitle:a(c).subtitle},{default:n(()=>[o(b,{justify:"center"},{default:n(()=>[a(c).type=="delete"?(m(),x(F,{key:0},[o(s,{loading:a(d),color:"#828282",class:"button-tnt",onClick:C(k,["prevent"])},{default:n(()=>[r(" Batalkan ")]),_:1},8,["loading","onClick"]),o(s,{loading:a(d),color:"#EB5757",class:"button-tnt",onClick:C(ee,["prevent"])},{default:n(()=>[r(" Saya Yakin ")]),_:1},8,["loading","onClick"])],64)):y("",!0),a(c).type=="confirm"?(m(),x(F,{key:1},[o(s,{color:"#828282",class:"button-tnt",onClick:C(k,["prevent"])},{default:n(()=>[r(" Batalkan ")]),_:1},8,["onClick"]),o(s,{color:"#219653",class:"button-tnt",onClick:C(q,["prevent"])},{default:n(()=>[r(" Yakin ")]),_:1},8,["onClick"])],64)):y("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"]),o(H,{show:a(e).show,"onUpdate:show":l[2]||(l[2]=u=>a(e).show=u),icon:a(e).icon,"icon-color":a(e).iconColor,"hide-icon":a(e).hideIcon,title:a(e).title,subtitle:a(e).subtitle},{default:n(()=>[o(b,{justify:"center"},{default:n(()=>[o(s,{color:"#828282",class:"button-tnt",onClick:C(Z,["prevent"])},{default:n(()=>[r(" Tutup ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"]),o(le,{show:a(v),"onUpdate:show":l[4]||(l[4]=u=>he(v)?v.value=u:null)},{default:n(()=>[o(S,{style:{width:"400px","max-width":"100%","border-radius":"8px"},bordered:!1,size:"huge",role:"dialog",title:"Update Kemasan Kolektif","aria-modal":"true"},{default:n(()=>[g("div",Ne,[o(f,{placeholder:"name",value:a(p).name,"onUpdate:value":l[3]||(l[3]=u=>a(p).name=u)},null,8,["value"]),o(s,{type:"primary",onClick:I},{default:n(()=>[r(" Ubah ")]),_:1})])]),_:1})]),_:1},8,["show"])],64)}}});export{Qe as default};

import{_ as Q}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{h as V}from"./moment.62d3fb0a.js";import{e as P}from"./exportFromJSON.6e5672c8.js";import{a2 as g,a3 as W,d as F,E as K,r as C,G as T,o as m,h as w,w as a,k as o,q as h,t as i,i as b,c as v,F as E,j,a as e,g as G,s as I,v as J,a7 as U,a8 as A,K as H,aa as X,ab as Y,M as Z}from"./index.21c0d750.js";import{g as k}from"./getCompanyId.7d0eb93b.js";g.interceptors.request.use(W.auth);const tt={async getLacakDOBatch(d,s){return s.company_id=k,(await g.get(`/delivery_order/v1/list-batch/${d}`,{params:s})).data},async getLacakDOSerial(d,s){return s.company_id=k,(await g.get(`/delivery_order/v1/list-serial/${d}`,{params:s})).data},async getListPlantByBatch(d,s){return s.company_id=k,(await g.get(`penerimaan/v1/list-plant-by-batch/${d}`,{params:s})).data},async getDetailPlantByBatch(d,s,t){return t.company_id=k,(await g.get(`penerimaan/v1/list-detail-plant-by-batch/${d}/${s}`,{params:t})).data},async getListPlantBySerial(d,s){return s.company_id=k,(await g.get(`penerimaan/v1/list-plant-by-batch/${d}`,{params:s})).data}},at={style:{"margin-top":"15px"}},et=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Wh Building"),e("th",null,"Room"),e("th",null,"Rack/Pallete"),e("th",null,"Bin"),e("th",{style:{"text-align":"center"}},"Qty Stok")])],-1),nt={"data-label":"No"},ot={"data-label":"Wh Building"},st={"data-label":"Room"},lt={"data-label":"Rack/Pallete"},it={"data-label":"Bin"},dt={"data-label":"Qty Stok",style:{"text-align":"center"}},rt={key:1},ct=e("td",{colspan:"6",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),_t=[ct],gt=F({__name:"modal-detail-storage",props:{show:{type:Boolean,default:!1},data:{},dataDistribution:{},loading:{type:Boolean}},emits:["click:close"],setup(d,{emit:s}){const t=d,D=K(),B=C(!1),f=C({});T(()=>t.show,l=>{l&&L()});async function L(){B.value=!0;const l={limit:1e4};await tt.getDetailPlantByBatch(t.data.batch,t.data.warehouse_id,l).then(_=>{B.value=!1,f.value=_.data}).catch(_=>{B.value=!1;const c=_.response.data;D.error(c.message)})}function R(){const l=[];f.value.forEach((p,x)=>{l.push({No:x+1,"Wh Building":p.building_name,Room:p.room_name,"Rack/Pallete":p.rack_pallete,Bin:p.bin,"Qty Stok":p.qty,Batch:t.data.batch})});const _=l,c="Lacak_By_Batch_Detail_Penyimpanan",y=P.types.csv;_&&P({data:_,fileName:c,exportType:y})}return(l,_)=>{var $,N;const c=I,y=J,p=U,x=A,S=Q,z=H,M=X,q=Y,O=Z;return m(),w(O,{"mask-closable":!1,show:t.show,preset:"card",role:"dialog",size:"huge",bordered:!1,title:(N=($=t==null?void 0:t.data)==null?void 0:$.do)==null?void 0:N.code,style:{width:"800px","max-width":"100%","border-radius":"10px"},"header-style":{paddingLeft:"30px",paddingRight:"30px",paddingBottom:"15px"},"content-style":{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"20px"},"onUpdate:show":_[0]||(_[0]=n=>l.$emit("click:close",n))},{default:a(()=>[o(y,{vertical:"",size:0,style:{"padding-left":"10px","padding-right":"10px"}},{default:a(()=>[o(c,{strong:"",style:{"font-size":"16px"}},{default:a(()=>[h("Batch : "+i(t.data.batch),1)]),_:1}),o(x,{gutter:16},{default:a(()=>[o(p,{span:12},{default:a(()=>[o(y,{vertical:"",size:0},{default:a(()=>[o(c,null,{default:a(()=>{var n,r,u;return[h("Nama Produk : "+i((u=(r=(n=t.dataDistribution)==null?void 0:n.do)==null?void 0:r.products[0])==null?void 0:u.name),1)]}),_:1}),o(c,null,{default:a(()=>{var n,r,u;return[h("Kode Produk : "+i((u=(r=(n=t.dataDistribution)==null?void 0:n.do)==null?void 0:r.products[0])==null?void 0:u.code),1)]}),_:1}),o(c,null,{default:a(()=>{var n,r,u;return[h("Exp Date : "+i(b(V)((u=(r=(n=t.dataDistribution)==null?void 0:n.do)==null?void 0:r.products[0])==null?void 0:u.expired_date).format("yyyy-MM-DD")),1)]}),_:1})]),_:1})]),_:1}),o(p,{span:12},{default:a(()=>[o(y,{vertical:"",size:0},{default:a(()=>[o(c,null,{default:a(()=>[h("Wh Plant/Cabang : "+i(t.data.warehouse_name),1)]),_:1}),o(c,null,{default:a(()=>[h("Qty : "+i(l.$filters.toNumber(t.data.qty)),1)]),_:1})]),_:1})]),_:1})]),_:1}),b(B)?(m(),w(S,{key:0})):(m(),v(E,{key:1},[b(f).length>0?(m(),w(y,{key:0,vertical:"",size:0,align:"end"},{default:a(()=>[o(z,{type:"primary",class:"button-tnt",onClick:R},{default:a(()=>[h(" Export Csv ")]),_:1})]),_:1})):j("",!0),e("div",at,[o(q,{"x-scrollable":""},{default:a(()=>[o(M,{"single-line":!1},{default:a(()=>[et,e("tbody",null,[b(f).length>0?(m(!0),v(E,{key:0},G(b(f),(n,r)=>(m(),v("tr",{key:r},[e("td",nt,i(r+1),1),e("td",ot,i(l.$filters.isEmpty(n.building_name)),1),e("td",st,i(l.$filters.isEmpty(n.room_name)),1),e("td",lt,i(l.$filters.isEmpty(n.rack_pallete)),1),e("td",it,i(l.$filters.isEmpty(n.bin)),1),e("td",dt,i(l.$filters.toNumber(n.qty)),1)]))),128)):(m(),v("tr",rt,_t))])]),_:1})]),_:1})])],64))]),_:1})]),_:1},8,["show","title"])}}});export{gt as _,tt as l};

import{_ as xl}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as Dl}from"./t-reception-modal.vue_vue_type_script_setup_true_lang.53b910fc.js";import{d as ce,b as Te,E as ke,e as Qe,r as f,G as $e,f as ye,aI as Se,o as v,c as E,k as l,w as t,h as R,q as m,t as w,j as S,i as e,a as c,F as Y,g as Le,ah as ae,S as te,s as ge,v as re,aa as Me,ab as Re,ak as Ue,K as ve,I as Ge,aM as He,bq as Je,J as Ye,M as we,ar as Ze,ad as Ne,ae as Ee,al as zl,as as Bl,ac as Ll,a1 as $l,l as Ve,aY as ze,aZ as Be,b1 as Sl,H as Ul,N as We,y as Pl,a9 as Vl,_ as Kl,ag as Tl,bn as Ml,p as Rl,af as Nl}from"./index.21c0d750.js";import{s as Xe}from"./storage.731d7fd8.js";import{c as ee}from"./pengecekan.5688c890.js";import{_ as El}from"./t-list-void-modal.vue_vue_type_script_setup_true_lang.35b6889d.js";import{_ as el}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{A as jl}from"./Add.4f3b52cf.js";import{E as Ke}from"./EllipsisVertical.56989e7a.js";import{C as Il}from"./CheckmarkCircleOutline.8fddcae1.js";import{A as Oe}from"./ArrowBackOutline.8e9fb91f.js";import"./master-warehouse.353b4b3b.js";import"./getCompanyId.7d0eb93b.js";import"./getHoldingId.48f570fc.js";const Al={class:"table-tnt",style:{"margin-top":"0px"}},Fl=c("th",null,"No",-1),ql={key:0,style:{"margin-bottom":"24px"}},Ol=["src"],Ql=ce({__name:"t-tahap-moveto-modal",props:{show:{type:Boolean,default:!1},value:{default:()=>({})},level:{default:1},selectedData:{default:()=>[]},title:{}},emits:["update:show","update:value","click:close","click:confirm"],setup(le,{emit:p}){const i=le,j=Te(),k=ke(),U=Qe.getAuth(),n=f(!1),L=f(),r=f({}),s=f([]),d=f(""),z=f(!1),g=f({}),$=f();$.value={destination:{required:!0,message:"Lokasi tujuan tidak boleh kosong",trigger:["input","blur"]},reason:{required:!0,message:"Alasan tidak boleh kosong",trigger:["input","blur"]},imageList:{type:"array",required:!0,message:"Bukti tidak boleh kosong",trigger:["input","blur"]}},$e(r,x=>p("update:value",x),{deep:!0}),ye(()=>{r.value=i.value}),Se(()=>{r.value=i.value});async function G(){n.value=!0;const x=r.value.destination,F=j.params.id,B=i.level+1;await ee.getDetailByCode(x,F,B).then(b=>{g.value=b.data,n.value=!1}).catch(b=>{n.value=!1;const h=b.response.data;k.error(h.message)})}function H(x){const{url:F}=x;d.value=F,z.value=!0}function P(x){s.value=s.value.filter(function(F){return F.id!==x.file.id})}function N(x){var B;return["image/png","image/jpeg"].indexOf(String((B=x.file.file)==null?void 0:B.type))===-1?(k.error("Format gambar harus png atau jpg, tolong upload ulang"),!1):!0}function y({file:x,onFinish:F}){n.value=!0;const B=new FormData;B.append("file",x.file),B.append("source","upload"),B.append("title",x.name),B.append("caption",x.name),B.append("alt",x.name),Xe.uploadStorage(B).then(b=>{b.data.status===200&&(s.value.push({id:b.data.data.id,name:b.data.data.title,status:"finished",url:b.data.data.public_url}),n.value=!1,F())}).catch(b=>{n.value=!1;const h=b.response.data;k.error(h.message)})}async function _(){var x;r.value.imageList=s.value,await((x=L.value)==null?void 0:x.validate().then(()=>{Object.keys(g.value).length>0?(r.value.destination_id=g.value.id,p("click:confirm",!0),p("update:value",r.value)):k.error("Scan lokasi tujuan terlebih dulu")}).catch(()=>{k.error("Form tidak valid, tolong periksa kembali")}))}function q(){p("click:close",!1),r.value={},s.value=[]}return(x,F)=>{const B=ge,b=re,h=Me,D=Re,T=Ue,C=ve,V=Ge,J=He,W=Je,se=Ye,ue=we;return v(),E(Y,null,[l(ue,{"mask-closable":!1,show:x.show,preset:"card",role:"dialog",size:"huge",title:"Move",bordered:!1,style:{width:"800px","max-width":"100%","border-radius":"10px"},"header-style":{paddingLeft:"30px",paddingRight:"30px"},"content-style":{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"20px"},"onUpdate:show":q},{default:t(()=>[l(D,{"x-scrollable":"",style:{height:"500px"}},{default:t(()=>[l(b,{vertical:"",size:14,style:{"padding-left":"10px","padding-right":"10px"}},{default:t(()=>[l(b,{vertical:"",size:0},{default:t(()=>[S("",!0),l(B,null,{default:t(()=>[m("Nama QA : "),l(B,null,{default:t(()=>[m(w(e(U).xxtype=="ju5tU53r"?e(U).users.name:e(U).user.name),1)]),_:1})]),_:1})]),_:1}),c("div",Al,[l(D,{"x-scrollable":""},{default:t(()=>[l(h,{"single-line":!1},{default:t(()=>[c("thead",null,[c("tr",null,[Fl,c("th",null,"Kode Level "+w(i.level),1)])]),c("tbody",null,[(v(!0),E(Y,null,Le(i.selectedData,(X,pe)=>(v(),E("tr",{key:pe},[c("td",null,w(pe+1),1),c("td",null,w(X.code),1)]))),128))])]),_:1})]),_:1})]),l(se,{ref_key:"formRef",ref:L,class:"form-tnt","show-require-mark":!1,"label-width":80,model:e(r),rules:e($)},{default:t(()=>[l(V,{label:"Lokasi tujuan",path:"destination"},{default:t(()=>[l(T,{clearable:"",value:e(r).destination,"onUpdate:value":F[0]||(F[0]=X=>e(r).destination=X),placeholder:"Masukkan lokasi tujuan"},null,8,["value"]),l(C,{disabled:!e(r).destination,loading:e(n),class:"button-tnt",type:"primary",style:{"margin-left":"14px",padding:"1rem 2rem"},onClick:ae(G,["prevent"])},{default:t(()=>[m("Scan")]),_:1},8,["disabled","loading","onClick"])]),_:1}),Object.keys(e(g)).length>0?(v(),E("div",ql,[l(B,null,{default:t(()=>[m(w(e(g).code+" - Sisa "+(e(g).serialize.maximum-e(g).serialize.current)),1)]),_:1})])):S("",!0),l(V,{label:"Alasan",path:"reason"},{default:t(()=>[l(T,{value:e(r).reason,"onUpdate:value":F[1]||(F[1]=X=>e(r).reason=X),placeholder:"Masukkan Alasan"},null,8,["value"])]),_:1}),l(V,{label:"Upload Bukti",path:"imageList"},{default:t(()=>[e(n)?(v(),R(b,{key:1,size:8},{default:t(()=>[l(W,{height:"90px",width:"96px"}),l(W,{height:"90px",width:"96px"})]),_:1})):(v(),R(J,{key:0,action:"","default-file-list":e(s),"list-type":"image-card",onPreview:H,onRemove:P,onBeforeUpload:N,"custom-request":y},null,8,["default-file-list"]))]),_:1})]),_:1},8,["model","rules"]),l(B,{style:{"font-size":"10px"}},{default:t(()=>[m("file dengan format JPG, JPEG, PNG ukuran maksimal file tidak boleh lebih dari 2MB")]),_:1})]),_:1})]),_:1}),l(b,{justify:"center",size:"large",style:{"padding-top":"20px"}},{default:t(()=>[l(C,{loading:e(n),color:"#828282",class:"button-tnt",style:{padding:"1rem 2rem"},onClick:q},{default:t(()=>[m("Batalkan")]),_:1},8,["loading"]),l(C,{loading:e(n),class:"button-tnt",type:"primary",style:{padding:"1rem 2rem"},onClick:ae(_,["prevent"])},{default:t(()=>[m("Konfirmasi")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["show"]),l(ue,{show:e(z),"onUpdate:show":F[2]||(F[2]=X=>te(z)?z.value=X:null),preset:"card",style:{width:"600px"},title:""},{default:t(()=>[c("img",{src:e(d),style:{width:"100%"}},null,8,Ol)]),_:1},8,["show"])],64)}}}),Gl={class:"table-tnt",style:{"margin-top":"0px"}},Hl=c("th",null,"No",-1),Jl=["src"],Yl=ce({__name:"t-tahap-void-modal",props:{show:{type:Boolean,default:!1},value:{default:()=>({})},level:{default:1},selectedData:{default:()=>[]},title:{}},emits:["update:show","update:value","click:close","click:confirm"],setup(le,{emit:p}){const i=le,j=ke(),k=Qe.getAuth(),U=f(!1),n=f(),L=f({}),r=f([]),s=f(""),d=f(!1),z=f();z.value={reason:{required:!0,message:"Alasan tidak boleh kosong",trigger:["input","blur"]},imageList:{type:"array",required:!0,message:"Bukti tidak boleh kosong",trigger:["input","blur"]}},$e(L,y=>p("update:value",y),{deep:!0}),ye(()=>{L.value=i.value}),Se(()=>{L.value=i.value});function g(y){const{url:_}=y;s.value=_,d.value=!0}function $(y){r.value=r.value.filter(function(_){return _.id!==y.file.id})}function G(y){var q;return["image/png","image/jpeg"].indexOf(String((q=y.file.file)==null?void 0:q.type))===-1?(j.error("Format gambar harus png atau jpg, tolong upload ulang"),!1):!0}function H({file:y,onFinish:_}){U.value=!0;const q=new FormData;q.append("file",y.file),q.append("source","upload"),q.append("title",y.name),q.append("caption",y.name),q.append("alt",y.name),Xe.uploadStorage(q).then(x=>{x.data.status===200&&(r.value.push({id:x.data.data.id,name:x.data.data.title,status:"finished",url:x.data.data.public_url}),U.value=!1,_())}).catch(x=>{U.value=!1;const F=x.response.data;j.error(F.message)})}async function P(){var y;L.value.imageList=r.value,await((y=n.value)==null?void 0:y.validate().then(()=>{p("click:confirm",!0),p("update:value",L.value)}).catch(()=>{j.error("Form tidak valid, tolong periksa kembali")}))}function N(){p("click:close",!1),L.value={},r.value=[]}return(y,_)=>{const q=ge,x=re,F=Me,B=Re,b=Ue,h=Ge,D=He,T=Je,C=Ye,V=ve,J=we;return v(),E(Y,null,[l(J,{"mask-closable":!1,show:y.show,preset:"card",role:"dialog",size:"huge",title:"Void",bordered:!1,style:{width:"800px","max-width":"100%","border-radius":"10px"},"header-style":{paddingLeft:"30px",paddingRight:"30px"},"content-style":{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"20px"},"onUpdate:show":N},{default:t(()=>[l(B,{"x-scrollable":"",style:{height:"500px"}},{default:t(()=>[l(x,{vertical:"",size:14,style:{"padding-left":"10px","padding-right":"10px"}},{default:t(()=>[l(x,{vertical:"",size:0},{default:t(()=>[S("",!0),l(q,null,{default:t(()=>[m("Nama QA : "),l(q,null,{default:t(()=>[m(w(e(k).xxtype=="ju5tU53r"?e(k).users.name:e(k).user.name),1)]),_:1})]),_:1})]),_:1}),c("div",Gl,[l(B,{"x-scrollable":""},{default:t(()=>[l(F,{"single-line":!1},{default:t(()=>[c("thead",null,[c("tr",null,[Hl,c("th",null,"Kode Level "+w(i.level),1)])]),c("tbody",null,[(v(!0),E(Y,null,Le(i.selectedData,(W,se)=>(v(),E("tr",{key:se},[c("td",null,w(se+1),1),c("td",null,w(W.code),1)]))),128))])]),_:1})]),_:1})]),l(C,{ref_key:"formRef",ref:n,class:"form-tnt","show-require-mark":!1,"label-width":80,model:e(L),rules:e(z)},{default:t(()=>[l(h,{label:"Alasan",path:"reason"},{default:t(()=>[l(b,{value:e(L).reason,"onUpdate:value":_[0]||(_[0]=W=>e(L).reason=W),placeholder:"Masukkan Alasan"},null,8,["value"])]),_:1}),l(h,{label:"Upload Bukti",path:"imageList"},{default:t(()=>[e(U)?(v(),R(x,{key:1,size:8},{default:t(()=>[l(T,{height:"90px",width:"96px"}),l(T,{height:"90px",width:"96px"})]),_:1})):(v(),R(D,{key:0,action:"","default-file-list":e(r),"list-type":"image-card",onPreview:g,onRemove:$,onBeforeUpload:G,"custom-request":H},null,8,["default-file-list"]))]),_:1}),l(x,{style:{"margin-top":"-10px","margin-left":"3px"}},{default:t(()=>[l(q,{style:{"font-size":"11px"}},{default:t(()=>[m("Format gambar harus png atau jpg. Max ukuran 2Mb")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1}),l(x,{justify:"center",size:"large",style:{"padding-top":"20px"}},{default:t(()=>[l(V,{loading:e(U),color:"#828282",class:"button-tnt",style:{padding:"1rem 2rem"},onClick:N},{default:t(()=>[m("Batalkan")]),_:1},8,["loading"]),l(V,{loading:e(U),class:"button-tnt",type:"primary",style:{padding:"1rem 2rem"},onClick:ae(P,["prevent"])},{default:t(()=>[m("Konfirmasi")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["show"]),l(J,{show:e(d),"onUpdate:show":_[1]||(_[1]=W=>te(d)?d.value=W:null),preset:"card",style:{width:"600px"},title:""},{default:t(()=>[c("img",{src:e(s),style:{width:"100%"}},null,8,Jl)]),_:1},8,["show"])],64)}}}),Zl=ce({__name:"t-tahap-bulk-modal",props:{show:{type:Boolean,default:!1},level:{default:1},detailData:{default:()=>({})},selectedData:{default:()=>[]}},emits:["update:show","click:close","click:pass","click:void","click:moveto"],setup(le,{emit:p}){const i=le;function j(){p("click:close",!0),p("click:pass",!0)}function k(){p("click:close",!0),p("click:void",!0)}function U(){p("click:close",!0),p("click:moveto",!0)}return(n,L)=>{const r=Ze,s=ve,d=Ne,z=Ee,g=re,$=we;return v(),R($,{"mask-closable":!1,show:n.show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"470px","max-width":"100%","border-radius":"8px"},"header-style":"padding-bottom: 10px","onUpdate:show":L[0]||(L[0]=G=>n.$emit("click:close",G))},{default:t(()=>[l(g,{vertical:""},{default:t(()=>[l(r,{style:{"text-align":"center","margin-bottom":"10px"}},{default:t(()=>[m(" Bulk Aksi "+w(i.selectedData.length)+" Kode Level "+w(i.level),1)]),_:1}),l(z,{"y-gap":"14",cols:3,class:"button-grub"},{default:t(()=>[l(d,{span:"3"},{default:t(()=>[l(s,{type:"primary",onClick:j},{default:t(()=>[m("Pass")]),_:1})]),_:1}),l(d,{span:"3"},{default:t(()=>[l(s,{type:"error",onClick:k},{default:t(()=>[m("Void")]),_:1})]),_:1}),i.detailData.serialize[i.detailData.serialize.length-1].level!==i.level?(v(),R(d,{key:0,span:"3"},{default:t(()=>[l(s,{type:"warning",onClick:U},{default:t(()=>[m("Move To")]),_:1})]),_:1})):S("",!0)]),_:1})]),_:1})]),_:1},8,["show"])}}});const Wl={style:{"text-align":"center"}},Xl=ce({__name:"t-tahap-level-modal",props:{show:{type:Boolean,default:!1},level:{default:1},detailData:{default:()=>({})},selectedData:{default:()=>({})}},emits:["update:show","click:close","click:detail","click:pass","click:void","click:moveto"],setup(le,{emit:p}){const i=le;function j(){p("click:close",!0),p("click:detail",!0)}function k(){p("click:close",!0),p("click:pass",!0)}function U(){p("click:close",!0),p("click:void",!0)}function n(){p("click:close",!0),p("click:moveto",!0)}return(L,r)=>{const s=Ze,d=ge,z=re,g=ve,$=Ne,G=Ee,H=we;return v(),R(H,{"mask-closable":!1,show:i.show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"490px","max-width":"100%","border-radius":"10px"},"onUpdate:show":r[0]||(r[0]=P=>L.$emit("click:close",P))},{default:t(()=>[l(z,{vertical:""},{default:t(()=>[c("div",Wl,[l(s,{style:{"margin-bottom":"0"}},{default:t(()=>[m(" Kode Level "+w(i.level)+" : "+w(i.selectedData.code),1)]),_:1}),l(z,{vertical:"",size:0},{default:t(()=>{var P,N;return[S("",!0),i.level!==((N=(P=i.detailData)==null?void 0:P.serialize[0])==null?void 0:N.level)?(v(),R(d,{key:1,style:{"font-size":"14px"}},{default:t(()=>{var y,_;return[m("Qty : "+w((_=(y=i==null?void 0:i.selectedData)==null?void 0:y.serialize)==null?void 0:_.current)+" Level "+w(i.level-1),1)]}),_:1})):S("",!0)]}),_:1})]),l(G,{"y-gap":"6",cols:3,class:"button-grub"},{default:t(()=>{var P,N;return[i.level!==((N=(P=i.detailData)==null?void 0:P.serialize[0])==null?void 0:N.level)?(v(),R($,{key:0,span:"3"},{default:t(()=>[l(g,{type:"primary",onClick:j},{default:t(()=>[m("Detail")]),_:1})]),_:1})):S("",!0),l($,{span:"3"},{default:t(()=>[l(g,{color:"#219653",onClick:k},{default:t(()=>[m("Pass")]),_:1})]),_:1}),l($,{span:"3"},{default:t(()=>[l(g,{type:"error",onClick:U},{default:t(()=>[m("Void")]),_:1})]),_:1}),i.detailData.serialize[i.detailData.serialize.length-1].level!==i.level?(v(),R($,{key:1,span:"3"},{default:t(()=>[l(g,{type:"warning",onClick:n},{default:t(()=>[m("Move To")]),_:1})]),_:1})):S("",!0)]}),_:1})]),_:1})]),_:1},8,["show"])}}});const et=ce({__name:"t-tahap-scan-modal",props:{code:{},show:{type:Boolean,default:!1},title:{},isBtnLoading:{type:Boolean,default:!1}},emits:["update:show","update:code","click:scan","click:close"],setup(le,{emit:p}){const i=le,j=ke(),k=f("");$e(k,r=>p("update:code",r),{deep:!0}),ye(()=>{k.value=i.code}),Se(()=>{var r;k.value=i.code,(r=U.value)==null||r.focus()});const U=f(null);function n(){i.code?(p("click:scan",k.value),setTimeout(()=>{p("click:close",!1)},400)):j.error("Kode tidak boleh kosong")}function L(){i.code?(p("click:scan",k.value),setTimeout(()=>{p("click:close",!1)},400)):j.error("Kode tidak boleh kosong")}return(r,s)=>{const d=Bl,z=ge,g=ve,$=re,G=Ll,H=we;return v(),R(H,{"mask-closable":!1,show:r.show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"480px","max-width":"100%","border-radius":"10px"},"onUpdate:show":s[1]||(s[1]=P=>r.$emit("click:close",P))},{default:t(()=>[l($,{vertical:"",align:"center",justify:"center",size:14},{default:t(()=>[r.title?(v(),R(d,{key:0,style:{"margin-bottom":"0"}},{default:t(()=>[m(w(r.title),1)]),_:1})):S("",!0),l($,{vertical:"",align:"center"},{default:t(()=>[l(z,null,{default:t(()=>[m("Silakan masukkan Kode")]),_:1}),l($,null,{default:t(()=>[l(e(Ue),{ref_key:"input",ref:U,value:e(k),placeholder:"",clearable:"",style:{width:"16rem"},onKeyup:zl(n,["enter"]),"onUpdate:value":s[0]||(s[0]=P=>r.$emit("update:code",P))},null,8,["value","onKeyup"]),S("",!0)]),_:1})]),_:1}),S("",!0),l(g,{disabled:e(k)=="",loading:r.isBtnLoading,type:"primary",class:"button-tnt",onClick:L},{default:t(()=>[m("Scan Kode")]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["show"])}}}),lt=["onClick"],tt=["value","id"],at={key:1},ot={key:0,class:"table-tnt"},nt=c("th",null,"No",-1),st={style:{width:"75%"}},it=c("th",null,"Status",-1),ut=["onClick"],dt=["value","id"],ct=ce({__name:"t-tahap-table",props:{scanData:{default:()=>({})},detailData:{default:()=>({})},value:{default:()=>({})},params:{default:()=>({})},levelParamsNow:{}},emits:["click:bulk","click:close","click:getCheckingLevel","click:getDetailByCode","click:getDetailChecking","update:params"],setup(le,{emit:p}){const i=le,j=Te(),k=ke(),U=f(!1),n=f(!1),L=f({}),r=f({}),s=f({}),d=f([]),z=f([]),g=f({show:!1,id:"",code:"",level:""}),$=f({show:!1,title:"Scan Kode",code:""}),G=f({show:!1}),H=f({show:!1,title:""}),P=f({show:!1,title:"",subtitle:"",form:{}}),N=f({show:!1,title:"",subtitle:"",form:{}}),y=f({show:!1,title:"",subtitle:"",form:{},isBulk:!1}),_=f({show:!1,title:"",subtitle:"",type:""}),q=f([{label:"Semua",value:"all"},{label:"Belum Diperikas",value:"uncheck"},{label:"Pass",value:"pass"},{label:"Void",value:"void"}]);$e(s,u=>p("update:params",u),{deep:!0}),ye(()=>{L.value=i.value,s.value=i.params}),Se(async()=>{L.value=await i.value,s.value=await i.params,U.value=!1});function x(u){const o=document.getElementById("copyCode"+u);o.select(),o.setSelectionRange(0,99999),navigator.clipboard.writeText(o.value),k.success("Kode tersalin")}function F(u){const o=document.getElementById("copyCodeChild"+u);o.select(),o.setSelectionRange(0,99999),navigator.clipboard.writeText(o.value),k.success("Kode tersalin")}async function B(u){U.value=!0,L.value={},p("click:getCheckingLevel",u)}function b(u){s.value.page=1,s.value.limit=u,B(s.value.level)}async function h(u,o,A){if(A)L.value.list.forEach((Q,ne)=>{ne===o&&(Q.active=!Q.active)});else{n.value=!0;const Q=u.id,ne={limit:1e3};return await ee.getCheckingItems(Q,ne).then(O=>(L.value.list.forEach((M,fe)=>{fe===o&&(M.levelChild=O.data,M.active=!M.active)}),n.value=!1,O.data)).catch(O=>{n.value=!1;const M=O.response.data;k.error(M.message)})}}function D(u,o){g.value.id=u,g.value.code=o,g.value.level=s.value.level,g.value.show=!0}function T(){g.value.show=!1}function C(){$.value.show=!0}function V(){$.value.show=!1}async function J(){await Ce($.value.code,s.value.level),d.value=[],d.value.push(r.value)}function W(){p("click:getDetailByCode",r.value.code,s.value.level,!0)}function se(){z.value.length>0?(d.value=[],d.value=z.value,H.value.show=!0):k.error("Belum ada level terpilih")}function ue(){H.value.show=!1}function X(){G.value.show=!0}function pe(){G.value.show=!1}async function be(){n.value=!0;const u=new FormData;d.value.forEach(o=>{u.append("ids[]",o.id)}),ee.passChecking(u).then(()=>{n.value=!1,s.value.level===i.detailData.serialize[i.detailData.serialize.length-1].level?(B(s.value.level),p("click:getDetailChecking",!0)):(B(s.value.level),p("click:getDetailChecking",!1)),oe(),setTimeout(()=>{I.value.title="Berhasil Pass",I.value.subtitle=`${d.value.length} Kode Level ${s.value.level} berhasil lolos pengecekan`,_e()},300)}).catch(o=>{n.value=!1;const A=o.response.data;k.error(A.message)})}async function Ce(u,o){U.value=!0,n.value=!0;const A=j.params.id;await ee.getDetailByCode(u,A,o).then(Q=>{X(),r.value=Q.data}).catch(Q=>{U.value=!1;const ne=Q.response.data;k.error(ne.message)}).finally(()=>{n.value=!1,$.value.code=""})}function K(){P.value.subtitle="",P.value.show=!0}function ie(){P.value.show=!1}function ll(){n.value=!0;const u=new FormData;d.value.forEach(o=>{u.append("ids[]",o.id)}),P.value.form.imageList.forEach(o=>{u.append("media_id[]",o.id)}),u.append("reason",P.value.form.reason),ee.voidChecking(u).then(()=>{n.value=!1,s.value.level===i.detailData.serialize[i.detailData.serialize.length-1].level?(p("click:getDetailChecking",!0),B(s.value.level)):(p("click:getDetailChecking",!1),B(s.value.level)),oe(),ie(),k.success("Berhasil Void"),setTimeout(()=>{I.value.title="Berhasil Void",I.value.subtitle=`${d.value.length} Kode Level ${s.value.level} berhasil divoidkan`,_e()},300)}).catch(o=>{n.value=!1;const A=o.response.data;k.error(A.message)})}function je(){N.value.subtitle="",N.value.show=!0}function Ie(){N.value.show=!1}function tl(){n.value=!0;const u=new FormData;d.value.forEach(o=>{u.append("reception_detail_id[]",o.id)}),N.value.form.imageList.forEach(o=>{u.append("medias[]",o.id)}),u.append("reason",N.value.form.reason),u.append("destination_reception_detail_id",N.value.form.destination_id),ee.movetoChecking(u).then(()=>{n.value=!1,s.value.level===i.detailData.serialize[i.detailData.serialize.length-1].level?(p("click:getDetailChecking",!0),B(s.value.level)):(p("click:getDetailChecking",!1),B(s.value.level)),oe(),Ie(),setTimeout(()=>{I.value.title="Berhasil Move",I.value.subtitle=`${d.value.length} Kode Level ${s.value.level} berhasil dipindahkan`,_e()},300)}).catch(o=>{n.value=!1;const A=o.response.data;k.error(A.message)})}function al(){y.value.isBulk=!1,y.value.show=!0}function ol(){y.value.isBulk=!0,y.value.show=!0}function xe(){y.value.show=!1}async function nl(){if(n.value=!0,y.value.isBulk){let u=[];if(L.value.list.length>0)if(L.value.list.forEach(o=>{o.status==="pass"&&u.push(o)}),u.length>0){let o=0;for(const A of u){const Q=await A.id,ne=new FormData;ne.append("warehouse_building_id",y.value.form.building),await ee.receptionChecking(Q,ne).then(()=>{o++,o===u.length&&(n.value=!1,oe(),xe(),y.value.form={},I.value.title="Berhasil Disimpan",I.value.subtitle=`No PK ${i.detailData.pk_id} berhasil disimpan ke warehouse building`,_e(),setTimeout(()=>{p("click:getDetailChecking",!0),B(s.value.level)},3e3))}).catch(O=>{n.value=!1,oe(),xe(),y.value.form={};const M=O.response.data;I.value.title="Gagal",I.value.subtitle=`${M.message}`,_e(),setTimeout(()=>{p("click:getDetailChecking",!0),B(s.value.level)},4e3)})}}else n.value=!1,k.error("Tidak ada serialisasi untuk disimpan")}else{const u=d.value[0].id,o=new FormData;o.append("warehouse_building_id",y.value.form.building),ee.receptionChecking(u,o).then(()=>{n.value=!1,oe(),xe(),y.value.form={},I.value.title="Berhasil Disimpan",I.value.subtitle=`Kode Level ${s.value.level} : ${d.value[0].code} berhasil disimpan ke warehouse building`,_e(),setTimeout(()=>{s.value.level===i.detailData.serialize[i.detailData.serialize.length-1].level?(p("click:getDetailChecking",!0),B(s.value.level)):(p("click:getDetailChecking",!1),B(s.value.level))},3e3)}).catch(A=>{n.value=!1;const Q=A.response.data;k.error(Q.message)})}}function he(u){u==="pass"?(i.detailData.serialize[0].level===s.value.level?_.value.subtitle="Pass "+d.value.length+" Kode Level "+s.value.level:_.value.subtitle="Pass "+d.value.length+" Kode Level "+s.value.level+" dan level di dalamnya",_.value.type=u,_.value.title="Konfirmasi Pass",_.value.show=!0):u==="void"?(i.detailData.serialize[0].level===s.value.level?_.value.subtitle="Void "+d.value.length+" Kode Level "+s.value.level:_.value.subtitle="Void "+d.value.length+" Kode Level "+s.value.level+" dan level di dalamnya",_.value.type=u,_.value.title="Konfirmasi Void",_.value.show=!0):u==="moveto"?(i.detailData.serialize[0].level===s.value.level?_.value.subtitle="Move "+d.value.length+" Kode Level "+s.value.level:_.value.subtitle="Move "+d.value.length+" Kode Level "+s.value.level+" dan level di dalamnya",_.value.type=u,_.value.title="Konfirmasi Move",_.value.show=!0):u==="reception"&&(y.value.isBulk?(_.value.title="Bulk Penyimpanan "+i.detailData.pk_id,_.value.subtitle="Apakah Anda yakin untuk bulk penyimpanan?"):(_.value.title="Kode Level "+s.value.level+" : "+d.value[0].code,_.value.subtitle="Qty : "+d.value[0].serialize.current+" Level "+(s.value.level-1)),_.value.type=u,_.value.show=!0)}function oe(){_.value.show=!1}const I=f({show:f(!1),type:"",icon:$l(),iconColor:"",hideIcon:!1,title:"",subtitle:"",align:"center"}),Pe=f(!1),Vt=f("Semua");function sl(u){var o;u?(z.value=[],(o=L.value)==null||o.list.map(A=>{var Q;A.status!=="pass"&&A.status!=="pre_release"&&A.status!=="void"&&A.status!=="print_void"&&((Q=z.value)==null||Q.push(A))})):z.value=[]}function il(u){z.value=u}function _e(){z.value=[],I.value.type="success",I.value.hideIcon=!1,I.value.iconColor="#219653",I.value.icon=Il,I.value.show=!0}const ul=[{label:"Pass/Void",key:"pass/void"}];function De(u,o){switch(u){case"pass/void":r.value.code=o.code,d.value=[],d.value.push(o),X();break;case"reception":d.value=[],d.value.push(o),al();break}}function dl(){let u=!1,o=[];return Object.keys(i.value).length>0&&(i.value.list.forEach(A=>{o.push(A.status)}),o.includes("packing_done")||o.includes("void")&&!o.includes("pass")?u=!1:u=!0),u}return(u,o)=>{const A=Sl,Q=Ue,ne=Ul,O=re,M=ve,fe=We,cl=el,Ae=ge,rl=Pl,vl=Vl,pl=Me,Fe=Re,_l=Kl,Kt=Tl,fl=Ml,ml=El,gl=et,hl=Xl,kl=Zl,yl=Yl,wl=Ql,bl=Dl,qe=xl;return v(),E(Y,null,[l(O,{vertical:"",size:16},{default:t(()=>[l(O,{align:"center",justify:"space-between"},{default:t(()=>[l(O,{align:"center"},{default:t(()=>[l(A,{label:"Pilih Semua",checked:e(Pe),"onUpdate:checked":[o[0]||(o[0]=a=>te(Pe)?Pe.value=a:null),sl]},null,8,["checked"]),S("",!0),S("",!0)]),_:1}),l(O,{align:"center"},{default:t(()=>{var a,de;return[dl()&&((a=u.detailData.serialize)==null?void 0:a.length)&&((de=u.detailData.serialize)==null?void 0:de.length)===e(s).level?(v(),R(M,{key:0,color:"#219653",class:"button-tnt",onClick:ae(ol,["prevent"])},{default:t(()=>[m(" Pilih Penyimpanan ")]),_:1},8,["onClick"])):S("",!0),u.$route.name!=="produksi-pengecekan-tahap2-id-preview"?(v(),R(M,{key:1,color:"#F2994A",class:"button-tnt",onClick:se},{default:t(()=>[m("Bulk Aksi")]),_:1})):S("",!0),l(M,{type:"primary",class:"button-tnt",onClick:C},{default:t(()=>[l(fe,{component:e(jl)},null,8,["component"]),m(" Scan Kode ")]),_:1})]}),_:1})]),_:1}),l(fl,{value:e(z),"onUpdate:value":[o[5]||(o[5]=a=>te(z)?z.value=a:null),il]},{default:t(()=>[l(Fe,{"x-scrollable":""},{default:t(()=>[l(O,{vertical:"",size:10,wrap:!1},{default:t(()=>[e(U)?(v(),R(cl,{key:0})):(v(!0),E(Y,{key:1},Le(e(L).list,(a,de)=>(v(),E("div",{key:a.id,class:"card-tnt",style:Ve([{padding:"1.2rem","margin-top":"0","border-radius":"12px"},(a==null?void 0:a.status)==="void"||(a==null?void 0:a.status)==="print_void"?"background-color: #d030502e;":(a==null?void 0:a.status)==="pass"||(a==null?void 0:a.status)==="pre_release"?"background-color: #18a0581f;":"background-color: #eee;"])},[l(O,{wrap:!1,justify:"space-between",align:"center",style:{position:"relative"}},{default:t(()=>{var me;return[l(O,{wrap:!1,size:0},{default:t(()=>[l(Ae,{style:{"margin-right":"10px"}},{default:t(()=>[m(w(e(s).limit*(e(s).page-1)+(de+1)),1)]),_:2},1024),(a==null?void 0:a.status)!=="void"&&(a==null?void 0:a.status)!=="print_void"&&(a==null?void 0:a.status)!=="pass"&&(a==null?void 0:a.status)!=="pre_release"?(v(),R(A,{key:0,value:a,label:""},null,8,["value"])):S("",!0),l(Ae,{style:{"margin-left":"10px"}},{default:t(()=>{var Z;return[m(w("Kode Level "+((Z=e(s))==null?void 0:Z.level)+" : ")+" ",1),c("span",{style:{"font-weight":"500",cursor:"pointer"},onClick:ae(Cl=>x(de),["prevent"])},w(a.code),9,lt)]}),_:2},1024),ze(c("div",null,[ze(c("input",{type:"text",value:a.code,id:"copyCode"+de},null,8,tt),[[Be,!1]])],512),[[Be,!1]])]),_:2},1024),i.detailData.serialize&&i.detailData.serialize[0].level!==((me=e(s))==null?void 0:me.level)?(v(),R(O,{key:0,align:"center",size:14,wrap:!1},{default:t(()=>[l(M,{secondary:"",strong:"",type:"primary",class:"button-tnt",style:{padding:"1rem 3rem",cursor:"default"}},{default:t(()=>[m(w(a.serialize.total_pass)+" Pass",1)]),_:2},1024),l(M,{secondary:"",strong:"",type:"error",class:"button-tnt",style:{padding:"1rem 3rem"},onClick:ae(Z=>D(a.id,a.code),["prevent"])},{default:t(()=>[m(w(a.serialize.total_void)+" Void ",1)]),_:2},1032,["onClick"]),l(M,{loading:e(n),text:"",type:"primary",onClick:ae(Z=>h(a,de,a.active),["prevent"])},{default:t(()=>[m(w(a.active?"Tutup":"Detail"),1)]),_:2},1032,["loading","onClick"]),(a==null?void 0:a.status)!=="void"&&(a==null?void 0:a.status)!=="print_void"&&(a==null?void 0:a.status)!=="pass"&&(a==null?void 0:a.status)!=="pre_release"?(v(),E(Y,{key:0},[i.detailData.serialize[i.detailData.serialize.length-1].level===e(s).level?(v(),R(rl,{key:0,"show-arrow":"",placement:"bottom-end",options:ul,onSelect:Z=>De(Z,a)},{default:t(()=>[l(M,{tertiary:"",style:{padding:"0"}},{icon:t(()=>[l(fe,null,{default:t(()=>[l(e(Ke))]),_:1})]),_:1})]),_:2},1032,["onSelect"])):(v(),R(M,{key:1,tertiary:"",style:{padding:"0"},onClick:ae(Z=>De("pass/void",a),["prevent"])},{icon:t(()=>[l(fe,null,{default:t(()=>[l(e(Ke))]),_:1})]),_:2},1032,["onClick"]))],64)):S("",!0),(a==null?void 0:a.status)==="pass"?(v(),E("div",at,[i.detailData.serialize[i.detailData.serialize.length-1].level===e(s).level?(v(),R(M,{key:0,tertiary:"",loading:e(n),class:"button-tnt",onClick:ae(Z=>De("reception",a),["prevent"])},{default:t(()=>[m(" Pilih Penyimpanan ")]),_:2},1032,["loading","onClick"])):S("",!0)])):S("",!0),(a==null?void 0:a.status)==="pre_release"?(v(),E("div",{key:2,style:Ve([{"border-radius":"1rem",padding:"2px 10px","font-size":"13px",color:"#ffffff"},"background-color: #18a058;"])}," Tersimpan ")):S("",!0)]),_:2},1024)):(v(),R(O,{key:1},{default:t(()=>[c("div",{style:Ve([{"border-radius":"1rem",padding:"2px 10px","font-size":"13px",color:"#ffffff"},(a==null?void 0:a.status)==="packing_done"?"background-color: #8b8b8b;":(a==null?void 0:a.status)==="void"?"background-color: #d03050;":((a==null?void 0:a.status)==="pass","background-color: #18a058;")])},w((a==null?void 0:a.status)==="packing_done"?"Belum Di Periksa":(a==null?void 0:a.status)==="void"?"Void":(a==null?void 0:a.status)==="pass"?"Pass":"Tersimpan"),5),(a==null?void 0:a.status)!=="void"&&(a==null?void 0:a.status)!=="pass"?(v(),R(M,{key:0,tertiary:"",style:{padding:"0"},onClick:ae(Z=>De("pass/void",a),["prevent"])},{icon:t(()=>[l(fe,null,{default:t(()=>[l(e(Ke))]),_:1})]),_:2},1032,["onClick"])):S("",!0)]),_:2},1024))]}),_:2},1024),l(_l,{show:a.active},{default:t(()=>[a.active?(v(),E("div",ot,[l(Fe,{"x-scrollable":""},{default:t(()=>[l(pl,{"single-line":!1},{default:t(()=>[c("thead",null,[c("tr",null,[nt,c("th",st," Kode Level "+w(e(s).level-1),1),it])]),c("tbody",null,[(v(!0),E(Y,null,Le(a.levelChild.list,(me,Z)=>(v(),E("tr",{key:Z},[c("td",null,w(Z+1),1),c("td",null,[c("div",{style:{cursor:"pointer"},onClick:ae(Cl=>F(Z),["prevent"])},w(me.code),9,ut),ze(c("div",null,[ze(c("input",{type:"text",value:me.code,id:"copyCodeChild"+Z},null,8,dt),[[Be,!1]])],512),[[Be,!1]])]),c("td",null,[l(vl,{bordered:!1,type:"primary"},{default:t(()=>[m(w(me.status),1)]),_:2},1024)])]))),128))])]),_:2},1024)]),_:2},1024)])):S("",!0)]),_:2},1032,["show"])],4))),128)),S("",!0)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),l(ml,{show:e(g).show,id:e(g).id,code:e(g).code,level:e(g).level,"onClick:close":T},null,8,["show","id","code","level"]),l(gl,{code:e($).code,"onUpdate:code":o[6]||(o[6]=a=>e($).code=a),show:e($).show,title:e($).title,"is-btn-loading":e(n),"onClick:close":V,"onClick:scan":J},null,8,["code","show","title","is-btn-loading"]),l(hl,{show:e(G).show,"onUpdate:show":o[7]||(o[7]=a=>e(G).show=a),level:e(s).level,"onUpdate:level":o[8]||(o[8]=a=>e(s).level=a),"detail-data":i.detailData,"selected-data":e(d)[0],"onUpdate:selectedData":o[9]||(o[9]=a=>e(d)[0]=a),"onClick:close":pe,"onClick:detail":W,"onClick:pass":o[10]||(o[10]=a=>he("pass")),"onClick:void":K,"onClick:moveto":je},null,8,["show","level","detail-data","selected-data"]),l(kl,{show:e(H).show,"onUpdate:show":o[11]||(o[11]=a=>e(H).show=a),level:e(s).level,"onUpdate:level":o[12]||(o[12]=a=>e(s).level=a),"detail-data":i.detailData,"selected-data":e(d),"onUpdate:selectedData":o[13]||(o[13]=a=>te(d)?d.value=a:null),"onClick:close":ue,"onClick:pass":o[14]||(o[14]=a=>he("pass")),"onClick:void":K,"onClick:moveto":je},null,8,["show","level","detail-data","selected-data"]),l(yl,{show:e(P).show,value:e(P).form,"onUpdate:value":o[15]||(o[15]=a=>e(P).form=a),level:e(s).level,"onUpdate:level":o[16]||(o[16]=a=>e(s).level=a),"selected-data":e(d),"onUpdate:selectedData":o[17]||(o[17]=a=>te(d)?d.value=a:null),title:e(P).title,"onClick:close":ie,"onClick:confirm":o[18]||(o[18]=a=>he("void"))},null,8,["show","value","level","selected-data","title"]),l(wl,{show:e(N).show,value:e(N).form,"onUpdate:value":o[19]||(o[19]=a=>e(N).form=a),level:e(s).level,"onUpdate:level":o[20]||(o[20]=a=>e(s).level=a),"selected-data":e(d),"onUpdate:selectedData":o[21]||(o[21]=a=>te(d)?d.value=a:null),title:e(N).title,"onClick:close":Ie,"onClick:confirm":o[22]||(o[22]=a=>he("moveto"))},null,8,["show","value","level","selected-data","title"]),l(bl,{show:e(y).show,"is-bulk":e(y).isBulk,value:e(y).form,"onUpdate:value":o[23]||(o[23]=a=>e(y).form=a),level:e(s).level,"onUpdate:level":o[24]||(o[24]=a=>e(s).level=a),"detail-data":i.detailData,"selected-data":e(d)[0],"onUpdate:selectedData":o[25]||(o[25]=a=>e(d)[0]=a),title:e(y).title,"onClick:close":xe,"onClick:confirm":o[26]||(o[26]=a=>he("reception"))},null,8,["show","is-bulk","value","level","detail-data","selected-data","title"]),l(qe,{show:e(_).show,"onUpdate:show":o[27]||(o[27]=a=>e(_).show=a),title:e(_).title,subtitle:e(_).subtitle,hideIcon:""},{default:t(()=>[l(O,{justify:"center"},{default:t(()=>[e(_).type==="pass"?(v(),E(Y,{key:0},[l(M,{loading:e(n),color:"#828282",class:"button-tnt",onClick:oe},{default:t(()=>[m("Batalkan")]),_:1},8,["loading"]),l(M,{loading:e(n),type:"primary",class:"button-tnt",onClick:be},{default:t(()=>[m("Lanjutkan")]),_:1},8,["loading"])],64)):S("",!0),e(_).type==="void"?(v(),E(Y,{key:1},[l(M,{loading:e(n),color:"#828282",class:"button-tnt",onClick:oe},{default:t(()=>[m("Batalkan")]),_:1},8,["loading"]),l(M,{loading:e(n),type:"primary",class:"button-tnt",onClick:ll},{default:t(()=>[m("Lanjutkan")]),_:1},8,["loading"])],64)):S("",!0),e(_).type==="moveto"?(v(),E(Y,{key:2},[l(M,{loading:e(n),color:"#828282",class:"button-tnt",onClick:oe},{default:t(()=>[m("Batalkan")]),_:1},8,["loading"]),l(M,{loading:e(n),type:"primary",class:"button-tnt",onClick:tl},{default:t(()=>[m("Lanjutkan")]),_:1},8,["loading"])],64)):S("",!0),e(_).type==="reception"?(v(),E(Y,{key:3},[l(M,{loading:e(n),color:"#828282",class:"button-tnt",onClick:oe},{default:t(()=>[m("Batalkan")]),_:1},8,["loading"]),l(M,{loading:e(n),type:"primary",class:"button-tnt",onClick:nl},{default:t(()=>[m("Simpan")]),_:1},8,["loading"])],64)):S("",!0)]),_:1})]),_:1},8,["show","title","subtitle"]),l(qe,{show:e(I).show,"onUpdate:show":o[28]||(o[28]=a=>e(I).show=a),icon:e(I).icon,"hide-icon":e(I).hideIcon,title:e(I).title,subtitle:e(I).subtitle,align:e(I).align},null,8,["show","icon","hide-icon","title","subtitle","align"])],64)}}}),rt={class:"body-tnt"},vt={key:0,class:"card-tnt"},pt=c("span",null,"No Pk : ",-1),_t={style:{"font-weight":"500"}},ft=c("span",null,"Nama Produk : ",-1),mt={style:{"font-weight":"500"}},gt=c("span",null,"Kode Produk : ",-1),ht={style:{"font-weight":"500"}},kt=c("span",null,"No Batch Produksi : ",-1),yt={style:{"font-weight":"500"}},wt=c("span",null,"UOM : ",-1),bt={style:{"font-weight":"500"}},Ct=c("span",null,"Qty Level Terendah : ",-1),xt={style:{"font-weight":"500"}},Dt={class:"card-tnt",style:{border:"1px solid #E5E5E5","margin-top":"0",padding:"8px","text-align":"center"}},zt={class:"card-tnt",style:{border:"1px solid #E5E5E5","margin-top":"0",padding:"8px","text-align":"center"}},Bt={class:"card-tnt",style:{border:"1px solid #E5E5E5","margin-top":"0",padding:"8px","text-align":"center"}},Lt={class:"card-tnt"},$t={class:"bottom-action-button"},St={class:"action-item"},Ut=c("span",{style:{"margin-left":"5px"}},"Beranda",-1),Pt=c("span",{style:{"margin-left":"5px"}},"Level Sebelumnya",-1),Jt=ce({__name:"index",setup(le){const p=Te(),i=ke(),j=f(!1),k=f(!1),U=f(!1),n=f({}),L=f({}),r=f({}),s=f({}),d=f(),z=f([]),g=f({reception_id:p.params.id,with_void_on:"checking",status:"",level:1,page:1,limit:1e3}),$=f({level:1});ye(()=>{G()});async function G(){P(),await H(!0)}async function H(b){j.value=!0;const h=p.params.id;await ee.getDetailChecking(h).then(D=>{var T,C;n.value=D.data,b?N((C=n.value)==null?void 0:C.serialize[((T=n.value)==null?void 0:T.serialize.length)-1].level):setTimeout(()=>{j.value=!1},300)}).catch(D=>{const T=D.response.data;i.error(T.message)})}function P(){const b=p.params.id;ee.getDetailCheckingProduct(b).then(h=>{L.value=h.data}).catch(h=>{const D=h.response.data;i.error(D.message)})}async function N(b){var D,T;const h=((D=n.value)==null?void 0:D.serialize.length)-1;b===((T=n.value)==null?void 0:T.serialize[h].level)?(k.value=!0,g.value.level=b,await ee.getCheckingLevel(g.value).then(C=>{r.value=C.data,r.value.list.forEach(V=>{V.active=!1,V.checked=!1}),j.value=!1,U.value=!1,k.value=!1}).catch(C=>{j.value=!1,U.value=!1,k.value=!1;const V=C.response.data;i.error(V.message)})):_(s.value.id,!1)}async function y(b,h,D){j.value=!0,k.value=!0,$.value.level=h;const T=p.params.id;return await ee.getDetailByCode(b,T,h).then(C=>{var V,J;z.value.includes(C.data.code)||(typeof z.value[((V=n.value)==null?void 0:V.serialize.length)-g.value.level]<"u"&&z.value.splice(((J=n.value)==null?void 0:J.serialize.length)-g.value.level,1),z.value.push(C.data.code)),s.value=C.data,_(s.value.id,D)}).catch(C=>{j.value=!1,U.value=!1,k.value=!1;const V=C.response.data;i.error(V.message)})}async function _(b,h){k.value=!0;const D=f({});return D.value={...g.value},delete D.value.reception_id,delete D.value.level,delete D.value.status,await ee.getCheckingItems(b,D.value).then(T=>{h&&(g.value.level=g.value.level-1),r.value=T.data,r.value.list.forEach(C=>{C.active=!1,C.checked=!1}),j.value=!1,U.value=!1,k.value=!1}).catch(T=>{k.value=!1;const C=T.response.data;i.error(C.message)})}function q(b){let h=0;return b.forEach(D=>{h+=D.qty}),h}function x(b){let h=0;return b.forEach(D=>{h+=D.checking.total_qty_passed}),h}function F(b){let h=0;return b.forEach(D=>{"total_check_void"in D&&(h+=D.total_check_void)}),h}function B(){var b,h,D,T;if(((b=n.value.serialize)==null?void 0:b.length)-1===g.value.level)j.value=!0,z.value=[],N((D=n.value)==null?void 0:D.serialize[((h=n.value)==null?void 0:h.serialize.length)-1].level);else{const C=z.value[((T=n.value)==null?void 0:T.serialize.length)-1-$.value.level];g.value.level+=2,y(C,g.value.level,!0)}}return(b,h)=>{var be,Ce;const D=el,T=Nl,C=ge,V=re,J=Ne,W=Ee,se=ct,ue=We,X=ve,pe=Rl("router-link");return v(),E("div",rt,[e(j)?(v(),E("div",vt,[l(D)])):(v(),E(Y,{key:1},[l(T,{style:{"margin-bottom":"16px"}},{default:t(()=>{var K;return[((K=e(n).serialize)==null?void 0:K.length)===e(g).level?(v(),E(Y,{key:0},[m(" No PK : "+w(e(n).pk_id),1)],64)):(v(),E(Y,{key:1},[m(" Kode Level "+w(e($).level)+" : "+w(e(s).code),1)],64))]}),_:1}),l(W,{cols:"3","item-responsive":"",responsive:"screen","x-gap":"16","y-gap":"16"},{default:t(()=>[l(J,{span:"3 m:1"},{default:t(()=>[l(V,{vertical:"",size:15},{default:t(()=>{var K;return[((K=e(n).serialize)==null?void 0:K.length)!==e(g).level?(v(),R(V,{key:0,vertical:"",size:0},{default:t(()=>[l(C,{style:{"margin-bottom":"0"}},{default:t(()=>[pt,c("span",_t,w(e(n).pk_id),1)]),_:1})]),_:1})):S("",!0),l(V,{vertical:"",size:0},{default:t(()=>[l(C,{style:{"margin-bottom":"0"}},{default:t(()=>{var ie;return[ft,c("span",mt,w((ie=e(n).product)==null?void 0:ie.long_name),1)]}),_:1})]),_:1}),l(V,{vertical:"",size:0},{default:t(()=>[l(C,{style:{"margin-bottom":"0"}},{default:t(()=>{var ie;return[gt,c("span",ht,w((ie=e(n).product)==null?void 0:ie.item_code),1)]}),_:1})]),_:1}),l(V,{vertical:"",size:0},{default:t(()=>[l(C,{style:{"margin-bottom":"0"}},{default:t(()=>[kt,c("span",yt,w(e(n).batch_number),1)]),_:1})]),_:1})]}),_:1})]),_:1}),l(J,{span:"3 m:1"},{default:t(()=>[l(V,{vertical:"",size:15},{default:t(()=>[l(V,{vertical:"",size:0},{default:t(()=>[l(C,{style:{"margin-bottom":"0"}},{default:t(()=>{var K;return[wt,c("span",bt,w((K=e(L).uom)==null?void 0:K.name),1)]}),_:1})]),_:1}),l(V,{vertical:"",size:0},{default:t(()=>[l(C,{style:{"margin-bottom":"0"}},{default:t(()=>{var K;return[Ct,c("span",xt,w(e(n).serialize?(K=e(n).serialize[0])==null?void 0:K.qty:"0"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(W,{cols:"3","item-responsive":"",responsive:"screen","x-gap":"16","y-gap":"16",style:{"margin-top":"18px"}},{default:t(()=>[l(J,{span:"3 m:1"},{default:t(()=>{var K;return[c("div",Dt,[((K=e(n).serialize)==null?void 0:K.length)===e(g).level?(v(),R(C,{key:0,style:{"font-size":"13px","margin-bottom":"0"}},{default:t(()=>[m(" Semua ("+w(e(n).serialize?q(e(n).serialize):0)+") ",1)]),_:1})):(v(),R(C,{key:1},{default:t(()=>[m(" Semua ("+w(e(n).serialize?q(e(n).serialize):0)+") ",1)]),_:1}))])]}),_:1}),l(J,{span:"3 m:1"},{default:t(()=>[c("div",zt,[l(C,{style:{"font-size":"13px","margin-bottom":"0"}},{default:t(()=>[m(" Pass ("+w(e(n).serialize?x(e(n).serialize):0)+") ",1)]),_:1})])]),_:1}),l(J,{span:"3 m:1"},{default:t(()=>[c("div",Bt,[l(C,{style:{"font-size":"13px","margin-bottom":"0"}},{default:t(()=>[m(" Void ("+w(e(n).serialize?F(e(n).serialize):0)+") ",1)]),_:1})])]),_:1})]),_:1}),c("div",Lt,[l(se,{ref_key:"tahapTableRef",ref:d,"detail-data":e(n),"onUpdate:detailData":h[0]||(h[0]=K=>te(n)?n.value=K:null),"scan-data":e(s),"onUpdate:scanData":h[1]||(h[1]=K=>te(s)?s.value=K:null),value:e(r),"onUpdate:value":h[2]||(h[2]=K=>te(r)?r.value=K:null),params:e(g),"onUpdate:params":h[3]||(h[3]=K=>te(g)?g.value=K:null),"level-params-now":e($),"onUpdate:levelParamsNow":h[4]||(h[4]=K=>te($)?$.value=K:null),type:"semua","onClick:getCheckingLevel":N,"onClick:getDetailByCode":y,"onClick:getDetailChecking":H},null,8,["detail-data","scan-data","value","params","level-params-now"])])],64)),c("div",$t,[c("div",St,[l(pe,{to:{name:"produksi-pengecekan-tahap1"},class:"text-decoration-none"},{default:t(()=>[l(X,{color:"#828282",class:"button-tnt"},{default:t(()=>[l(ue,{component:e(Oe)},null,8,["component"]),Ut]),_:1})]),_:1}),(be=e(n).serialize)!=null&&be.length&&((Ce=e(n).serialize)==null?void 0:Ce.length)!==e(g).level?(v(),R(X,{key:0,loading:e(k),color:"#828282",ghost:"",class:"button-tnt",onClick:B},{default:t(()=>[l(ue,{component:e(Oe)},null,8,["component"]),Pt]),_:1},8,["loading"])):S("",!0)])])])}}});export{Jt as default};

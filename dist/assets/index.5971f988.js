import{_ as me}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as fe}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as ge,u as he,E as ve,r,a1 as ke,f as ye,o as c,c as p,a as x,k as e,w as t,q as u,ah as M,i as n,N,h as A,F as C,g as B,t as m,j as P,af as be,am as we,an as xe,K as Ce,L as Se,ak as Ve,a7 as ze,a8 as De,s as Me,a9 as $e,v as Ne,y as Be,ag as Oe,I as Ee,J as Ie,M as Ue,Q as R}from"./index.21c0d750.js";import{h as Ae}from"./moment.62d3fb0a.js";import{s as T}from"./serialisasi-external.c8482290.js";import{_ as Pe}from"./modal-import-excel.vue_vue_type_script_setup_true_lang.ff2a8a71.js";import{A as K}from"./Add.4f3b52cf.js";import{E as Re}from"./EllipsisVertical.56989e7a.js";import{C as Te}from"./CheckmarkCircleOutline.8fddcae1.js";import{S as j}from"./SearchOutline.47b929a4.js";import{C as F}from"./CloseOutline.cda7564f.js";import"./getCompanyId.7d0eb93b.js";const Ke={class:"body-tnt"},je={class:"card-tnt"},Fe={class:"table-tnt"},qe={key:1,class:"card-tnt",style:{"text-align":"center",padding:"1rem","background-color":"#eeeeee","margin-top":"10px"}},Le={class:"table-footer"},He={style:{"text-align":"center","padding-top":"1rem","padding-bottom":"1rem"}},ca=ge({__name:"index",setup(Qe){const q=he(),O=ve(),S=r(!0),f=r(!1),v=r({}),i=r({search:"",status:"",sort:"desc",dir:"created_at",page:1,limit:10}),_=r({show:!1,importProduct:!1,data:{}}),V=r({show:!1}),z=r({id:"",data:{}}),Ge=r(),L=r({}),H=r();H.value={reason:{required:!0,message:"Alasan tidak boleh kosong",trigger:["input","blur"]}};const s=r({show:r(!1),type:"",icon:ke(),iconColor:"",hideIcon:!1,title:"",subtitle:"",align:"center"}),k=l=>()=>R(N,null,{default:()=>R(l)});function Q(l){let o=[];return l.is_upload_serialization?(o=[],o.push({label:"Detail",key:"detail",icon:k(j)}),o.push({label:"Cancel",key:"cancel",icon:k(F),disabled:l.status==="complete"})):(o=[],o.push({label:"Upload Serialisasi",key:"upload",icon:k(K)}),o.push({label:"Cancel",key:"cancel",icon:k(F)})),l.is_cancel&&(o=[],o.push({label:"Detail",key:"detail",icon:k(j)})),o}function G(l,o,y){switch(l){case"detail":q.push({name:"penerimaan-serialisasi-external-id",params:{id:o}});break;case"upload":_.value.importProduct=!0,_.value.show=!0,_.value.data.id=o;break;case"cancel":z.value.id=o,z.value.data=y,Z()}}ye(()=>{h()});async function h(){S.value=!0,f.value=!0,await T.getSerialize(i.value).then(l=>{v.value=l.data,S.value=!1,f.value=!1}).catch(l=>{S.value=!1,f.value=!1;const o=l.response.data;O.error(o.message)})}const E=r(0);function J(){i.value.page=1,clearTimeout(E.value),E.value=setTimeout(function(){h()},600)}function W(l){i.value.page=1,i.value.limit=l,h()}function X(){_.value.importProduct=!1,_.value.show=!0}function Y(){_.value.show=!1}function Z(){V.value.show=!0}function I(){L.value.reason="",V.value.show=!1}async function ee(){f.value=!0;const l={import_serialization_id:z.value.id};await T.cancelSerialie(l).then(()=>{s.value.show=!1,I(),setTimeout(()=>{te(),f.value=!1},300)}).catch(o=>{f.value=!1;const y=o.response.data;O.error(y.message)})}function ae(){h(),s.value.show=!1}function te(){s.value.type="success",s.value.icon=Te,s.value.iconColor="#219653",s.value.title="Berhasil",s.value.subtitle="Anda berhasil membatalkan serialisasi external",s.value.show=!0}return(l,o)=>{const y=be,ne=we,oe=xe,b=Ce,se=Se,le=Ve,D=ze,U=De,ue=fe,d=Me,re=$e,g=Ne,ce=Be,ie=Oe,de=me,Je=Ee,We=Ie,_e=Ue;return c(),p(C,null,[x("div",Ke,[e(y,{style:{"margin-bottom":"4px"}},{default:t(()=>[u("Serialisasi External")]),_:1}),e(oe,null,{default:t(()=>[e(ne,null,{default:t(()=>[u("Serialisasi External")]),_:1})]),_:1}),e(se,{style:{"border-radius":"10px","margin-top":"18px"}},{default:t(()=>[e(b,{color:"#219653",class:"button-tnt",onClick:M(X,["prevent"])},{default:t(()=>[e(n(N),{component:n(K)},null,8,["component"]),u(" Upload DO External ")]),_:1},8,["onClick"])]),_:1}),x("div",je,[e(U,{gutter:"16"},{default:t(()=>[e(D,{span:6},{default:t(()=>[e(le,{value:n(i).search,"onUpdate:value":[o[0]||(o[0]=a=>n(i).search=a),J],clearable:"",type:"text",placeholder:"Cari Kode DO Vendor"},null,8,["value"])]),_:1})]),_:1}),x("div",Fe,[n(S)?(c(),A(ue,{key:0})):(c(),p(C,{key:1},[n(v).list.length>0?(c(!0),p(C,{key:0},B(n(v).list,(a,pe)=>(c(),p("div",{class:"card-tnt",style:{padding:"1rem","background-color":"#eeeeee","margin-top":"10px"},key:pe},[e(g,{justify:"space-between"},{default:t(()=>[e(d,{strong:"",style:{"font-size":"14px"}},{default:t(()=>[u("No PO: "+m(a==null?void 0:a.code),1)]),_:2},1024),e(re,{round:"",bordered:!1,type:a.status==="pending"?"warning":a.status==="sukses"?"success":a.status==="cancel"?"error":a.status==="complete"?"success":"default"},{default:t(()=>[u(m(l.$filters.toStatus(a==null?void 0:a.status)),1)]),_:2},1032,["type"])]),_:2},1024),e(U,{gutter:"12"},{default:t(()=>[e(D,{span:8},{default:t(()=>[e(g,{vertical:"",size:0},{default:t(()=>[e(d,null,{default:t(()=>[u("No DO : "+m(a==null?void 0:a.vendor_do),1)]),_:2},1024),e(d,null,{default:t(()=>[u("No Vendor : "+m(a==null?void 0:a.vendor_no),1)]),_:2},1024),e(d,null,{default:t(()=>[u("Tgl DO : "+m(n(Ae)(a==null?void 0:a.created_at).format("yyyy-MM-DD")),1)]),_:2},1024),e(d,null,{default:t(()=>[u("Kode Produk : "),(c(!0),p(C,null,B(a.product,(w,$)=>(c(),p("span",{key:$},m(w.code)+", ",1))),128))]),_:2},1024),e(d,null,{default:t(()=>[u("Kode Batch : "),(c(!0),p(C,null,B(a.product,(w,$)=>(c(),p("span",{key:$},m(w.batch)+", ",1))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024),e(D,{span:8,align:"center"},{default:t(()=>[e(d,null,{default:t(()=>[u("Qty : "+m(a==null?void 0:a.total_qty),1)]),_:2},1024)]),_:2},1024),e(D,{span:8,align:"center"},{default:t(()=>[e(g,{justify:"end",style:{"margin-top":"22px"}},{default:t(()=>[e(ce,{placement:"bottom-end",options:Q(a),onSelect:w=>G(w,a.id,a)},{default:t(()=>[e(b,{tertiary:""},{icon:t(()=>[e(n(N),null,{default:t(()=>[e(n(Re))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)):(c(),p("div",qe,[e(d,null,{default:t(()=>[u("Belum ada data tersedia")]),_:1})]))],64)),x("div",Le,[e(ie,{page:n(i).page,"onUpdate:page":[o[1]||(o[1]=a=>n(i).page=a),h],"page-size":n(i).limit,"onUpdate:pageSize":[o[2]||(o[2]=a=>n(i).limit=a),W],"page-count":n(v).total_page,"page-slot":7,"show-size-picker":n(v).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])])])]),e(Pe,{"is-show-modal":n(_).show,"is-import-product":n(_).importProduct,data:n(_).data,onHideModal:Y,onGetData:h},null,8,["is-show-modal","is-import-product","data"]),e(de,{show:n(s).show,"onUpdate:show":o[3]||(o[3]=a=>n(s).show=a),icon:n(s).icon,"icon-color":n(s).iconColor,"hide-icon":n(s).hideIcon,title:n(s).title,subtitle:n(s).subtitle,align:n(s).align},{default:t(()=>[e(g,{justify:"center",style:{width:"100%"}},{default:t(()=>[n(s).type=="success"?(c(),A(b,{key:0,color:"#828282",class:"button-tnt",onClick:M(ae,["prevent"])},{default:t(()=>[u(" Tutup ")]),_:1},8,["onClick"])):P("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle","align"]),e(_e,{"mask-closable":!1,show:n(V).show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"470px","max-width":"100%","border-radius":"8px"},"header-style":"padding-bottom: 10px;",title:"Konfirmasi Cancel","onUpdate:show":o[5]||(o[5]=a=>n(V).show=!1)},{default:t(()=>[e(g,{vertical:""},{default:t(()=>[P("",!0),x("div",He,[e(g,{vertical:"",size:0},{default:t(()=>[e(d,null,{default:t(()=>[u("Apakah Anda yakin untuk membatalkan DO Vendor")]),_:1}),e(d,null,{default:t(()=>[u(m(n(z).data.vendor_no)+"?",1)]),_:1})]),_:1})]),e(g,{justify:"center"},{default:t(()=>[e(b,{loading:n(f),color:"#828282",class:"button-tnt",onClick:M(I,["prevent"])},{default:t(()=>[u(" Tutup ")]),_:1},8,["loading","onClick"]),e(b,{loading:n(f),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:M(ee,["prevent"])},{default:t(()=>[u(" Konfirmasi ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["show"])],64)}}});export{ca as default};

import{_ as ve}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as ye}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as be}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as ke,u as we,E as Ce,r as c,a1 as xe,f as Pe,e as $e,aF as F,p as Ae,o as i,c as u,a as s,k as a,w as n,q as p,i as e,h as g,F as v,t as y,j as $,N as G,g as H,ah as M,Q as U,af as De,am as Ee,an as Ne,x as Te,s as Be,K as Fe,v as Ge,ak as Me,a7 as Se,a8 as ze,y as Ie,aa as Le,ab as Ve,ag as Re}from"./index.21c0d750.js";import{c as m}from"./constant.549d5c21.js";import{m as We}from"./master-perusahaan.ac657e6f.js";import{m as O}from"./master-warehouse.353b4b3b.js";import{A as je}from"./Add.4f3b52cf.js";import{E as He}from"./EllipsisVertical.56989e7a.js";import{P as Ue}from"./Pencil.0b65f5de.js";import{T as Oe}from"./Trash.4f4f705c.js";import{C as qe}from"./CheckmarkCircleOutline.8fddcae1.js";import{H as Ke}from"./HelpCircleOutline.a54a41ed.js";import"./AlertCircleOutline.19cf574c.js";import"./getCompanyId.7d0eb93b.js";import"./getHoldingId.48f570fc.js";const Qe={class:"body-tnt"},Je={class:"card-tnt"},Xe={key:0,style:{display:"flex","justify-content":"space-between","align-items":"start"}},Ye={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Ze={style:{"margin-left":"2rem"}},et={style:{"font-size":"16px","font-weight":"600"}},tt={key:0},at={class:"card-tnt"},nt={class:"table-tnt"},st=s("thead",null,[s("tr",null,[s("th",{style:{"text-align":"center"}},"No"),s("th",null,"Nama"),s("th",null,"3PL"),s("th",null,"Alamat"),s("th",{style:{"text-align":"center"}},"Aksi")])],-1),ot={"data-label":"No",style:{"text-align":"center"}},lt={"data-label":"Nama"},it={"data-label":"3PL"},ct={"data-label":"Alamat"},rt={"data-label":"Aksi",style:{"text-align":"center"}},ut={key:1},dt=s("td",{colspan:"5",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),_t=[dt],pt={class:"table-footer"},Tt=ke({__name:"index",setup(mt){const q=we(),E=Ce(),A=c(),N=c(!1),b=c(!1),d=c(!1),f=c({}),k=c({}),_=c({search:"",sort:"desc",sort_field:"created_at",page:1,limit:10}),t=c({show:c(!1),type:"",icon:xe(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),D=c({id:"",name:""}),T=c([]),S=o=>()=>U(G,null,{default:()=>U(o)});Pe(()=>{A.value=$e.getAuth(),K(),F.isGranted(m.accessPrivileges.company+".list")&&Q()});function K(){F.isGranted(m.accessPrivileges.company+".update")&&T.value.push({label:"Edit Data",key:"edit",icon:S(Ue)}),F.isGranted(m.accessPrivileges.company+".delete")&&T.value.push({label:"Hapus Data",key:"delete",icon:S(Oe)})}async function Q(){d.value=!0,N.value=!0,b.value=!0,await J(),await w(),d.value=!1,N.value=!1,b.value=!1,t.value.show=!1}async function J(){let o="";A.value.xxtype==="5up3r4dm1n"?o=A.value["xx-usertype-access"].company_id:o=A.value.users.user_type.id,await We.getDetailCompany(o).then(l=>{f.value=l.data}).catch(l=>{const C=l.response.data;E.error(C.message)})}async function w(){b.value=!0,await O.getWarehouse(_.value).then(o=>{k.value=o.data,b.value=!1,t.value.show=!1}).catch(o=>{const l=o.response.data;E.error(l.message)})}const z=c(0);function X(){clearTimeout(z.value),z.value=setTimeout(function(){w()},600)}function Y(o){_.value.limit=o,w()}function Z(o,l,C){switch(o){case"edit":q.push({path:`/setting/master-perusahaan/update/${l}/plant-area`});break;case"delete":D.value.id=l,D.value.name=C,ne();break}}function ee(){d.value=!0,O.deleteWarehouse(D.value.id).then(()=>{t.value.show=!1,setTimeout(()=>{ae(),d.value=!1},300)}).catch(o=>{d.value=!1;const l=o.response.data;E.error(l.message)})}function te(){t.value.show=!1}function ae(){t.value.type="success",t.value.icon=qe,t.value.iconColor="#219653",t.value.title="Berhasil",t.value.subtitle="Anda berhasil menghapus data plant/cabang",t.value.show=!0}function ne(){t.value.type="delete",t.value.icon=Ke,t.value.iconColor="#EB5757",t.value.title="Perhatian",t.value.subtitle=`Apakah Anda yakin untuk menghapus ${D.value.name} ?`,t.value.show=!0}return(o,l)=>{var R,W;const C=De,se=Ee,oe=Ne,I=be,le=Te,ie=Be,h=Fe,L=Ae("router-link"),V=Ge,ce=Me,re=Se,ue=ze,de=Ie,_e=Le,pe=Ve,me=Re,fe=ye,he=ve;return i(),u(v,null,[s("div",Qe,[a(C,{style:{"margin-bottom":"4px"}},{default:n(()=>[p("Master Profil Plant/Cabang")]),_:1}),a(oe,null,{default:n(()=>[a(se,null,{default:n(()=>[p("Master Profil Plant/Cabang")]),_:1})]),_:1}),s("div",Je,[e(N)?(i(),g(I,{key:0})):(i(),u(v,{key:1},[o.$filters.isGranted(e(m).accessPrivileges.company+".detail")?(i(),u("div",Xe,[s("div",Ye,[s("div",null,[a(le,{round:"",style:{color:"yellow",backgroundColor:"grey"},size:120,src:(R=e(f).image)!=null&&R.url?(W=e(f).image)==null?void 0:W.url:""},null,8,["src"])]),s("div",Ze,[s("div",et,y(e(f).name),1),a(ie,null,{default:n(()=>{var r,x;return[p(y((x=(r=e(f))==null?void 0:r.address)==null?void 0:x.detail),1)]}),_:1})])]),o.$filters.isGranted(e(m).accessPrivileges.company+".update")?(i(),u("div",tt,[a(L,{to:{path:`/setting/master-perusahaan/update/${e(f).id}/perusahaan`},style:{"text-decoration":"none"}},{default:n(()=>[a(h,{color:"#F2C94C","text-color":"#1E1E1E",class:"button-tnt"},{default:n(()=>[p(" Edit ")]),_:1})]),_:1},8,["to"])])):$("",!0)])):$("",!0)],64))]),s("div",at,[o.$filters.isGranted(e(m).accessPrivileges.company+".create")?(i(),g(V,{key:0},{default:n(()=>[a(L,{to:"/setting/master-perusahaan/create/1/plant-area",class:"text-decoration-none"},{default:n(()=>[a(h,{color:"#219653",class:"button-tnt"},{icon:n(()=>[a(e(G),null,{default:n(()=>[a(e(je))]),_:1})]),default:n(()=>[p(" Tambah Plant/Cabang ")]),_:1})]),_:1})]),_:1})):$("",!0),o.$filters.isGranted(e(m).accessPrivileges.company+".list")?(i(),u(v,{key:1},[a(ue,{gutter:"16",style:{"margin-top":"24px"}},{default:n(()=>[a(re,{span:6},{default:n(()=>[a(ce,{value:e(_).search,"onUpdate:value":l[0]||(l[0]=r=>e(_).search=r),onInput:X,type:"text",placeholder:"Cari nama plant/cabang"},null,8,["value"])]),_:1})]),_:1}),s("div",nt,[e(b)?(i(),g(I,{key:0})):(i(),g(pe,{key:1,"x-scrollable":""},{default:n(()=>[a(_e,{"single-line":!1},{default:n(()=>{var r,x;return[st,s("tbody",null,[((x=(r=e(k))==null?void 0:r.list)==null?void 0:x.length)>0?(i(!0),u(v,{key:0},H(e(k).list,(P,j)=>(i(),u("tr",{key:j},[s("td",ot,y(e(_).limit*(e(_).page-1)+(j+1)),1),s("td",lt,y(P.name),1),s("td",it,[(i(!0),u(v,null,H(P["3pl"],(B,ge)=>(i(),u("div",{key:ge},y(B.name),1))),128))]),s("td",ct,y(o.$filters.setAddress(P.address)),1),s("td",rt,[a(de,{placement:"bottom-end","show-arrow":!0,options:e(T),onSelect:B=>Z(B,P.id,P.name)},{default:n(()=>[a(h,{tertiary:""},{icon:n(()=>[a(e(G),null,{default:n(()=>[a(e(He))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])]))),128)):(i(),u("tr",ut,_t))])]}),_:1})]),_:1})),s("div",pt,[a(me,{page:e(_).page,"onUpdate:page":[l[1]||(l[1]=r=>e(_).page=r),w],"page-count":e(k).total_page,"page-slot":10,"show-size-picker":e(k).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":Y},null,8,["page","page-count","show-size-picker"])])])],64)):(i(),g(fe,{key:2}))])]),a(he,{show:e(t).show,"onUpdate:show":l[2]||(l[2]=r=>e(t).show=r),icon:e(t).icon,"icon-color":e(t).iconColor,"hide-icon":e(t).hideIcon,title:e(t).title,subtitle:e(t).subtitle},{default:n(()=>[a(V,{justify:"center"},{default:n(()=>[e(t).type=="success"?(i(),g(h,{key:0,loading:e(d),color:"#828282",class:"button-tnt",onClick:M(w,["prevent"])},{default:n(()=>[p(" Tutup ")]),_:1},8,["loading","onClick"])):$("",!0),e(t).type=="delete"?(i(),u(v,{key:1},[a(h,{loading:e(d),color:"#828282",class:"button-tnt",onClick:M(te,["prevent"])},{default:n(()=>[p(" Tidak ")]),_:1},8,["loading","onClick"]),a(h,{loading:e(d),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:M(ee,["prevent"])},{default:n(()=>[p(" Iya ")]),_:1},8,["loading","onClick"])],64)):$("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{Tt as default};

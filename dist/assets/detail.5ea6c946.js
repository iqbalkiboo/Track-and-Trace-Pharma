import{_ as ot}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as st,b as _t,u as it,E as ut,r as $,f as ct,p as rt,o as i,c as b,i as d,k as e,h as w,w as t,q as n,t as l,ah as dt,a as r,F as D,g as P,j as K,af as ft,s as pt,v as mt,a7 as gt,K as yt,a8 as ht,ad as U,ae as bt,aP as vt,aQ as kt,aR as xt,aS as wt,aT as Dt,aa as zt,ab as Mt,_ as Pt,L as Nt,R as Ct}from"./index.21c0d750.js";import{h as W}from"./moment.62d3fb0a.js";import{l as X}from"./loading.ceda1b09.js";import"./getCompanyId.7d0eb93b.js";const Tt={class:"body-tnt"},$t={key:0,class:"card-tnt"},Kt={class:"card-tnt",style:{border:"1px solid #e5e5e5","border-radius":"10px","margin-top":"0",padding:"10px","text-align":"center"}},Bt={class:"card-tnt",style:{border:"1px solid #e5e5e5","border-radius":"10px","margin-top":"0",padding:"10px","text-align":"center"}},Lt={key:0,class:"table-tnt",style:{"margin-top":"0"}};const Rt={class:"table-tnt",style:{"margin-top":"0"}},St={style:{"margin-bottom":"0.5rem"}},jt={style:{"margin-bottom":"0.5rem"}},Et={style:{"margin-bottom":"0.5rem"}},Vt={style:{"margin-bottom":"0.5rem"}},qt={style:{"margin-bottom":"0.5rem"}},Ft={style:{"margin-bottom":"0.5rem"}},Ht={style:{"margin-bottom":"0.5rem"}},It={class:"bottom-action-button"},Qt={class:"action-item"},Xt=st({__name:"detail",setup(At){const B=_t(),Y=it(),S=ut(),L=$(!1),m=$({}),j=$([]),E=$({});ct(()=>{localStorage.removeItem("manifest_id"),Z()});async function Z(){L.value=!0,et(),await tt(),L.value=!1}async function tt(){const o=B.params.id;await X.getDetailManifest(o).then(async y=>{var h;m.value=y.data,j.value=(h=m.value.driver_info.drivers)==null?void 0:h.map(z=>({...z,active:!1}))}).catch(y=>{const h=y.response.data;S.error(h.message)})}async function et(){const o={manifest_id:B.params.id,limit:1e3};await X.getManifestLog(o).then(async y=>{E.value=y.data}).catch(y=>{const h=y.response.data;S.error(h.message)})}function nt(o){var x,M,N,C;const y=o==null?void 0:o.detail,h=(x=o==null?void 0:o.urban_village)==null?void 0:x.name,z=(M=o==null?void 0:o.sub_district)==null?void 0:M.name,s=(N=o==null?void 0:o.district)==null?void 0:N.name,u=(C=o==null?void 0:o.province)==null?void 0:C.name;return`${y}, ${h}, ${z}, ${s}, ${u}`}function at(){localStorage.setItem("manifest_id",B.params.id);const o=Y.resolve({path:"/print/loading-manifest"});window.open(o.href,"_blank")}return(o,y)=>{const h=ot,z=ft,s=pt,u=mt,x=gt,M=yt,N=ht,C=U,V=bt,v=vt,T=kt,q=xt,k=wt,F=Dt,H=zt,I=Mt,R=U,Q=Pt,A=Nt,J=Ct,lt=rt("router-link");return i(),b("div",Tt,[d(L)?(i(),b("div",$t,[e(h)])):(i(),w(u,{key:1,vertical:"",size:24},{default:t(()=>{var O;return[e(N,{style:{display:"flex","justify-content":"space-between"}},{default:t(()=>[e(x,{span:10},{default:t(()=>[e(u,{vertical:"",size:0},{default:t(()=>[e(z,null,{default:t(()=>[n("Kode Manifest : "+l(d(m).code),1)]),_:1}),e(u,{vertical:""},{default:t(()=>[e(s,null,{default:t(()=>{var a;return[n("Kode DO : "+l((a=d(m).do)==null?void 0:a.code),1)]}),_:1}),e(s,null,{default:t(()=>[n("Target Tanggal Pengiriman : "+l(d(W)(d(m).target_delivery_date).format("yyyy-MM-DD")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{span:10},{default:t(()=>[e(u,{vertical:"",size:0},{default:t(()=>[e(z,null,{default:t(()=>{var a,p;return[n(" Tujuan : "+l((p=(a=d(m).do)==null?void 0:a.destination)==null?void 0:p.name),1)]}),_:1}),e(s,null,{default:t(()=>{var a,p;return[n(l(nt((p=(a=d(m).do)==null?void 0:a.destination)==null?void 0:p.address)),1)]}),_:1})]),_:1})]),_:1}),e(x,{span:4},{default:t(()=>[e(M,{ghost:"",type:"primary",class:"button-tnt",style:{float:"right"},onClick:dt(at,["prevent"])},{default:t(()=>[n(" Cetak Manifest ")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(V,{cols:"2","item-responsive":"",responsive:"screen","x-gap":16,"y-gap":16},{default:t(()=>[e(C,{span:"1"},{default:t(()=>[r("div",Kt,[e(s,{style:{"font-size":"13px","margin-bottom":"0"}},{default:t(()=>{var a;return[n(" Total Pack : "+l((a=d(m).total)==null?void 0:a.packing),1)]}),_:1})])]),_:1}),e(C,{span:"1"},{default:t(()=>[r("div",Bt,[e(s,{style:{"font-size":"13px","margin-bottom":"0"}},{default:t(()=>{var a;return[n(" Loaded Pack : "+l((a=d(m).total)==null?void 0:a.qty),1)]}),_:1})])]),_:1})]),_:1}),((O=d(m).products)==null?void 0:O.length)>0?(i(),b("div",Lt,[e(I,{"x-scrollable":""},{default:t(()=>[e(H,{bordered:!1,"single-line":!0},{default:t(()=>[e(q,null,{default:t(()=>[e(T,{style:{"border-radius":"20px"}},{default:t(()=>[e(v,null,{default:t(()=>[n("No")]),_:1}),e(v,null,{default:t(()=>[n("Kode Produk")]),_:1}),e(v,null,{default:t(()=>[n("Nama Produk")]),_:1}),e(v,null,{default:t(()=>[n("Batch")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[(i(!0),b(D,null,P(d(m).products,(a,p)=>(i(),w(T,{key:p},{default:t(()=>[e(k,null,{default:t(()=>[n(l(p+1),1)]),_:2},1024),e(k,null,{default:t(()=>[n(l(a.name),1)]),_:2},1024),e(k,null,{default:t(()=>[n(l(a.code),1)]),_:2},1024),e(k,null,{default:t(()=>[n(l(a.batch),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):K("",!0),e(u,{vertical:"",style:{"margin-top":"1rem"}},{default:t(()=>[(i(!0),b(D,null,P(d(j),(a,p)=>(i(),w(A,{key:p,style:{"border-radius":"8px"},"content-style":{background:"#eee",borderRadius:"8px"}},{default:t(()=>[e(V,{cols:"3"},{default:t(()=>[e(R,{style:{"font-size":"13px"}},{default:t(()=>{var f;return[r("div",null,"Nama Driver : "+l(a.name),1),r("div",null," Plat Nomor Kendaraan : "+l((f=a.vehicle)==null?void 0:f.plate_number),1)]}),_:2},1024),e(R,{style:{"font-size":"13px","text-align":"center"}},{default:t(()=>{var f;return[r("div",null,"Tipe Kendaraan : "+l((f=a.vehicle_category)==null?void 0:f.name),1),K("",!0)]}),_:2},1024),e(R,null,{default:t(()=>[e(u,{justify:"end"},{default:t(()=>[a.packings.length?(i(),w(M,{key:0,text:"",type:"primary",onClick:f=>a.active=!a.active},{default:t(()=>[n(l(a.active?"Tutup":"Detail"),1)]),_:2},1032,["onClick"])):K("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Q,{show:a.active&&a.packings.length},{default:t(()=>[(i(!0),b(D,null,P(a==null?void 0:a.packings,(f,_)=>(i(),w(u,{key:_,vertical:"",style:{padding:"1rem",background:"#dfe2e7","border-radius":"8px","margin-top":"0.8rem"}},{default:t(()=>[e(u,{justify:"space-between"},{default:t(()=>[e(s,null,{default:t(()=>[n("Kode Packing : "+l(f.code),1)]),_:2},1024)]),_:2},1024),e(Q,{show:f.is_show_detail===!0},{default:t(()=>[r("div",Rt,[e(I,{"x-scrollable":""},{default:t(()=>[e(H,{bordered:!1,"single-line":!0},{default:t(()=>[e(q,null,{default:t(()=>[e(T,{style:{"border-radius":"20px"}},{default:t(()=>[e(v,null,{default:t(()=>[n("No")]),_:1}),e(v,null,{default:t(()=>[n("Kode Serialisasi")]),_:1}),e(v,null,{default:t(()=>[n("Level")]),_:1}),e(v,null,{default:t(()=>[n("Produk")]),_:1}),e(v,null,{default:t(()=>[n("Qty Level")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[(i(!0),b(D,null,P(f.serializations,(c,G)=>(i(),w(T,{key:G},{default:t(()=>[e(k,null,{default:t(()=>[n(l(G+1),1)]),_:2},1024),e(k,null,{default:t(()=>{var g;return[n(l((g=c.serialization)==null?void 0:g.code),1)]}),_:2},1024),e(k,null,{default:t(()=>{var g;return[n(l((g=c.serialization)==null?void 0:g.name),1)]}),_:2},1024),e(k,null,{default:t(()=>{var g;return[n(l((g=c.serialization)==null?void 0:g.product_name),1)]}),_:2},1024),e(k,null,{default:t(()=>{var g;return[n(l((g=c.serialization)==null?void 0:g.qty),1)]}),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["show"])]),_:2},1024))),128))]),_:2},1032,["show"])]),_:2},1024))),128))]),_:1}),(i(!0),b(D,null,P(d(E).list,(a,p)=>{var f;return i(),b(D,null,[(f=a.attributes)!=null&&f.receiver?(i(),w(A,{key:p,style:{"border-radius":"10px"}},{default:t(()=>[e(u,{vertical:""},{default:t(()=>[e(s,{style:{"font-size":"14px","font-weight":"500","margin-bottom":"0px"}},{default:t(()=>[n("Penerima")]),_:1}),e(N,null,{default:t(()=>[e(x,{span:12},{default:t(()=>[r("div",St,[e(u,{vertical:"",size:0},{default:t(()=>[e(s,{style:{"font-weight":"500"}},{default:t(()=>[n("Nama Penerima")]),_:1}),e(s,null,{default:t(()=>{var _,c;return[n(l((c=(_=a.attributes)==null?void 0:_.receiver)==null?void 0:c.name),1)]}),_:2},1024)]),_:2},1024)]),r("div",jt,[e(u,{vertical:"",size:0},{default:t(()=>[e(s,{style:{"font-weight":"500"}},{default:t(()=>[n("No.Hp Penerima")]),_:1}),e(s,null,{default:t(()=>{var _,c;return[n(l((c=(_=a.attributes)==null?void 0:_.receiver)==null?void 0:c.phone),1)]}),_:2},1024)]),_:2},1024)]),r("div",Et,[e(u,{vertical:"",size:0},{default:t(()=>[e(s,{style:{"font-weight":"500"}},{default:t(()=>[n("Email")]),_:1}),e(s,null,{default:t(()=>{var _,c;return[n(l((c=(_=a.attributes)==null?void 0:_.receiver)==null?void 0:c.email),1)]}),_:2},1024)]),_:2},1024)]),r("div",Vt,[e(u,{vertical:"",size:0},{default:t(()=>[e(s,{style:{"font-weight":"500"}},{default:t(()=>[n("Jabatan Penerima")]),_:1}),e(s,null,{default:t(()=>{var _,c;return[n(l((c=(_=a.attributes)==null?void 0:_.receiver)==null?void 0:c.department),1)]}),_:2},1024)]),_:2},1024)]),r("div",qt,[e(u,{vertical:"",size:0},{default:t(()=>[e(s,{style:{"font-weight":"500"}},{default:t(()=>[n("Foto Bukti")]),_:1}),(i(!0),b(D,null,P(a==null?void 0:a.medias,_=>(i(),w(J,{key:_==null?void 0:_._id,width:"100",style:{backgroundColor:"#f1f1f1"},src:_==null?void 0:_.public_url},null,8,["src"]))),128))]),_:2},1024)]),r("div",Ft,[e(u,{vertical:"",size:0},{default:t(()=>[e(s,{style:{"font-weight":"500"}},{default:t(()=>[n("Tanda Tangan Digital")]),_:1}),e(J,{width:"100",style:{backgroundColor:"#f1f1f1"},src:""})]),_:1})])]),_:2},1024),e(x,{span:12},{default:t(()=>[e(s,{style:{"font-weight":"500","margin-bottom":"0px"}},{default:t(()=>[n("Tanggal")]),_:1}),r("div",Ht,[e(s,null,{default:t(()=>[n(l(d(W)(a.created_at).format("yyyy-MM-DD")),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):K("",!0)],64)}),256))]}),_:1})),r("div",It,[r("div",Qt,[e(lt,{to:{name:"pengiriman-loading-driver"},class:"text-decoration-none"},{default:t(()=>[e(M,{color:"#828282",class:"button-tnt",style:{width:"120px"}},{default:t(()=>[n("Kembali")]),_:1})]),_:1})])])])}}});export{Xt as default};

import{_ as se}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as le,f as ie,u as _e,r as m,E as ue,o as f,c as h,k as e,w as t,q as n,a as b,i as o,h as k,F as re,g as de,t as r,af as ce,am as pe,an as ge,ak as me,ad as fe,aj as be,H as ve,ae as ye,aP as he,aQ as ke,aR as De,aS as Se,N as xe,a9 as we,K as Ne,y as Ae,aT as $e,aa as Me,ab as Te,ag as Ue,a4 as P}from"./index.21c0d750.js";import{r as Pe}from"./render-icon.8c81e0de.js";import{a as ze}from"./assign-driver.a4158cbc.js";import{S as Ce}from"./setStatus.eab5cece.js";import{m as Ve}from"./master-warehouse.353b4b3b.js";import{H as Le,R as Re,C as je}from"./ReloadOutline.48ff66be.js";import{W as Be}from"./WarningOutline.87384d2c.js";import{E as Ee}from"./EllipsisVertical.56989e7a.js";import{A as Ie}from"./ArrowRedoOutline.89a5a384.js";import"./getCompanyId.7d0eb93b.js";const Oe={class:"body-tnt"},Qe={class:"card-tnt"},We={class:"table-tnt"},He=b("sup",null,"3",-1),Fe={style:{"text-transform":"capitalize"}},Ke={key:1},qe=b("td",{colspan:"11",style:{"text-align":"center !important"},class:"not-content"}," Belum ada data tersedia ",-1),Ge=[qe],Je={class:"table-footer"},Xe=le({__name:"index",setup(Ye){ie(()=>{p(),B()});const z=_e(),l=m({code:"",sort:"desc",delivery_type:"direct_kendaraan",status:"need_assign_driver,reject_accept",page:1,limit:10}),C=ue(),V=new Ce,c=m(!1),g=m({}),D=m([]),L=m([{label:"Need Assign Driver",value:"need_assign_driver"},{label:"Driver Assigned",value:"driver_assigned"},{label:"Shipping",value:"shipping"},{label:"Accepted",value:"accepted"}]);async function p(){c.value=!0,await ze.getmanifest(l.value).then(a=>{g.value=a.data,c.value=!1}).catch(a=>{c.value=!1;const i=a.response.data;C.error(i.message)})}const R=a=>[{label:"Assign Driver",key:`/pengiriman/assign-driver/${a}/add-driver`,disabled:!1,icon:Pe(Ie)}],j=a=>[{label:"Edit",key:`/pengiriman/assign-driver/${a}/add-driver`,disabled:!1},{label:"Lacak Manifest",key:`/lacak/manifest/${a}`,disabled:!1}];async function B(){c.value=!0,await Ve.getWarehouse({limit:1e3,sort:"desc"}).then(a=>{var i;c.value=!1,D.value=(i=a.data)==null?void 0:i.list.map(y=>({label:y.name,value:y.id}))}).catch(a=>{c.value=!1;const i=a.response.data;g.error(i.message)})}function E(a){z.push(a)}function I(a){l.value.limit=a,p()}const S=m(0);function x(){l.value.page=1,clearTimeout(S.value),S.value=setTimeout(function(){p()},600)}function O(a){l.value["do.destination._id"]=a||null,p()}function Q(a){l.value.target_delivery_date=a||null,p()}function W(a){l.value.status=a||null,p()}function H(a){a?l.value.products=a||null:l.value.products=null,x()}return(a,i)=>{const y=ce,F=pe,K=ge,w=me,v=fe,q=be,N=ve,G=ye,J=se,_=he,A=ke,X=De,u=Se,$=xe,Y=we,Z=Ne,ee=Ae,te=$e,ae=Me,ne=Te,oe=Ue;return f(),h("div",Oe,[e(y,{style:{"margin-bottom":"4px"}},{default:t(()=>[n("Assign Driver")]),_:1}),e(K,null,{default:t(()=>[e(F,null,{default:t(()=>[n("Assign Driver")]),_:1})]),_:1}),b("div",Qe,[e(G,{cols:"5","x-gap":"12",style:{"margin-top":"1rem"}},{default:t(()=>[e(v,null,{default:t(()=>[e(w,{value:o(l).code,"onUpdate:value":[i[0]||(i[0]=d=>o(l).code=d),x],clearable:"",placeholder:"Cari Kode Manifest"},null,8,["value"])]),_:1}),e(v,null,{default:t(()=>[e(w,{"onUpdate:value":H,clearable:"",placeholder:"Cari Kode Product"})]),_:1}),e(v,null,{default:t(()=>[e(q,{"value-format":"yyyy-MM-dd",clearable:"",onUpdateFormattedValue:Q,type:"date"})]),_:1}),e(v,null,{default:t(()=>[e(N,{options:o(D),"onUpdate:value":O,clearable:"",filterable:"",placeholder:"Pilih Tujuan"},null,8,["options"])]),_:1}),e(v,null,{default:t(()=>[e(N,{options:o(L),"onUpdate:value":W,clearable:"",filterable:"",placeholder:"Pilih Status"},null,8,["options"])]),_:1})]),_:1}),b("div",We,[o(c)?(f(),k(J,{key:0})):(f(),k(ne,{key:1,"x-scrollable":""},{default:t(()=>[e(ae,{"bottom-bordered":!1,bordered:!1,"single-line":!0},{default:t(()=>[e(X,null,{default:t(()=>[e(A,null,{default:t(()=>[e(_,null,{default:t(()=>[n("No")]),_:1}),e(_,null,{default:t(()=>[n("ID Manifest")]),_:1}),e(_,null,{default:t(()=>[n("No. DO")]),_:1}),e(_,null,{default:t(()=>[n("Tujuan")]),_:1}),e(_,{style:{"text-align":"center"}},{default:t(()=>[n("Qty Packing")]),_:1}),e(_,{style:{"text-align":"center"}},{default:t(()=>[n("Qty Load")]),_:1}),e(_,{style:{"text-align":"center"}},{default:t(()=>[n("Sisa Vol (cm"),He,n(")")]),_:1}),e(_,null,{default:t(()=>[n("Tipe Pengiriman")]),_:1}),e(_,{style:{"text-align":"center"}},{default:t(()=>[n("Status")]),_:1}),e(_,null,{default:t(()=>[n("Aksi")]),_:1})]),_:1})]),_:1}),e(te,null,{default:t(()=>{var d,M;return[((M=(d=o(g))==null?void 0:d.list)==null?void 0:M.length)>0?(f(!0),h(re,{key:0},de(o(g).list,(s,T)=>(f(),k(A,{key:T},{default:t(()=>[e(u,{"data-label":"No"},{default:t(()=>[n(r(o(l).limit*(o(l).page-1)+(T+1)),1)]),_:2},1024),e(u,{"data-label":"ID Manifest"},{default:t(()=>[n(r(s.code),1)]),_:2},1024),e(u,{"data-label":"No. DO"},{default:t(()=>[n(r(s.do.code),1)]),_:2},1024),e(u,{"data-label":"Tujuan"},{default:t(()=>[n(r(s.do.destination.name),1)]),_:2},1024),e(u,{"data-label":"Qty Packing",style:{"text-align":"center"}},{default:t(()=>[n(r(a.$filters.toNumber(s.total.packing)),1)]),_:2},1024),e(u,{"data-label":"Qty Load",style:{"text-align":"center"}},{default:t(()=>[n(r(a.$filters.toNumber(s.total.qty)),1)]),_:2},1024),e(u,{"data-label":"Sisa Vol (cm3)",style:{"text-align":"center"}},{default:t(()=>[n(r(a.$filters.toNumber(s.volume)),1)]),_:2},1024),e(u,{"data-label":"Tipe Pengiriman"},{default:t(()=>[n(r(s.delivery_type),1)]),_:2},1024),e(u,{"data-label":"Status",style:{"text-align":"center"}},{default:t(()=>[e(Y,{round:"",bordered:!1,type:s.status=="siap_dikirim"?"warning":s.status=="agregasi"?"error":s.status=="loading"?"info":"success"},{icon:t(()=>[e($,{component:s.status=="siap_dikirim"?o(Le):s.status=="agregasi"?o(Be):s.status=="loading"?o(Re):o(je)},null,8,["component"])]),default:t(()=>[b("span",Fe,r(o(V).AssignDriver(s.status)),1)]),_:2},1032,["type"])]),_:2},1024),e(u,{"data-label":"Aksi"},{default:t(()=>{var U;return[e(ee,{placement:"bottom-end",options:(U=s.driver_info)!=null&&U.drivers?j(s._id):R(s._id),"show-arrow":!0,onSelect:E},{default:t(()=>[e(Z,{tertiary:""},{icon:t(()=>[e($,null,{default:t(()=>[e(o(Ee))]),_:1})]),_:1})]),_:2},1032,["options"])]}),_:2},1024)]),_:2},1024))),128)):(f(),h("tr",Ke,Ge))]}),_:1})]),_:1})]),_:1})),b("div",Je,[e(oe,{page:o(l).page,"onUpdate:page":[i[1]||(i[1]=d=>o(l).page=d),p],"page-size":o(l).limit,"onUpdate:pageSize":[i[2]||(i[2]=d=>o(l).limit=d),I],"page-count":o(g).total_page,"page-slot":7,"show-size-picker":o(g).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])])])])}}});typeof P=="function"&&P(Xe);export{Xe as default};

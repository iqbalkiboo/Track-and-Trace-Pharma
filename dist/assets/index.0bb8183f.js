import{_ as de}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as pe}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as P,o as p,c as b,a as g,u as me,E as fe,r as m,a1 as ge,f as he,p as be,k as e,w as t,q as s,i as a,h as M,F as $,g as B,t as d,N as ve,ah as ke,j as ye,af as we,am as xe,an as Ce,ak as Se,a7 as $e,a8 as je,aP as De,aQ as Le,aR as Me,aS as Ne,a9 as Te,K as Re,y as ze,aT as Be,aa as Ve,ab as Oe,ag as Ae,v as Pe}from"./index.21c0d750.js";import{r as x}from"./render-icon.8c81e0de.js";import{l as V}from"./loading.ceda1b09.js";import{S as Ue}from"./setStatus.eab5cece.js";import{_ as Ie}from"./modal-reject.vue_vue_type_script_setup_true_lang.8e8b54c8.js";import{E as Ke}from"./EllipsisVertical.56989e7a.js";import{S as O}from"./SearchOutline.47b929a4.js";import{L as A}from"./LocationOutline.22b247fa.js";import{C as Qe}from"./CheckmarkCircleOutline.8fddcae1.js";import"./getCompanyId.7d0eb93b.js";const Ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Fe=g("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M416 128L192 384l-96-96"},null,-1),qe=[Fe],He=P({name:"CheckmarkOutline",render:function(j,D){return p(),b("svg",Ee,qe)}}),Ge={class:"body-tnt"},Je={class:"card-tnt"},We={class:"table-tnt"},Xe=g("sup",null,"3",-1),Ye={style:{"text-transform":"capitalize"}},Ze={key:1},et=g("td",{colspan:"10",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),tt=[et],at={class:"table-footer"},ft=P({__name:"index",setup(U){const j=me(),D=fe(),I=new Ue,C=m(!0),f=m(!1),v=m({}),N=m(0),u=m({code:"",sort:"desc",delivery_type:"direct_kendaraan",status:"driver_assigned,reject_submit,shipping",page:1,limit:10}),S=m({code:""}),i=m({show:m(!1),type:"",icon:ge(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),h=m({show:!1,data:{}});function K(c){let o=[];return c.status==="reject_submit"?(o=[],o.push({label:"Terima Reject",key:"reject",icon:x(He),disabled:!1},{label:"Detail",key:"detail",icon:x(O),disabled:!1},{label:"Lacak Manifest",key:"lacak",icon:x(A),disabled:!1})):(o=[],o.push({label:"Detail",key:"detail",icon:x(O),disabled:!1},{label:"Lacak Manifest",key:"lacak",icon:x(A),disabled:!1})),o}function Q(c,o,y){switch(c){case"detail":j.push({path:`/pengiriman/loading-driver/${o}/detail`});break;case"lacak":j.push({path:`/lacak/manifest/${o}`});break;case"reject":S.value.code=y.code,q();break}}he(()=>{k()});async function k(){C.value=!0,f.value=!0,i.value.show=!1,await V.getManifest(u.value).then(c=>{v.value=c.data,C.value=!1,f.value=!1}).catch(c=>{C.value=!1,f.value=!1;const o=c.response.data;D.error(o.message)})}function E(){u.value.page=1,clearTimeout(N.value),N.value=setTimeout(function(){k()},600)}function F(c){u.value.page=1,u.value.limit=c,k()}function q(){h.value.show=!0,h.value.data.code=S.value.code}function T(){h.value.show=!1}function H(){f.value=!0;const c={manifest_code:S.value.code};V.rejectAccept(c).then(()=>{T(),setTimeout(()=>{G(),f.value=!1},300)}).catch(o=>{f.value=!1;const y=o.response.data;D.error(y.message)})}function G(){i.value.type="success",i.value.icon=Qe,i.value.iconColor="#219653",i.value.title="Berhasil",i.value.subtitle=`Reject Manifest ${S.value.code} telah berhasil. Assign Driver lainnya?`,i.value.show=!0}return(c,o)=>{const y=we,J=xe,W=Ce,X=Se,Y=$e,Z=je,ee=pe,r=De,R=Le,te=Me,_=Ne,ae=Te,L=Re,ne=ze,oe=Be,se=Ve,le=Oe,ie=Ae,ce=be("router-link"),ue=Pe,re=de;return p(),b($,null,[g("div",Ge,[e(y,{style:{"margin-bottom":"4px"}},{default:t(()=>[s("Loading Driver")]),_:1}),e(W,null,{default:t(()=>[e(J,null,{default:t(()=>[s("Loading Driver")]),_:1})]),_:1}),g("div",Je,[e(Z,{gutter:"16"},{default:t(()=>[e(Y,{span:6},{default:t(()=>[e(X,{value:a(u).code,"onUpdate:value":[o[0]||(o[0]=n=>a(u).code=n),E],clearable:"",placeholder:"Cari Kode Manifest"},null,8,["value"])]),_:1})]),_:1}),g("div",We,[a(C)?(p(),M(ee,{key:0})):(p(),M(le,{key:1,"x-scrollable":""},{default:t(()=>[e(se,{"single-line":!0},{default:t(()=>[e(te,null,{default:t(()=>[e(R,{style:{"border-radius":"20px"}},{default:t(()=>[e(r,null,{default:t(()=>[s("No")]),_:1}),e(r,null,{default:t(()=>[s("Kode Manifest")]),_:1}),e(r,null,{default:t(()=>[s("Kode DO")]),_:1}),e(r,null,{default:t(()=>[s("Tujuan")]),_:1}),e(r,{style:{"text-align":"right"}},{default:t(()=>[s("Qty Packing")]),_:1}),e(r,{style:{"text-align":"right"}},{default:t(()=>[s("Qty Load")]),_:1}),e(r,{style:{"text-align":"right"}},{default:t(()=>[s("Volume(cm"),Xe,s(")")]),_:1}),e(r,null,{default:t(()=>[s("Tipe Pengiriman")]),_:1}),e(r,{style:{"text-align":"center"}},{default:t(()=>[s("Status")]),_:1}),e(r,null,{default:t(()=>[s("Driver")]),_:1}),e(r,{style:{"text-align":"center"}},{default:t(()=>[s("Aksi")]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[a(v).list.length>0?(p(!0),b($,{key:0},B(a(v).list,(n,z)=>(p(),M(R,{key:z},{default:t(()=>[e(_,{"data-label":"No"},{default:t(()=>[s(d(a(u).limit*(a(u).page-1)+(z+1)),1)]),_:2},1024),e(_,{"data-label":"Kode Manifest"},{default:t(()=>[s(d(n.code),1)]),_:2},1024),e(_,{"data-label":"No. DO"},{default:t(()=>{var l;return[s(d((l=n.do)==null?void 0:l.code),1)]}),_:2},1024),e(_,{"data-label":"Tujuan"},{default:t(()=>{var l,w;return[s(d((w=(l=n.do)==null?void 0:l.destination)==null?void 0:w.name),1)]}),_:2},1024),e(_,{"data-label":"Qty Packing",style:{"text-align":"right"}},{default:t(()=>{var l;return[s(d(c.$filters.toNumber((l=n.total)==null?void 0:l.packing)),1)]}),_:2},1024),e(_,{"data-label":"Qty Load",style:{"text-align":"right"}},{default:t(()=>{var l;return[s(d(c.$filters.toNumber((l=n.total)==null?void 0:l.qty)),1)]}),_:2},1024),e(_,{"data-label":"Volume (cm3)",style:{"text-align":"right"}},{default:t(()=>[s(d(c.$filters.toNumber(n.volume)),1)]),_:2},1024),e(_,{"data-label":"Tipe Pengiriman"},{default:t(()=>[s(d(n.delivery_type),1)]),_:2},1024),e(_,{"data-label":"Status",style:{"text-align":"center"}},{default:t(()=>[e(ae,{round:"",bordered:!1,type:n.status=="siap_dikirim"?"warning":n.status=="agregasi"?"error":n.status=="Loaded"?"info":"success"},{default:t(()=>[g("span",Ye,d(a(I).LoadingDriver(n.status)),1)]),_:2},1032,["type"])]),_:2},1024),e(_,{"data-label":"Driver"},{default:t(()=>{var l;return[(p(!0),b($,null,B((l=n.driver_info)==null?void 0:l.drivers,(w,_e)=>(p(),b("div",{key:_e},d(w.is_assigned?w.name:""),1))),128))]}),_:2},1024),e(_,{"data-label":"Aksi",style:{"text-align":"center"}},{default:t(()=>[e(ne,{placement:"bottom-end",options:K(n),"show-arrow":!0,onSelect:l=>Q(l,n._id,n)},{default:t(()=>[e(L,{tertiary:""},{icon:t(()=>[e(a(ve),null,{default:t(()=>[e(a(Ke))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])]),_:2},1024)]),_:2},1024))),128)):(p(),b("tr",Ze,tt))]),_:1})]),_:1})]),_:1})),g("div",at,[e(ie,{page:a(u).page,"onUpdate:page":[o[1]||(o[1]=n=>a(u).page=n),k],"page-size":a(u).limit,"onUpdate:pageSize":[o[2]||(o[2]=n=>a(u).limit=n),F],"page-count":a(v).total_page,"page-slot":7,"show-size-picker":a(v).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])])])]),e(Ie,{show:a(h).show,"onUpdate:show":o[3]||(o[3]=n=>a(h).show=n),data:a(h).data,"onUpdate:data":o[4]||(o[4]=n=>a(h).data=n),"is-btn-loading":a(f),"onClick:close":T,"onClick:confirm":H},null,8,["show","data","is-btn-loading"]),e(re,{show:a(i).show,"onUpdate:show":o[5]||(o[5]=n=>a(i).show=n),icon:a(i).icon,"icon-color":a(i).iconColor,"hide-icon":a(i).hideIcon,title:a(i).title,subtitle:a(i).subtitle},{default:t(()=>[e(ue,{justify:"center"},{default:t(()=>[a(i).type=="success"?(p(),b($,{key:0},[e(L,{color:"#828282",class:"button-tnt",onClick:ke(k,["prevent"])},{default:t(()=>[s(" Tutup ")]),_:1},8,["onClick"]),e(ce,{to:"/pengiriman/assign-driver",class:"text-decoration-none"},{default:t(()=>[e(L,{loading:a(f),color:"#219653",class:"button-tnt"},{default:t(()=>[s(" Assign Driver ")]),_:1},8,["loading"])]),_:1})],64)):ye("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{ft as default};

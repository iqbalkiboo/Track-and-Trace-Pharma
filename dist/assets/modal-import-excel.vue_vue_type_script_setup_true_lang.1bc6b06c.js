import{s as b}from"./serialisasi.378d5040.js";import{d as L,E as N,r as u,o as f,h as k,w as a,k as t,q as m,t as T,i as l,c as S,j as y,S as V,a as z,aJ as R,ak as j,K as q,aM as A,v as $,L as H,M as J}from"./index.21c0d750.js";const K="/assets/serialisasi.792eacc0.xlsx",O="/assets/serialisasi-bon.dad9a1d0.xlsx",P=z("p",{style:{"font-size":"13px","margin-top":"0","margin-bottom":"0"}},"Unggah File",-1),G=["href"],I=["href"],Q=z("p",{style:{"font-size":"13px","margin-top":"0","margin-bottom":"8px"}},"Alasan",-1),Y=L({__name:"modal-import-excel",props:{isShowModal:{type:Boolean},type:{},id:{}},emits:["update:isShowModal","hideModal","getData"],setup(M,{emit:h}){const i=M,r=N(),n=u(!1),v=u(0),D=u(null),d=u({}),_=u("");function B(e){var s;["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].indexOf(String((s=e.file.file)==null?void 0:s.type))===-1?r.error("File yang diupload bukan excel, silakan upload ulang"):(d.value.name=e.file.name,d.value.file=e.file.file,v.value=e.fileList.length)}function C(){if(n.value=!0,i.type==="bon"){const e=new FormData;e.append("reception_id",String(i.id)),e.append("file",d.value.file),e.append("reason_of_adding_qty",_.value),b.importSerialize(e).then(()=>{n.value=!1,r.success("Berhasil import data bon serialisasi"),h("getData"),g()}).catch(o=>{const s=o.response.data;r.error(s.message),n.value=!1})}else{const e=new FormData;e.append("file",d.value.file),b.importSerialize(e).then(()=>{n.value=!1,r.success("Berhasil import data serialisasi"),h("getData"),g()}).catch(o=>{const s=o.response.data;r.error(s.message),n.value=!1})}}const g=()=>{setTimeout(()=>{h("hideModal")},100)};return(e,o)=>{const s=R,w=j,x=q,E=A,p=$,F=H,U=J;return f(),k(U,{show:i.isShowModal,"onUpdate:show":o[2]||(o[2]=c=>e.$emit("update:isShowModal",c))},{default:a(()=>[t(F,{style:{width:"470px","--n-border-radius":"10px"},"content-style":"padding: 15px 20px 28px 20px;",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:a(()=>[t(p,{vertical:"",size:25},{default:a(()=>[t(s,{style:{"margin-bottom":"0"}},{default:a(()=>[m(T(i.type==="bon"?"Upload Serialisasi Tambahan":"Upload Data Excel"),1)]),_:1}),t(p,{vertical:"",size:14},{default:a(()=>[t(p,{vertical:"",size:8},{default:a(()=>[P,t(p,null,{default:a(()=>[t(w,{value:l(d).name,"onUpdate:value":o[0]||(o[0]=c=>l(d).name=c),type:"text",placeholder:"File excel..",readonly:!0,style:{width:"16rem"}},null,8,["value"]),t(E,{ref_key:"uploadExcelRef",ref:D,action:"","default-upload":!1,"show-file-list":!1,onChange:B},{default:a(()=>[t(x,{loading:l(n),color:"#219653",class:"button-tnt"},{default:a(()=>[m(" Pilih Excel ")]),_:1},8,["loading"])]),_:1},512)]),_:1}),i.type!=="bon"?(f(),S("a",{key:0,href:l(K),download:"",style:{"font-size":"13px",color:"#219653"}},"Download Contoh File",8,G)):y("",!0),i.type==="bon"?(f(),S("a",{key:1,href:l(O),download:"",style:{"font-size":"13px",color:"#219653"}},"Download Contoh File",8,I)):y("",!0)]),_:1}),i.type==="bon"?(f(),k(p,{key:0,vertical:"",size:0},{default:a(()=>[Q,t(w,{value:l(_),"onUpdate:value":o[1]||(o[1]=c=>V(_)?_.value=c:null),type:"text",placeholder:"Alasan",style:{width:"100%"}},null,8,["value"])]),_:1})):y("",!0)]),_:1}),t(p,{justify:"center"},{default:a(()=>[t(x,{loading:l(n),color:"#828282",class:"button-tnt",onClick:g},{default:a(()=>[m(" Batalkan ")]),_:1},8,["loading"]),t(x,{disabled:l(v)===0,loading:l(n),color:"#219653",class:"button-tnt",style:{width:"110px"},onClick:C},{default:a(()=>[m(" Upload ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}});export{Y as _};

import{_ as de}from"./t-permission-modal.bdf6acbc.js";import{_ as ue}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as _e}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as ce,b as me,u as fe,E as ge,r as m,f as ye,aF as ve,p as Y,o as i,c as b,a as r,i as a,k as e,h as g,w as t,q as o,t as d,j as z,F as Q,g as T,S as Z,af as he,s as xe,v as be,aJ as ke,ad as ee,ae as we,ac as ze,K as Be,L as Re,ag as Ce}from"./index.21c0d750.js";import{c as te}from"./constant.549d5c21.js";import{m as q}from"./master-warehouse.353b4b3b.js";import"./CheckmarkCircleOutline.8fddcae1.js";import"./getCompanyId.7d0eb93b.js";const Pe={class:"body-tnt"},Se={key:0,class:"card-tnt"},je={class:"card-tnt",style:{border:"1px solid #E5E5E5","margin-top":"0",padding:"14px","text-align":"center"}},Ne={class:"card-tnt",style:{border:"1px solid #E5E5E5","margin-top":"0",padding:"14px","text-align":"center"}},Ee={class:"card-tnt",style:{border:"1px solid #E5E5E5","margin-top":"0",padding:"14px","text-align":"center"}},Ue={key:0,class:"card-tnt"},$e={style:{display:"flex","justify-content":"space-between"}},De={style:{margin:"auto"}},Qe={style:{display:"flex","justify-content":"center","margin-top":"10px"}},Ve={key:2,class:"card-tnt"},Le={style:{display:"flex","justify-content":"space-between"}},Me={style:{margin:"auto"}},Fe={style:{display:"flex","justify-content":"center","margin-top":"10px"}},Ie={key:4,class:"card-tnt"},Je={style:{display:"flex","justify-content":"space-between"}},Ke={style:{margin:"auto"}},Te={style:{display:"flex","justify-content":"center","margin-top":"10px"}},qe={class:"bottom-action-button"},Oe={class:"action-item"},at=ce({__name:"barcode",setup(We){const V=me(),ae=fe(),L=ge(),M=m(!0),C=m(!0),S=m(!0),f=m({}),u=m({}),B=m({}),v=m({warehouse_id:V.params.id,sort:"desc",sort_field:"created_at",page:1,limit:10}),O=m({warehouse_id:V.params.id,sort:"desc",sort_field:"created_at",page:1,limit:10}),j=m({show:!1});ye(()=>{ve.isGranted(te.accessPrivileges.warehouse+".print")?se():j.value.show=!0});async function se(){M.value=!0,await ne(),await N(),await F(),M.value=!1}async function ne(){const l=V.params.id;await q.getDetailWarehouse(l).then(n=>{f.value=n.data}).catch(n=>{const h=n.response.data;L.error(h.message)})}async function N(){C.value=!0,await q.getRackPallete(v.value).then(l=>{u.value=l.data,C.value=!1}).catch(l=>{const n=l.response.data;L.error(n.message),C.value=!1})}async function F(){S.value=!0,await q.getBin(O.value).then(l=>{B.value=l.data,S.value=!1}).catch(l=>{const n=l.response.data;L.error(n.message),S.value=!1})}function W(l){v.value.limit=l,N()}function oe(l){O.value.limit=l,F()}const p=m({type:"",totalRack:0,totalBin:0}),E=m(!1),P=m(!1);function I(l,n,h){p.value.type=l,p.value.totalRack=n,p.value.totalBin=h,P.value=!0}function le(){p.value.type==="rack"?(console.log(u.value.list),localStorage.setItem("labels_wh",JSON.stringify(u.value.list))):p.value.type==="pallete"?localStorage.setItem("labels_wh",JSON.stringify(u.value.list)):localStorage.setItem("labels_wh",JSON.stringify(B.value.list)),localStorage.setItem("is_label_wh_open","0");const l=ae.resolve({path:"/print/labels-warehouse"});window.open(l.href,"_blank"),P.value=!1}return(l,n)=>{const h=_e,ie=he,U=xe,_=be,$=ke,c=ee,y=we,k=ze,R=Be,J=Y("vue-qrcode"),w=Re,K=Ce,re=Y("router-link"),D=ee,G=ue,pe=de;return i(),b(Q,null,[r("div",Pe,[a(M)?(i(),b("div",Se,[e(h)])):(i(),g(_,{key:1,vertical:"",size:24},{default:t(()=>[e(_,{vertical:"",size:0},{default:t(()=>[e(ie,{style:{"margin-bottom":"4px"}},{default:t(()=>[o(d(a(f).name),1)]),_:1}),e(U,{style:{"margin-bottom":"0"}},{default:t(()=>{var s,x,H,A,X;return[o(d(((s=a(f).address)==null?void 0:s.detail)+", "+((x=a(f).address)==null?void 0:x.urban_village.name)+", "+((H=a(f).address)==null?void 0:H.sub_district.name)+", "+((A=a(f).address)==null?void 0:A.district.name)+", "+((X=a(f).address)==null?void 0:X.province.name)),1)]}),_:1})]),_:1}),e(w,{style:{"border-radius":"12px"}},{default:t(()=>[e(_,{size:10,vertical:""},{default:t(()=>[e($,{style:{"font-size":"14px","margin-bottom":"0"}},{default:t(()=>[o("Pratinjau")]),_:1}),e(y,{cols:"3","item-responsive":"",responsive:"screen","x-gap":"16","y-gap":"16"},{default:t(()=>[e(c,{span:"3 m:1"},{default:t(()=>[r("div",je,[e(U,{style:{"font-size":"14px","margin-bottom":"0"}},{default:t(()=>[o(d(a(f).counts.rack)+" Rack ",1)]),_:1})])]),_:1}),e(c,{span:"3 m:1"},{default:t(()=>[r("div",Ne,[e(U,{style:{"font-size":"14px","margin-bottom":"0"}},{default:t(()=>[o(d(a(f).counts.pallete)+" Pallete ",1)]),_:1})])]),_:1}),e(c,{span:"3 m:1"},{default:t(()=>[r("div",Ee,[e(U,{style:{"font-size":"14px","margin-bottom":"0"}},{default:t(()=>[o(d(a(f).counts.bin)+" Bin ",1)]),_:1})])]),_:1})]),_:1}),a(C)?(i(),b("div",Ue,[e(h)])):(i(),g(w,{key:1,style:{"border-radius":"12px"}},{default:t(()=>[e(_,{vertical:""},{default:t(()=>[e(y,{cols:"2","item-responsive":"",responsive:"screen"},{default:t(()=>[e(c,{span:"2 s:1"},{default:t(()=>[e($,{style:{"font-size":"14px","margin-bottom":"0","margin-top":"0"}},{default:t(()=>[o(" Rack ")]),_:1}),z("",!0)]),_:1}),e(c,{span:"2 s:1"},{default:t(()=>[e(_,{justify:"end"},{default:t(()=>[e(R,{type:"primary",class:"button-tnt",onClick:n[0]||(n[0]=s=>I("rack",a(u).list.length,0))},{default:t(()=>[o(" Print QR Code ")]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{cols:"20","item-responsive":"",responsive:"screen","x-gap":16,"y-gap":16},{default:t(()=>[(i(!0),b(Q,null,T(a(u).list,(s,x)=>(i(),g(c,{span:"20 m:4 s:10",key:x},{default:t(()=>[e(w,{style:{"border-radius":"12px","margin-top":"0"},"content-style":"padding: 5px"},{default:t(()=>[r("div",$e,[r("div",De,[e(k,{style:{"font-size":"10px","font-weight":"600","margin-bottom":"0"}},{default:t(()=>[o(d(s.name),1)]),_:2},1024),e(k,{style:{"font-size":"10px","margin-top":"5px","margin-bottom":"0"}},{default:t(()=>[o(d(s.kind==="rack"?s.erp_code:s.id_pallete),1)]),_:2},1024)]),r("div",null,[e(J,{options:{width:75},value:s.kind==="rack"?s.erp_code:s.id_pallete},null,8,["value"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),r("div",Qe,[e(K,{page:a(v).page,"onUpdate:page":[n[1]||(n[1]=s=>a(v).page=s),N],"page-count":a(u).total_page,"page-slot":7,"show-size-picker":a(u).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":W},null,8,["page","page-count","show-size-picker"])])]),_:1})]),_:1})),a(C)?(i(),b("div",Ve,[e(h)])):(i(),g(w,{key:3,style:{"border-radius":"12px"}},{default:t(()=>[e(_,{vertical:""},{default:t(()=>[e(y,{cols:"2","item-responsive":"",responsive:"screen"},{default:t(()=>[e(c,{span:"2 s:1"},{default:t(()=>[e($,{style:{"font-size":"14px","margin-bottom":"0","margin-top":"0"}},{default:t(()=>[o(" Pallete ")]),_:1}),z("",!0)]),_:1}),e(c,{span:"2 s:1"},{default:t(()=>[e(_,{justify:"end"},{default:t(()=>[l.$filters.isGranted(a(te).accessPrivileges.warehouse+".print")?(i(),g(R,{key:0,type:"primary",class:"button-tnt",onClick:n[2]||(n[2]=s=>I("pallete",a(u).list.length,0))},{default:t(()=>[o(" Print QR Code ")]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1}),e(y,{cols:"20","item-responsive":"",responsive:"screen","x-gap":16,"y-gap":16},{default:t(()=>[(i(!0),b(Q,null,T(a(u).list,(s,x)=>(i(),g(c,{span:"20 m:4 s:10",key:x},{default:t(()=>[e(w,{style:{"border-radius":"12px","margin-top":"0"},"content-style":"padding: 5px"},{default:t(()=>[r("div",Le,[r("div",Me,[e(k,{style:{"font-size":"10px","font-weight":"600","margin-bottom":"0"}},{default:t(()=>[o(d(s.name),1)]),_:2},1024),e(k,{style:{"font-size":"10px","margin-top":"5px","margin-bottom":"0"}},{default:t(()=>[o(d(s.kind==="rack"?s.erp_code:s.id_pallete),1)]),_:2},1024)]),r("div",null,[e(J,{options:{width:75},value:s.kind==="rack"?s.erp_code:s.id_pallete},null,8,["value"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),r("div",Fe,[e(K,{page:a(v).page,"onUpdate:page":[n[3]||(n[3]=s=>a(v).page=s),N],"page-count":a(u).total_page,"page-slot":7,"show-size-picker":a(u).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":W},null,8,["page","page-count","show-size-picker"])])]),_:1})]),_:1})),a(S)?(i(),b("div",Ie,[e(h)])):(i(),g(w,{key:5,style:{"border-radius":"12px"}},{default:t(()=>[e(_,{vertical:""},{default:t(()=>[e(y,{cols:"2","item-responsive":"",responsive:"screen"},{default:t(()=>[e(c,{span:"2 s:1"},{default:t(()=>[e($,{style:{"font-size":"14px","margin-bottom":"0","margin-top":"0"}},{default:t(()=>[o(" Bin ")]),_:1}),z("",!0)]),_:1}),e(c,{span:"2 s:1"},{default:t(()=>[e(_,{justify:"end"},{default:t(()=>[e(R,{type:"primary",class:"button-tnt",onClick:n[4]||(n[4]=s=>I("bin",0,a(B).list.length))},{default:t(()=>[o(" Print QR Code ")]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{cols:"20","item-responsive":"",responsive:"screen","x-gap":16,"y-gap":16},{default:t(()=>[(i(!0),b(Q,null,T(a(B).list,(s,x)=>(i(),g(c,{span:"20 m:4 s:10",key:x},{default:t(()=>[e(w,{style:{"border-radius":"12px","margin-top":"0"},"content-style":"padding: 5px"},{default:t(()=>[r("div",Je,[r("div",Ke,[e(k,{style:{"font-size":"10px","font-weight":"600","margin-bottom":"0"}},{default:t(()=>[o(d(s.name),1)]),_:2},1024),e(k,{style:{"font-size":"10px","margin-top":"5px","margin-bottom":"0"}},{default:t(()=>[o(d(s.id_bin),1)]),_:2},1024)]),r("div",null,[e(J,{options:{width:75},value:s.id_bin},null,8,["value"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),r("div",Te,[e(K,{page:a(v).page,"onUpdate:page":[n[5]||(n[5]=s=>a(v).page=s),F],"page-count":a(B).total_page,"page-slot":7,"show-size-picker":a(B).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":oe},null,8,["page","page-count","show-size-picker"])])]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})),r("div",qe,[r("div",Oe,[e(re,{to:{name:"setting-master-warehouse-id"},class:"text-decoration-none"},{default:t(()=>[e(R,{color:"#828282",class:"button-tnt",style:{width:"120px"}},{default:t(()=>[o("Kembali")]),_:1})]),_:1}),z("",!0)])])]),e(G,{show:a(P),"onUpdate:show":n[7]||(n[7]=s=>Z(P)?P.value=s:null),"hide-icon":"",title:"Konfirmasi QR Code"},{default:t(()=>[e(_,{vertical:"",space:24},{default:t(()=>[e(k,{style:{"text-align":"center"}},{default:t(()=>[o("Anda akan mencetak "+d(a(p).totalRack+a(p).totalBin)+" QR Code",1)]),_:1}),a(p).type=="rack"||a(p).type=="all"?(i(),g(y,{key:0,cols:"2"},{default:t(()=>[e(D,{span:"1"},{default:t(()=>[o("Rack :")]),_:1}),e(D,{span:"1",style:{"text-align":"right"}},{default:t(()=>[o(d(a(p).totalRack),1)]),_:1})]),_:1})):z("",!0),a(p).type=="bin"||a(p).type=="all"?(i(),g(y,{key:1,cols:"2"},{default:t(()=>[e(D,{span:"1"},{default:t(()=>[o("Bin :")]),_:1}),e(D,{span:"1",style:{"text-align":"right"}},{default:t(()=>[o(d(a(p).totalBin),1)]),_:1})]),_:1})):z("",!0),e(_,{justify:"center",style:{"margin-top":"20px"}},{default:t(()=>[e(R,{type:"primary",class:"button-tnt",onClick:le},{default:t(()=>[o(" Print QR Code ")]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),e(G,{show:a(E),"onUpdate:show":n[9]||(n[9]=s=>Z(E)?E.value=s:null),title:"Print Barcode Berhasil",subtitle:"Selamat "+(a(p).totalRack+a(p).totalBin)+" barcode berhasil diprint"},{default:t(()=>[e(_,{justify:"center"},{default:t(()=>[e(R,{type:"primary",class:"button-tnt",onClick:n[8]||(n[8]=s=>E.value=!1)},{default:t(()=>[o("Kembali")]),_:1})]),_:1})]),_:1},8,["show","subtitle"]),e(pe,{show:a(j).show,"onUpdate:show":n[10]||(n[10]=s=>a(j).show=s),"onClick:close":n[11]||(n[11]=s=>a(j).show=!1)},null,8,["show"])],64)}}});export{at as default};

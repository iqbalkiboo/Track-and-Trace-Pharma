import{m as g}from"./master-warehouse.353b4b3b.js";import{d as E,E as P,r as i,f as z,o as N,h as U,w as n,k as o,q as h,i as l,as as V,H,I as L,J as O,K as T,v as j,L as I,M as J}from"./index.21c0d750.js";const A=E({__name:"default-location",props:{isShowModal:{type:Boolean},value:{}},emits:["hideModal","click:save","update:isShowModal"],setup(B,{emit:f}){const v=B,m=P(),u=i({}),a=i({}),M=i(null),b=i();b.value={building_id:{required:!0,message:"Building tidak boleh kosong",trigger:"blur"},room_id:{required:!0,message:"Room tidak boleh kosong",trigger:"blur"}};const p=i([]),c=i([]),y=()=>{setTimeout(()=>{f("hideModal")},100)};z(()=>{a.value=v.value,x()});async function x(){p.value=[],await g.getBuilding({limit:-1}).then(s=>{s.data.list.forEach(t=>{p.value.push({value:t.id,label:t.name})})}).catch(s=>{const e=s.response.data;m.error(e.message)})}async function R(s){a.value.room_id="",await g.getDetailBuilding(s).then(e=>{u.value=e.data,a.value.warehouse_name=u.value.warehouse.name,a.value.warehouse_id=u.value.warehouse.id,S(u.value.warehouse.id,u.value.id)}).catch(e=>{const t=e.response.data;m.error(t.message)})}async function S(s,e){c.value=[],await g.getRoom({limit:-1,warehouse_id:s,building_id:e}).then(t=>{t.data.list.forEach(r=>{c.value.push({value:r.id,label:r.name})})}).catch(t=>{const d=t.response.data;m.error(d.message)})}function D(){f("click:save",a.value)}return(s,e)=>{const t=V,d=H,r=L,W=O,w=T,k=j,q=I,C=J;return N(),U(C,{show:v.isShowModal,"onUpdate:show":e[2]||(e[2]=_=>s.$emit("update:isShowModal",_))},{default:n(()=>[o(q,{style:{width:"470px","--n-border-radius":"10px"},"content-style":"padding: 15px 20px 28px 20px;",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:n(()=>[o(k,{vertical:"",size:25},{default:n(()=>[o(t,{style:{"font-size":"16px","margin-bottom":"0"}},{default:n(()=>[h("Edit Default Location")]),_:1}),o(W,{ref_key:"formRef",ref:M,class:"form-tnt",model:l(a),rules:l(b),"show-require-mark":!1},{default:n(()=>[o(r,{path:"building",label:"Pilih Warehouse Building"},{default:n(()=>[o(d,{value:l(a).building_id,"onUpdate:value":[e[0]||(e[0]=_=>l(a).building_id=_),R],options:l(p),placeholder:"Pilih Warehouse Building",style:{width:"100%"}},null,8,["value","options"])]),_:1}),o(r,{path:"room",label:"Pilih Warehouse Room"},{default:n(()=>[o(d,{value:l(a).room_id,"onUpdate:value":e[1]||(e[1]=_=>l(a).room_id=_),disabled:l(c).length==0,options:l(c),placeholder:"Pilih Warehouse Room",style:{width:"100%"}},null,8,["value","disabled","options"])]),_:1})]),_:1},8,["model","rules"]),o(k,{justify:"center"},{default:n(()=>[o(w,{color:"#828282",class:"button-tnt",onClick:y},{default:n(()=>[h("Batalkan")]),_:1}),o(w,{color:"#219653",class:"button-tnt",onClick:D},{default:n(()=>[h("Simpan")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}});export{A as _};

import{_ as ot}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{h as D}from"./moment.62d3fb0a.js";import{d as st,E as it,r as b,f as lt,e as _t,p as rt,o as v,c as M,i as s,k as t,h as C,w as e,a as _,t as l,q as n,F as j,g as J,j as E,x as ft,s as dt,v as ct,L as ut,a7 as mt,a8 as pt,aP as yt,aQ as gt,aR as xt,aS as vt,aT as ht,aa as zt,R as bt,a4 as O}from"./index.21c0d750.js";import{l as q}from"./loading.ceda1b09.js";import{m as wt}from"./master-perusahaan.ac657e6f.js";import"./getCompanyId.7d0eb93b.js";import"./getHoldingId.48f570fc.js";const kt={style:{padding:"1rem"}},Dt={key:0,class:"card-tnt"},Mt={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Pt={style:{"padding-right":"20px"}},Tt={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Ct={style:{"margin-left":"2rem"}},Nt={style:{"font-size":"14px","font-weight":"600"}},$t={class:"",style:{"margin-top":"0"}},Bt={style:{"margin-bottom":"1.5rem"}},Lt={style:{"margin-bottom":"1.5rem"}},Rt={style:{"margin-bottom":"1.5rem"}},jt={style:{"margin-bottom":"1.5rem"}},Et={style:{"margin-bottom":"1.5rem"}},qt={style:{"text-align":"right","margin-right":"6rem","margin-bottom":"3rem"}},Kt={style:{"margin-bottom":"0.5rem"}},Vt={style:{"margin-bottom":"0.5rem"}},Ft={style:{"margin-bottom":"0.5rem"}},It={style:{"margin-bottom":"0.5rem"}},Qt={style:{"margin-bottom":"0.5rem"}},St={style:{"margin-bottom":"0.5rem"}},At={style:{"margin-bottom":"0.5rem"}},Ht=st({__name:"loading-manifest",setup(Jt){const P=it(),T=b(),N=b(!1),$=localStorage.getItem("manifest_id"),r=b({}),G=b({}),y=b({}),B=b({});lt(()=>{T.value=_t.getAuth(),U()});async function U(){N.value=!0,W(),Y(),Z(),await X(),N.value=!1,setTimeout(()=>{window.print()},300)}async function W(){const i={limit:1e3};await q.getPrintLoading($,i).then(async c=>{G.value=c.data}).catch(c=>{const g=c.response.data;P.error(g.message)})}async function X(){await q.getDetailManifest($).then(async i=>{r.value=i.data}).catch(i=>{const c=i.response.data;P.error(c.message)})}async function Y(){const i={manifest_id:$,limit:1e3};await q.getManifestLog(i).then(async c=>{B.value=c.data}).catch(c=>{const g=c.response.data;P.error(g.message)})}async function Z(){let i="";T.value.xxtype==="5up3r4dm1n"?i=T.value["xx-usertype-access"].company_id:i=T.value.users.user_type.id,await wt.getDetailCompany(i).then(c=>{y.value=c.data}).catch(c=>{const g=c.response.data;P.error(g.message)})}function tt(i){var d,h,x,z;const c=i==null?void 0:i.detail,g=(d=i==null?void 0:i.urban_village)==null?void 0:d.name,L=(h=i==null?void 0:i.sub_district)==null?void 0:h.name,a=(x=i==null?void 0:i.district)==null?void 0:x.name,R=(z=i==null?void 0:i.province)==null?void 0:z.name;return`${c}, ${g}, ${L}, ${a}, ${R}`}return(i,c)=>{const g=ot,L=ft,a=dt,R=rt("vue-qrcode"),d=ct,h=ut,x=mt,z=pt,w=yt,K=gt,et=xt,k=vt,nt=ht,at=zt,V=bt;return v(),M("div",kt,[s(N)?(v(),M("div",Dt,[t(g)])):(v(),C(d,{key:1,vertical:"",size:10},{default:e(()=>{var F,I,Q,S,A,H;return[_("div",Mt,[_("div",Pt,[_("div",Tt,[_("div",null,[t(L,{round:"",style:{color:"yellow",backgroundColor:"#f1f1f1"},size:60,src:(F=s(y).image)!=null&&F.url?(I=s(y).image)==null?void 0:I.url:""},null,8,["src"])]),_("div",Ct,[_("div",Nt,l(s(y).name),1),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o,f,p,u,m;return[n(l(((o=s(y).address)==null?void 0:o.detail)+", "+((f=s(y).address)==null?void 0:f.urban_village.name)+", "+((p=s(y).address)==null?void 0:p.sub_district.name)+", "+((u=s(y).address)==null?void 0:u.district.name)+", "+((m=s(y).address)==null?void 0:m.province.name)),1)]}),_:1})])])]),_("div",null,[t(h,{style:{"border-radius":"10px"},"content-style":"padding: 10px"},{default:e(()=>[t(d,{vertical:""},{default:e(()=>[t(a,{style:{"font-size":"11px","margin-bottom":"10px"}},{default:e(()=>[n("Kode Manifest : "+l(s(r).code),1)]),_:1}),t(R,{options:{width:50,margin:0},value:s(r).code},null,8,["value"])]),_:1})]),_:1})])]),t(z,{cols:12,style:{display:"flex","justify-content":"space-between"}},{default:e(()=>[t(x,{span:10},{default:e(()=>[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500","margin-bottom":"0"}},{default:e(()=>[n("Kode Manifest : "+l(s(r).code),1)]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o;return[n("Kode DO : "+l((o=s(r).do)==null?void 0:o.code),1)]}),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>[n("Tanggal Pengiriman : "+l(s(D)(s(r).delivery_date).format("yyyy-MM-DD")),1)]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o,f,p,u,m;return[n(" PIC Packing : "+l((o=s(r).created_by)!=null&&o.is_superadmin?(p=(f=s(r).created_by)==null?void 0:f.superadmin)==null?void 0:p.name:(m=(u=s(r).created_by)==null?void 0:u.user)==null?void 0:m.name),1)]}),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o;return[n("Total Qty Packing : "+l((o=s(r).total)==null?void 0:o.packing),1)]}),_:1})]),_:1})]),_:1}),t(x,{span:14},{default:e(()=>[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500","margin-bottom":"0"}},{default:e(()=>{var o,f;return[n("Tujuan : "+l((f=(o=s(r).do)==null?void 0:o.destination)==null?void 0:f.name),1)]}),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o,f;return[n(l(tt((f=(o=s(r).do)==null?void 0:o.destination)==null?void 0:f.address)),1)]}),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>[n("Tipe Pengiriman : "+l(s(r).delivery_type),1)]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>[n("Tanggal Packing : "+l(s(D)(s(r).finish_aggregation).format("yyyy-MM-DD")),1)]),_:1})]),_:1})]),_:1})]),_:1}),((S=(Q=s(r))==null?void 0:Q.products)==null?void 0:S.length)>0?(v(),C(h,{key:0,style:{"border-radius":"10px"},"content-style":"padding: 5px;"},{default:e(()=>[_("div",$t,[t(at,{"bottom-bordered":!1,bordered:!1,"single-line":!0,class:"print-maniest-table"},{default:e(()=>[t(et,null,{default:e(()=>[t(K,{style:{"border-radius":"20px"}},{default:e(()=>[t(w,{style:{"font-size":"10px"}},{default:e(()=>[n("Kode Produk")]),_:1}),t(w,{style:{"font-size":"10px"}},{default:e(()=>[n("Nama Produk")]),_:1}),t(w,{style:{"font-size":"10px"}},{default:e(()=>[n("Batch")]),_:1}),t(w,{style:{"text-align":"left","font-size":"10px"}},{default:e(()=>[n("Expired Date")]),_:1}),t(w,{style:{"text-align":"right","font-size":"10px"}},{default:e(()=>[n("Qty")]),_:1})]),_:1})]),_:1}),t(nt,null,{default:e(()=>{var o;return[(v(!0),M(j,null,J((o=s(r))==null?void 0:o.products,(f,p)=>(v(),C(K,{key:p},{default:e(()=>[t(k,{style:{"font-size":"10px"}},{default:e(()=>[n(l(f.code),1)]),_:2},1024),t(k,{style:{"font-size":"10px"}},{default:e(()=>[n(l(f.name),1)]),_:2},1024),t(k,{style:{"font-size":"10px"}},{default:e(()=>[n(l(f.batch),1)]),_:2},1024),t(k,{style:{"text-align":"left","font-size":"10px"}},{default:e(()=>[n(l(s(D)(f.expired_date).format("yyyy-MM-DD")),1)]),_:2},1024),t(k,{style:{"text-align":"right","font-size":"10px"}},{default:e(()=>[n(l(f.qty_packed),1)]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})):E("",!0),t(h,{style:{"border-radius":"10px"},"content-style":"padding: 15px;"},{default:e(()=>[t(d,{vertical:""},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500","margin-bottom":"0px"}},{default:e(()=>[n("Penerima")]),_:1}),t(z,null,{default:e(()=>[t(x,{span:12},{default:e(()=>[_("div",Bt,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("Nama Penerima")]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o;return[n(l((o=s(r).receiver_info)==null?void 0:o.name),1)]}),_:1})]),_:1})]),_("div",Lt,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("No.Hp Penerima")]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o;return[n(l((o=s(r).receiver_info)==null?void 0:o.phone),1)]}),_:1})]),_:1})]),_("div",Rt,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("Email")]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o;return[n(l((o=s(r).receiver_info)==null?void 0:o.email),1)]}),_:1})]),_:1})]),_("div",jt,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("Jabatan Penerima")]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var o;return[n(l((o=s(r).receiver_info)==null?void 0:o.department),1)]}),_:1})]),_:1})])]),_:1}),t(x,{span:12},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500","margin-bottom":"0px"}},{default:e(()=>[n("Tanggal")]),_:1}),_("div",Et,[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n(l(s(D)().format("yyyy-MM-DD")),1)]),_:1})])]),_:1})]),_:1}),_("div",qt,[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n(" Tanda Tangan Penerima ")]),_:1})])]),_:1})]),_:1}),((H=(A=s(B))==null?void 0:A.list)==null?void 0:H.length)>0?(v(!0),M(j,{key:1},J(s(B).list,(o,f)=>{var p;return v(),M(j,{key:f},[(p=o.attributes)!=null&&p.receiver?(v(),C(h,{key:f,style:{"border-radius":"10px"}},{default:e(()=>[t(d,{vertical:""},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500","margin-bottom":"0px"}},{default:e(()=>[n("Penerima")]),_:1}),t(z,null,{default:e(()=>[t(x,{span:12},{default:e(()=>[_("div",Kt,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("Nama Penerima")]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var u,m;return[n(l((m=(u=o.attributes)==null?void 0:u.receiver)==null?void 0:m.name),1)]}),_:2},1024)]),_:2},1024)]),_("div",Vt,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("No.Hp Penerima")]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var u,m;return[n(l((m=(u=o.attributes)==null?void 0:u.receiver)==null?void 0:m.phone),1)]}),_:2},1024)]),_:2},1024)]),_("div",Ft,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("Email")]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>{var u,m;return[n(l((m=(u=o.attributes)==null?void 0:u.receiver)==null?void 0:m.email),1)]}),_:2},1024)]),_:2},1024)]),_("div",It,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("Jabatan Penerima")]),_:1}),t(a,{style:{"font-size":"11px"}},{default:e(()=>[n(l("?"))]),_:1})]),_:1})]),_("div",Qt,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("Foto Bukti")]),_:1}),t(V,{width:"100",style:{backgroundColor:"#f1f1f1"},src:""})]),_:1})]),_("div",St,[t(d,{vertical:"",size:0},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500"}},{default:e(()=>[n("Tanda Tangan Digital")]),_:1}),t(V,{width:"100",style:{backgroundColor:"#f1f1f1"},src:""})]),_:1})])]),_:2},1024),t(x,{span:12},{default:e(()=>[t(a,{style:{"font-size":"11px","font-weight":"500","margin-bottom":"0px"}},{default:e(()=>[n("Tanggal")]),_:1}),_("div",At,[t(a,{style:{"font-size":"11px"}},{default:e(()=>[n(l(s(D)(o.created_at).format("yyyy-MM-DD")),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):E("",!0)],64)}),128)):E("",!0)]}),_:1}))])}}});typeof O=="function"&&O(Ht);export{Ht as default};

import{h as P}from"./moment.62d3fb0a.js";import{d as $,o as r,c as b,a as d,W as I,h as g,w as e,k as t,q as a,t as u,i as l,j as z,F as B,g as D,s as O,v as S,N as E,a9 as Q,L as R,a2 as q,a3 as T,b as W,E as A,r as C,f as G,e as J,as as U,K as X,ap as Y,aq as Z,ar as ee}from"./index.21c0d750.js";import{W as te}from"./WarningOutline.87384d2c.js";import{P as ne}from"./PersonOutline.7e857e83.js";import{_ as ae}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{g as se}from"./getCompanyId.7d0eb93b.js";import{s as oe}from"./serialisasi.378d5040.js";import"./getHoldingId.48f570fc.js";const le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},re=d("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M352 176L217.6 336L160 272"},null,-1),ie=d("rect",{x:"64",y:"64",width:"384",height:"384",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),ue=[re,ie],ce=$({name:"CheckboxOutline",render:function(k,v){return r(),b("svg",le,ue)}}),de={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},_e=d("path",{d:"M384 80H128c-26 0-43 14-48 40L48 272v112a48.14 48.14 0 0 0 48 48h320a48.14 48.14 0 0 0 48-48V272l-32-152c-5-27-23-40-48-40z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),pe=d("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M48 272h144"},null,-1),me=d("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 272h144"},null,-1),fe=d("path",{d:"M192 272a64 64 0 0 0 128 0",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),ge=[_e,pe,me,fe],he=$({name:"FileTrayOutline",render:function(k,v){return r(),b("svg",de,ge)}}),ye={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ke=d("path",{d:"M336.76 161l-186.53 82.35c-10.47 4.8-6.95 20.67 4.57 20.67H244a4 4 0 0 1 4 4v89.18c0 11.52 16 15 20.78 4.56L351 175.24A10.73 10.73 0 0 0 336.76 161z",fill:"currentColor"},null,-1),ve=d("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),we=[ke,ve],xe=$({name:"NavigateCircleOutline",render:function(k,v){return r(),b("svg",ye,we)}}),be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ce=d("ellipse",{cx:"256",cy:"128",rx:"192",ry:"80",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),$e=d("path",{d:"M448 214c0 44.18-86 80-192 80S64 258.18 64 214",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),ze=d("path",{d:"M448 300c0 44.18-86 80-192 80S64 344.18 64 300",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Me=d("path",{d:"M64 127.24v257.52C64 428.52 150 464 256 464s192-35.48 192-79.24V127.24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Le=[Ce,$e,ze,Me],Ne=$({name:"ServerOutline",render:function(k,v){return r(),b("svg",be,Le)}}),Pe={key:4},je=$({__name:"t-lacak-pk",props:{list:{},pk_detail:{}},setup(h){const k=h,v=I(()=>k.list.serialize.map(n=>({name:n.name,qty:n.qty})));return(n,w)=>{const s=O,o=S,_=E,M=Q,N=R;return r(),g(o,{vertical:"",class:"lacak-card-tnt"},{default:e(()=>[t(o,{vertical:""},{default:e(()=>[t(s,{style:{"margin-bottom":"0"}},{default:e(()=>[a(u(l(P)(n.list.created_at).format("yyyy-MM-DD")),1)]),_:1}),t(s,{style:{"margin-top":"0"}},{default:e(()=>[a(u(l(P)(n.list.created_at).format("HH:mm:ss")),1)]),_:1})]),_:1}),t(N,{class:"card-active",style:{"padding-top":"0","padding-bottom":"0"}},{default:e(()=>[t(o,{vertical:"",justify:"space-between",align:"start"},{default:e(()=>[t(o,{vertical:"",size:0},{default:e(()=>{var L,f;return[n.list.total_pass>0?(r(),g(o,{key:0,align:"center",size:2},{default:e(()=>[t(_,{size:"20",style:{"margin-top":"3px","margin-right":"5px"}},{default:e(()=>[t(l(ce))]),_:1}),t(s,{style:{margin:"0"}},{default:e(()=>[a(" Qty passed : ")]),_:1}),t(s,null,{default:e(()=>[a(u(n.list.total_pass),1)]),_:1})]),_:1})):z("",!0),`Packed Level ${n.list.status_label.slice(-1)}`===n.list.status_label?(r(),g(o,{key:1,align:"center",size:2},{default:e(()=>[t(_,{size:"20",style:{"margin-top":"3px","margin-right":"5px"}},{default:e(()=>[t(l(he))]),_:1}),t(s,{style:{margin:"0"}},{default:e(()=>[a("Kemasan Level "+u(n.list.status_label.slice(-1))+" : ",1)]),_:1}),t(s,null,{default:e(()=>[a(u(n.list.serialize[n.list.serialize.length-1].qty),1)]),_:1})]),_:1})):z("",!0),n.list.total_void>0||n.list.status==="ready_to_print"||`Packed Level ${n.list.status_label.slice(-1)}`===n.list.status_label?(r(),g(o,{key:2,align:"center",size:2},{default:e(()=>[t(_,{size:"20",style:{"margin-top":"3px","margin-right":"5px"}},{default:e(()=>[t(l(te))]),_:1}),t(s,{style:{margin:"0"}},{default:e(()=>[a(" Qty void : ")]),_:1}),t(s,null,{default:e(()=>[a(u(n.list.total_void),1)]),_:1})]),_:1})):z("",!0),(f=(L=n.list.allocation)==null?void 0:L.warehouse)!=null&&f.name?(r(),g(o,{key:3,align:"center",size:2},{default:e(()=>[t(_,{size:"20",style:{"margin-top":"3px","margin-right":"5px"}},{default:e(()=>[t(l(xe))]),_:1}),t(s,{style:{margin:"0"}},{default:e(()=>[a("Lokasi Penyimpanan : ")]),_:1}),t(s,null,{default:e(()=>{var c,i;return[a(u((i=(c=n.list.allocation)==null?void 0:c.building)==null?void 0:i.name),1)]}),_:1})]),_:1})):z("",!0),n.list.status_label==="Generated"?(r(),b("div",Pe,[(r(!0),b(B,null,D(l(v),(c,i)=>(r(),g(o,{align:"center",size:2,key:i},{default:e(()=>[t(_,{size:"20",style:{"margin-top":"3px","margin-right":"5px"}},{default:e(()=>[t(l(Ne))]),_:1}),t(s,{style:{margin:"0"}},{default:e(()=>[a(u(`Qyt Serial ${c.name} : `),1)]),_:2},1024),t(s,{style:{margin:"0"}},{default:e(()=>[a(u(c.qty),1)]),_:2},1024)]),_:2},1024))),128))])):z("",!0),t(o,{align:"center",size:2},{default:e(()=>[t(_,{size:"20",style:{"margin-top":"3px","margin-right":"5px"}},{default:e(()=>[t(l(ne))]),_:1}),t(s,{style:{margin:"0"}},{default:e(()=>[a(" Created by : ")]),_:1}),t(s,null,{default:e(()=>{var c,i,y,p,x;return[a(u((c=n.list.created_by)!=null&&c.is_superadmin?(y=(i=n.list.created_by)==null?void 0:i.superadmin)==null?void 0:y.name:(x=(p=n.list.created_by)==null?void 0:p.user)==null?void 0:x.name),1)]}),_:1})]),_:1})]}),_:1}),t(o,{vertical:"",align:"center"},{default:e(()=>[t(M,{bordered:!1,round:"",type:"info"},{default:e(()=>[a(u(n.list.status_label),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});q.interceptors.request.use(T.auth);const Be={async getLacalPk(h){return h.company_id=se,(await q.get("/reception-log/v1/list",{params:h})).data}},De={key:1,class:"body-tnt"},Oe={class:"card-tnt"},Qe=$({__name:"[id]",setup(h){const k=W(),v=A(),n=C(),w=C(!0),s=C(!1),o=C({}),_=C({}),M=C({dir:"desc",sort:"created_at",limit:1e3,page:1,reception_id:k.params.id,company_id:""});G(()=>{n.value=J.getAuth(),N()});async function N(){var c,i,y;w.value=!0,s.value=!0;let f="";n.value.xxtype==="5up3r4dm1n"?f=n.value["xx-usertype-access"].company_id:f=(y=(i=(c=n==null?void 0:n.value)==null?void 0:c.users)==null?void 0:i.user_type)==null?void 0:y.id,M.value.company_id=f,await Be.getLacalPk(M.value).then(p=>{_.value=p.data,L(),w.value=!1,s.value=!1}).catch(p=>{w.value=!1,s.value=!1;const x=p.response.data;v.error(x.message)})}async function L(){var f,c;w.value=!0,s.value=!0,await oe.getDetailSerialize((c=(f=_.value)==null?void 0:f.list[0])==null?void 0:c.reception_id).then(i=>{o.value=i.data,w.value=!1,s.value=!1}).catch(i=>{w.value=!1,s.value=!1;const y=i.response.data;v.error(y.message)})}return(f,c)=>{const i=ae,y=U,p=O,x=S,j=X,H=je,V=Y,K=Z,F=ee;return l(w)?(r(),g(i,{key:0})):(r(),b("div",De,[t(x,{vertical:""},{default:e(()=>[t(y,{style:{"margin-bottom":"0px"}},{default:e(()=>[a("Lacak PK: "+u(l(o).pk_id),1)]),_:1}),t(p,{style:{opacity:"0.7"}},{default:e(()=>{var m;return[a("Nama Produk: "+u((m=l(o).product)==null?void 0:m.long_name),1)]}),_:1}),t(p,{style:{opacity:"0.7"}},{default:e(()=>{var m;return[a("Kode Produk: "+u((m=l(o).product)==null?void 0:m.item_code),1)]}),_:1}),t(p,{style:{opacity:"0.7"}},{default:e(()=>[a("ID Batch: "+u(l(o).batch_number),1)]),_:1}),t(p,{style:{opacity:"0.7"}},{default:e(()=>{var m;return[a("Expired Date: "+u(l(P)((m=l(o).date)==null?void 0:m.expired_date).format("yyyy-MM-DD")),1)]}),_:1})]),_:1}),d("div",Oe,[l(_).total_data>0?(r(),g(x,{key:0,justify:"center"},{default:e(()=>[t(K,{vertical:"",style:{width:"1300px","max-width":"100%",position:"relative","margin-top":"2.5rem"},status:"process"},{default:e(()=>[t(j,{type:"primary",style:{position:"absolute",top:"-45px",left:"-24px"},round:"",strong:"",secondary:""},{default:e(()=>[a("Selesai")]),_:1}),(r(!0),b(B,null,D(l(_).list,m=>(r(),g(V,{key:m.id},{default:e(()=>[t(H,{list:m,pk_detail:l(o)},null,8,["list","pk_detail"])]),_:2},1024))),128)),t(j,{type:"info",style:{"align-self":"flex-start",position:"absolute",bottom:"-25px",left:"-19px"},strong:"",secondary:"",round:""},{default:e(()=>[a(" Mulai ")]),_:1})]),_:1})]),_:1})):(r(),g(x,{key:1,align:"center",justify:"center"},{default:e(()=>[t(F,null,{default:e(()=>[a("Log Ini Kosong")]),_:1})]),_:1}))])]))}}});export{Qe as default};

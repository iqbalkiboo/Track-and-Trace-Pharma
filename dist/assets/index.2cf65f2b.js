import{_ as j}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as G,u as J,E as W,r as i,a1 as X,f as Y,o as d,c as f,k as e,w as o,q as b,a as t,i as n,S as Z,h as w,F as tt,g as et,t as s,af as at,am as nt,an as ot,a7 as st,ak as lt,a8 as _t,a9 as ct,N as it,K as ut,y as dt,aa as rt,ab as pt,ag as mt}from"./index.21c0d750.js";import{h as gt}from"./moment.62d3fb0a.js";import{s as ht}from"./serialisasi.378d5040.js";import{r as z}from"./render-icon.8c81e0de.js";import{E as ft}from"./EllipsisVertical.56989e7a.js";import{D as kt}from"./DocumentTextOutline.04a51bd9.js";import{L as bt}from"./LocationOutline.22b247fa.js";import"./getCompanyId.7d0eb93b.js";import"./getHoldingId.48f570fc.js";const yt={class:"body-tnt"},vt={class:"card-tnt"},xt={class:"table-tnt"},Pt=t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"center"}},"No"),t("th",null,"No PK"),t("th",null,"Tanggal"),t("th",null,"Kode Produk"),t("th",null,"Nama Produk"),t("th",null,"No. Batch"),t("th",null,"Expired Duration"),t("th",null,"Qty"),t("th",null,"Packed"),t("th",{style:{"text-align":"center"}},"Status"),t("th",{style:{"text-align":"center"}},"Aksi")])],-1),Dt={"data-label":"No",style:{"text-align":"center"}},Nt={"data-label":"No PK"},wt={"data-label":"Tanggal"},zt={"data-label":"Kode Produk"},St={"data-label":"Nama Produk"},Kt={"data-label":"No. Batch"},Bt={"data-label":"Expired Duration"},Tt={"data-label":"Qty",style:{"text-align":"center"}},$t={"data-label":"Packed",style:{"text-align":"center"}},Et={style:{"text-align":"center"},"data-label":"Status"},It={"data-label":"Aksi",style:{"text-align":"center"}},Lt={key:1},Mt=t("td",{colspan:"11",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),Ct=[Mt],Rt={class:"table-footer"},Wt=G({__name:"index",setup(Vt){const y=J(),S=W(),v=i(null),p=i(""),m=i(!0),k=i(!1),r=i({}),l=i({search:"",sort:"desc",sort_field:"created_at",page:1,limit:10,status:"ready_to_pack,process_packing"}),K=i({show:i(!1),type:"",icon:X(),iconColor:"",hideIcon:!1,title:"",subtitle:""});Y(()=>{g()});async function g(){m.value=!0,k.value=!0,await ht.getSerialize(l.value).then(_=>{r.value=_.data,m.value=!1,k.value=!1,K.value.show=!1}).catch(_=>{m.value=!1,k.value=!1;const c=_.response.data;S.error(c.message)})}function B(_){l.value.page=1,l.value.limit=_,g()}const T=[{label:"Detail Data",key:"detail",icon:z(kt)},{label:"Lacak PK",key:"lacak",icon:z(bt)}];function $(_,c){switch(_){case"detail":y.push({path:`/produksi/pengemasan/${c}`});break;case"lacak":y.push({path:`/lacak/pk/${c}`});break}}function E(){l.value.page=1,clearTimeout(v.value),v.value=setTimeout(()=>{l.value.search=p.value,g()},300)}return(_,c)=>{const I=at,L=nt,M=ot,x=st,C=lt,R=_t,V=j,q=ct,F=it,O=ut,U=dt,A=rt,Q=pt,H=mt;return d(),f("div",yt,[e(I,{style:{"margin-bottom":"4px"}},{default:o(()=>[b("Pengemasan")]),_:1}),e(M,null,{default:o(()=>[e(L,null,{default:o(()=>[b("Pengemasan")]),_:1})]),_:1}),t("div",vt,[e(R,{gutter:"16"},{default:o(()=>[e(x,{span:18}),e(x,{span:6},{default:o(()=>[e(C,{placeholder:"Cari ID PK",value:n(p),"onUpdate:value":c[0]||(c[0]=u=>Z(p)?p.value=u:null),onKeyup:E},null,8,["value"])]),_:1})]),_:1}),t("div",xt,[n(m)?(d(),w(V,{key:0})):(d(),w(Q,{key:1,"x-scrollable":""},{default:o(()=>[e(A,{"single-line":!1},{default:o(()=>{var u;return[Pt,t("tbody",null,[((u=n(r).list)==null?void 0:u.length)>0?(d(!0),f(tt,{key:0},et(n(r).list,(a,P)=>{var D;return d(),f("tr",{key:P},[t("td",Dt,s(n(l).limit*(n(l).page-1)+(P+1)),1),t("td",Nt,s(a.pk_id),1),t("td",wt,s(n(gt)(a.created_at).format("yyyy-MM-DD")),1),t("td",zt,s(a.product.item_code),1),t("td",St,s(a.product.short_name),1),t("td",Kt,s(a.batch_number),1),t("td",Bt,s(a.product.expired_date_duration)+" tahun ",1),t("td",Tt,s(a.serialize?a.serialize[0].qty:0),1),t("td",$t,s(a.serialize?(D=a.serialize[0].packaging)==null?void 0:D.total_qty_packed:0),1),t("td",Et,[e(q,{bordered:!1,type:"success",round:""},{default:o(()=>{var h,N;return[b(s(_.$filters.toStatus((N=(h=a.status)==null?void 0:h.global)==null?void 0:N.value)),1)]}),_:2},1024)]),t("td",It,[e(U,{placement:"bottom-end",options:T,onSelect:h=>$(h,a.id)},{default:o(()=>[e(O,{tertiary:""},{icon:o(()=>[e(F,null,{default:o(()=>[e(n(ft))]),_:1})]),_:1})]),_:2},1032,["onSelect"])])])}),128)):(d(),f("tr",Lt,Ct))])]}),_:1})]),_:1})),t("div",Rt,[e(H,{page:n(l).page,"onUpdate:page":[c[1]||(c[1]=u=>n(l).page=u),g],"page-count":n(r).total_page,"page-slot":7,"show-size-picker":n(r).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":B},null,8,["page","page-count","show-size-picker"])])])])])}}});export{Wt as default};

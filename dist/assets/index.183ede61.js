import{_ as ie}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as ce}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as re}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as ue,u as pe,E as _e,r as u,a1 as de,f as me,aF as x,p as fe,o as c,c as m,a as o,k as a,w as n,q as p,i as e,h as g,N,j as y,F as h,g as ge,t as w,ah as G,Q as I,as as he,am as ve,an as be,K as ke,v as ye,ak as we,a7 as Pe,a8 as Ce,y as xe,aa as Ne,ab as De,ag as Te}from"./index.21c0d750.js";import{c as v}from"./constant.549d5c21.js";import{p as D}from"./principal.7a723d63.js";import{A as Be}from"./Add.4f3b52cf.js";import{E as Ee}from"./EllipsisVertical.56989e7a.js";import{P as $e}from"./Pencil.0b65f5de.js";import{T as Fe}from"./Trash.4f4f705c.js";import{H as Se}from"./HelpCircleOutline.a54a41ed.js";import{C as Ae}from"./CheckmarkCircleOutline.8fddcae1.js";import"./AlertCircleOutline.19cf574c.js";import"./getCompanyId.7d0eb93b.js";import"./getHoldingId.48f570fc.js";const Ge={class:"body-tnt"},Ie={class:"card-tnt"},Ve={class:"table-tnt"},ze=o("thead",null,[o("tr",null,[o("th",{style:{"text-align":"center"}},"No"),o("th",null,"Kode Principal"),o("th",null,"Nama Principal"),o("th",null,"Deskripsi"),o("th",{style:{"text-align":"center"}},"Aksi")])],-1),Me={"data-label":"No",style:{"text-align":"center"}},Re={"data-label":"Kode ERP"},qe={"data-label":"Nama Principal"},He={"data-label":"Deskripsi"},Ke={"data-label":"Aksi",style:{"text-align":"center"}},Le={class:"table-footer"},it=ue({__name:"index",setup(Oe){const V=pe(),T=_e(),_=u(!1),b=u(!1),k=u({}),B=u({id:"",name:""}),i=u({q:"",dir:"desc",sort:"created_at",page:1,limit:10}),t=u({show:u(!1),icon:de(),iconColor:"",hideIcon:!1,title:"",subtitle:"",type:""}),z=u([]),E=s=>()=>I(N,null,{default:()=>I(s)}),P=u([]);me(()=>{M(),x.isGranted(v.accessPrivileges.principal+".list")&&(f(),R())});function M(){x.isGranted(v.accessPrivileges.principal+".edit")&&P.value.push({label:"Edit Data",key:"edit",icon:E($e)}),x.isGranted(v.accessPrivileges.principal+".delete")&&P.value.push({label:"Hapus Data",key:"delete",icon:E(Fe)})}async function f(){_.value=!0,await D.getPrincipal(i.value).then(s=>{k.value=s.data.data,_.value=!1,t.value.show=!1}).catch(s=>{_.value=!1;const l=s.response.data;T.error(l.message)})}async function R(){_.value=!0,await D.getPrincipal(i.value).then(s=>{s.data.data.list.forEach(l=>{z.value.push({label:l.name,value:l.name})}),_.value=!1,t.value.show=!1}).catch(s=>{_.value=!1;const l=s.response.data;T.error(l.message)})}const $=u(0);function q(){i.value.page=1,clearTimeout($.value),$.value=setTimeout(function(){f()},600)}function H(s){i.value.page=1,i.value.limit=s,f()}function K(s,l){switch(s){case"edit":V.push({path:`/setting/master-principal/update/${l}`});break;case"delete":B.value.id=l,O();break}}function C(){t.value.show=!1}function L(){t.value.type="success",t.value.icon=Ae,t.value.iconColor="#219653",t.value.title="Berhasil",t.value.subtitle="Anda berhasil menghapus data principal",t.value.show=!0}function O(){t.value.type="delete",t.value.icon=Se,t.value.iconColor="#EB5757",t.value.title="Perhatian",t.value.subtitle="Apakah Anda yakin untuk menghapus data principal?",t.value.show=!0}function U(){b.value=!0,D.deletePrincipal(B.value.id).then(()=>{b.value=!1,f(),setTimeout(()=>{L()},300)})}return(s,l)=>{const j=he,Q=ve,J=be,d=ke,F=fe("router-link"),S=ye,W=we,X=Pe,Y=Ce,Z=re,ee=xe,te=Ne,ae=De,ne=Te,oe=ce,se=ie;return c(),m(h,null,[o("div",Ge,[a(j,{style:{"margin-bottom":"4px"}},{default:n(()=>[p("Principal")]),_:1}),a(J,null,{default:n(()=>[a(Q,null,{default:n(()=>[p("Principal")]),_:1})]),_:1}),o("div",Ie,[s.$filters.isGranted(e(v).accessPrivileges.principal+".create")?(c(),g(S,{key:0},{default:n(()=>[a(F,{to:"/setting/master-principal/create/1",class:"text-decoration-none"},{default:n(()=>[a(d,{color:"#219653",class:"button-tnt"},{icon:n(()=>[a(e(N),null,{default:n(()=>[a(e(Be))]),_:1})]),default:n(()=>[p(" Tambah Principal ")]),_:1})]),_:1})]),_:1})):y("",!0),s.$filters.isGranted(e(v).accessPrivileges.principal+".list")?(c(),m(h,{key:1},[a(Y,{gutter:"16",style:{"margin-top":"24px"}},{default:n(()=>[a(X,{span:6},{default:n(()=>[a(W,{value:e(i).q,"onUpdate:value":[l[0]||(l[0]=r=>e(i).q=r),q],clearable:"",placeholder:"Cari Nama Principal"},null,8,["value"])]),_:1})]),_:1}),o("div",Ve,[e(_)?(c(),g(Z,{key:0})):(c(),g(ae,{key:1,"x-scrollable":""},{default:n(()=>[a(te,{"single-line":!1},{default:n(()=>[ze,o("tbody",null,[(c(!0),m(h,null,ge(e(k).list,(r,A)=>(c(),m("tr",{key:A},[o("td",Me,w(e(i).limit*(e(i).page-1)+(A+1)),1),o("td",Re,w(r.erp_code),1),o("td",qe,w(r.name),1),o("td",He,w(r.description),1),o("td",Ke,[a(ee,{placement:"bottom-end",options:e(P),onSelect:le=>K(le,r.id)},{default:n(()=>[a(d,{tertiary:""},{icon:n(()=>[a(e(N),null,{default:n(()=>[a(e(Ee))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])]))),128))])]),_:1})]),_:1})),o("div",Le,[a(ne,{page:e(i).page,"onUpdate:page":[l[1]||(l[1]=r=>e(i).page=r),f],"page-count":e(k).total_page,"page-slot":10,"show-size-picker":e(k).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":H},null,8,["page","page-count","show-size-picker"])])])],64)):(c(),g(oe,{key:2}))])]),a(se,{show:e(t).show,"onUpdate:show":l[2]||(l[2]=r=>e(t).show=r),icon:e(t).icon,"icon-color":e(t).iconColor,"hide-icon":e(t).hideIcon,title:e(t).title,subtitle:e(t).subtitle},{default:n(()=>[a(S,{justify:"center"},{default:n(()=>[e(t).type=="success"?(c(),g(d,{key:0,color:"#828282",class:"button-tnt",onClick:C},{default:n(()=>[p(" Tutup ")]),_:1})):y("",!0),e(t).type=="delete"?(c(),m(h,{key:1},[a(d,{loading:e(b),color:"#828282",class:"button-tnt",onClick:G(C,["prevent"])},{default:n(()=>[p(" Tidak ")]),_:1},8,["loading","onClick"]),a(d,{loading:e(b),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:G(U,["prevent"])},{default:n(()=>[p(" Iya ")]),_:1},8,["loading","onClick"])],64)):y("",!0),e(t).type=="success--"?(c(),m(h,{key:2},[a(d,{color:"#828282",class:"button-tnt",onClick:C},{default:n(()=>[p(" Tambah Lainya ")]),_:1}),a(F,{to:{name:"setting-master-produk"},class:"text-decoration-none"},{default:n(()=>[a(d,{color:"#219653",class:"button-tnt"},{default:n(()=>[p(" Kembali ke Beranda ")]),_:1})]),_:1})],64)):y("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{it as default};

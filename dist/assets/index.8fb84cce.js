import{_ as ft}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as ht}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as gt,b as kt,u as bt,E as yt,r as d,a1 as vt,f as wt,p as Ct,o as c,c as h,a as e,i as t,k as s,F as B,w as l,q as m,t as u,j as y,h as v,g as Nt,N as L,af as Bt,s as St,v as Rt,a9 as Dt,ak as $t,K as Ft,y as Ot,aa as Tt,ab as zt,ag as It,I as xt,J as At,Q as M}from"./index.21c0d750.js";import{t as $}from"./transfer-order.a0bc1e69.js";import{E as Et}from"./EllipsisVertical.56989e7a.js";import{C as Kt}from"./CheckmarkCircleOutline.8fddcae1.js";import{S as Pt}from"./SearchOutline.47b929a4.js";import"./getCompanyId.7d0eb93b.js";const Vt={class:"body-tnt"},qt={key:0,class:"card-tnt"},Lt={class:"card-tnt"},Mt={class:"table-tnt",style:{"margin-top":"0"}},Qt=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Kode Produk"),e("th",null,"Nama Produk"),e("th",null,"Batch"),e("th",null,"Qty"),e("th",null,"Wh Building"),e("th",null,"Wh Room"),e("th",null,"Rack"),e("th",null,"Bin"),e("th",{style:{"text-align":"center"}},"Aksi")])],-1),Ut={"data-label":"No"},Wt={"data-label":"Kode Produk"},jt={"data-label":"Nama Produk"},Ht={"data-label":"Batch"},Jt={"data-label":"Qty"},Yt={"data-label":"Wh Building"},Gt={"data-label":"Wh Room"},Xt={"data-label":"Rack"},Zt={"data-label":"Bin"},te={"data-label":"Aksi",style:{"text-align":"center"}},ee={key:1},ae=e("td",{colspan:"10",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),ne=[ae],oe={class:"table-footer"},se={class:"bottom-action-button"},le={class:"action-item"},ge=gt({__name:"index",setup(ie){const S=kt(),Q=bt(),w=yt(),C=d(!0),f=d(!1),r=d({}),g=d({}),_=d({search:"",status:"",sort:"desc",sort_field:"created_at",page:1,limit:10}),F=d(),b=d({}),O=d();O.value={reason:{required:!0,message:"Alasan tidak boleh kosong",trigger:["input","blur"]}},d(0);const U=[{label:"Scan",key:"scan",icon:(a=>()=>M(L,null,{default:()=>M(a)}))(Pt)}],n=d({show:d(!1),type:"",icon:vt(),iconColor:"",hideIcon:!1,title:"",subtitle:"",align:"center"});wt(()=>{N()});async function N(){C.value=!0,await W(),await j(),C.value=!1}async function W(){const a=S.params.id;await $.getDetailTO(a).then(o=>{r.value=o.data,H(r.value)}).catch(o=>{const p=o.response.data;w.error(p.message)})}async function j(){_.value.to_id=S.params.id,await $.getListDetailProduct(_.value).then(a=>{g.value=a.data}).catch(a=>{const o=a.response.data;w.error(o.message)})}function H(a){b.value.reason=a.reason}function J(a){_.value.page=1,_.value.limit=a,N()}function Y(a,o){switch(a){case"scan":localStorage.setItem("product_id",o),Q.push({name:"penyimpanan-transfer-id-scan"});break}}function G(){var a;(a=F.value)==null||a.validate().then(()=>{et()}).catch(()=>{w.error("Form tidak valid, tolong periksa kembali")})}function X(){f.value=!0;const a=S.params.id,o=new FormData;o.append("to_id",a),o.append("reason",b.value.reason),$.finishTO(o).then(()=>{f.value=!1,setTimeout(()=>{var p;n.value.title="Berhasil Transfer Order",n.value.subtitle=`${(p=g.value.list)==null?void 0:p.length} produk berhasil ditransfer`,at()},300)}).catch(p=>{f.value=!1;const R=p.response.data;w.error(R.message)})}function Z(){n.value.show=!1}function tt(){N(),n.value.show=!1}function et(){n.value.type="confirm",n.value.hideIcon=!0,n.value.title="Konfirmasi",n.value.subtitle="Apakah Anda yakin untuk melakukan transfer order?",n.value.show=!0}function at(){n.value.type="success",n.value.hideIcon=!1,n.value.iconColor="#219653",n.value.icon=Kt,n.value.show=!0}return(a,o)=>{const p=ht,R=Bt,nt=St,D=Rt,ot=Dt,st=$t,k=Ft,lt=Ot,it=Tt,rt=zt,ct=It,ut=xt,dt=At,_t=Ct("router-link"),pt=ft;return c(),h(B,null,[e("div",Vt,[t(C)?(c(),h("div",qt,[s(p)])):(c(),h(B,{key:1},[s(D,{justify:"space-between"},{default:l(()=>[s(D,{vertical:"",size:0},{default:l(()=>[s(R,{style:{"margin-bottom":"4px"}},{default:l(()=>[m("Kode Transfer Order : "+u(t(r).to_number),1)]),_:1}),s(nt,null,{default:l(()=>[m("Qty Transfer Order : "+u(a.$filters.toNumber(t(r).qty)),1)]),_:1})]),_:1}),s(ot,{round:"",bordered:!1,strong:"",type:t(r).status==="complete"?"success":"warning",size:"large"},{default:l(()=>[m(u(t(r).status),1)]),_:1},8,["type"])]),_:1}),e("div",Lt,[y("",!0),e("div",Mt,[t(C)?(c(),v(p,{key:0})):(c(),v(rt,{key:1,"x-scrollable":""},{default:l(()=>[s(it,{"single-line":!1},{default:l(()=>[Qt,e("tbody",null,[t(g).list.length>0?(c(!0),h(B,{key:0},Nt(t(g).list,(i,T)=>{var z,I,x,A,E,K,P,V,q;return c(),h("tr",{key:T},[e("td",Ut,u(t(_).limit*(t(_).page-1)+(T+1)),1),e("td",Wt,u((z=i.product)==null?void 0:z.item_code),1),e("td",jt,u((I=i.product)==null?void 0:I.short_name),1),e("td",Ht,u(i.batch),1),e("td",Jt,u(a.$filters.toNumber(i.current_qty)+" / "+a.$filters.toNumber(i.qty)),1),e("td",Yt,u((x=i.to)==null?void 0:x.building.name),1),e("td",Gt,u(a.$filters.isEmpty((E=(A=i.to)==null?void 0:A.room)==null?void 0:E.name)),1),e("td",Xt,u(a.$filters.isEmpty((P=(K=i.to)==null?void 0:K.rack_pallete)==null?void 0:P.name)),1),e("td",Zt,u(a.$filters.isEmpty((q=(V=i.to)==null?void 0:V.bin)==null?void 0:q.name)),1),e("td",te,[s(lt,{placement:"bottom-end",options:U,onSelect:mt=>Y(mt,i.id)},{default:l(()=>[s(k,{tertiary:""},{icon:l(()=>[s(t(L),null,{default:l(()=>[s(t(Et))]),_:1})]),_:1})]),_:2},1032,["onSelect"])])])}),128)):(c(),h("tr",ee,ne))])]),_:1})]),_:1})),e("div",oe,[s(ct,{page:t(_).page,"onUpdate:page":[o[1]||(o[1]=i=>t(_).page=i),N],"page-size":t(_).limit,"onUpdate:pageSize":[o[2]||(o[2]=i=>t(_).limit=i),J],"page-count":t(g).total_page,"page-slot":7,"show-size-picker":t(g).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])]),t(r).status&&t(r).status!=="cancel"&&t(r).status!=="complete"?(c(),v(dt,{key:1,ref_key:"formRef",ref:F,class:"form-tnt","show-require-mark":!1,"label-width":80,model:t(b),rules:t(O)},{default:l(()=>[s(ut,{label:"Alasan",path:"reason"},{default:l(()=>[s(st,{value:t(b).reason,"onUpdate:value":o[3]||(o[3]=i=>t(b).reason=i),placeholder:"Masukkan Alasan"},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])):y("",!0)])],64)),e("div",se,[e("div",le,[s(_t,{to:{name:"penyimpanan-transfer"},class:"text-decoration-none"},{default:l(()=>[s(k,{loading:t(f),color:"#828282",class:"button-tnt",style:{width:"120px"}},{default:l(()=>[m("Kembali")]),_:1},8,["loading"])]),_:1}),t(r).status&&t(r).status!=="cancel"&&t(r).status!=="complete"?(c(),v(k,{key:0,loading:t(f),type:"primary",class:"button-tnt",style:{width:"120px"},onClick:G},{default:l(()=>[m(" Konfirmasi ")]),_:1},8,["loading"])):y("",!0)])])]),s(pt,{show:t(n).show,"onUpdate:show":o[4]||(o[4]=i=>t(n).show=i),icon:t(n).icon,"hide-icon":t(n).hideIcon,title:t(n).title,subtitle:t(n).subtitle,align:t(n).align},{default:l(()=>[s(D,{justify:"center"},{default:l(()=>[t(n).type=="confirm"?(c(),h(B,{key:0},[s(k,{loading:t(f),color:"#828282",class:"button-tnt",onClick:Z},{default:l(()=>[m(" Tutup ")]),_:1},8,["loading"]),s(k,{loading:t(f),type:"primary",class:"button-tnt",onClick:X},{default:l(()=>[m(" Yakin ")]),_:1},8,["loading"])],64)):y("",!0),t(n).type=="success"?(c(),v(k,{key:1,color:"#828282",class:"button-tnt",onClick:tt},{default:l(()=>[m(" Tutup ")]),_:1})):y("",!0)]),_:1})]),_:1},8,["show","icon","hide-icon","title","subtitle","align"])],64)}}});export{ge as default};

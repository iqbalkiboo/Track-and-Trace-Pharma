import{_ as Q}from"./t-permission-modal.bdf6acbc.js";import{_ as W}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as X}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as Z,b as ee,E as te,r,a1 as ae,f as oe,e as se,aF as I,p as ne,o as m,c as F,a as T,k as a,w as o,q as u,i as t,h as k,j as b,F as R,ah as le,as as ie,am as ue,an as re,ak as ce,I as de,J as pe,K as me,v as _e}from"./index.21c0d750.js";import{c as C}from"./constant.549d5c21.js";import{t as B}from"./type.86a7443c.js";import{A as fe}from"./AlertCircleOutline.19cf574c.js";import{C as ve}from"./CheckmarkCircleOutline.8fddcae1.js";import"./getHoldingId.48f570fc.js";const he={class:"body-tnt"},ke={class:"card-tnt"},be={class:"bottom-action-button"},ge={class:"action-item"},Me=Z({__name:"index",setup(ye){const P=ee(),U=te(),g=r(),c=r(""),y=r(!1),l=r(!1),i=r({}),q=r(),M=r();M.value={name:{required:!0,message:"Nama Tipe Produk tidak boleh kosong",trigger:"blur"},description:{required:!0,message:"Deskripsi tidak boleh kosong",trigger:"blur"},erp_code:{required:!0,message:"Kode ERP tidak boleh kosong",trigger:"blur"}};const e=r({show:r(!1),icon:ae(),iconColor:"",hideIcon:!1,title:"",subtitle:"",type:""}),h=r({show:!1});oe(()=>{g.value=se.getAuth(),P.params.crud=="create"?(c.value="create",I.isGranted(C.accessPrivileges.productType+".create")?K():h.value.show=!0):(c.value="update",I.isGranted(C.accessPrivileges.productType+".update")?K():h.value.show=!0)});function G(){h.value.show=!1}async function K(){if(c.value=="update"){y.value=!0,l.value=!0;const n=P.params.id;await B.getDetailType(n).then(s=>{S(s.data),y.value=!1,l.value=!1}).catch(s=>{y.value=!1,l.value=!1;const f=s.response.data;U.error(f.message)})}}function $(){l.value=!0;let n="";g.value.xxtype==="5up3r4dm1n"?n=g.value["xx-usertype-access"].holding_id:n=g.value.users.user_type.id;const s={holding_id:n,name:i.value.name,description:i.value.description,erp_code:i.value.erp_code};if(c.value=="create")B.createType(s).then(()=>{l.value=!1,N(),_(),setTimeout(()=>{E()},300)}).catch(f=>{const v=f.response.data;l.value=!1,_(),setTimeout(()=>{A(v)},300)});else{const f=P.params.id;B.updateType(f,s).then(()=>{l.value=!1,N(),_(),setTimeout(()=>{E()},300)}).catch(v=>{const w=v.response.data;l.value=!1,_(),setTimeout(()=>{A(w)},300)})}}function S(n){i.value={name:n.name,description:n.description,erp_code:n.erp_code}}function N(){i.value={name:"",description:"",erp_code:""}}async function V(n){var s;n.preventDefault(),await((s=q.value)==null?void 0:s.validate()),j()}function _(){e.value.show=!1}function j(){e.value.type="confirm",e.value.hideIcon=!0,e.value.title="Konfirmasi",c.value=="create"?e.value.subtitle="Apakah Anda yakin untuk menambah tipe produk?":e.value.subtitle="Apakah Anda yakin untuk mengubah tipe produk?",e.value.show=!0}function A(n){e.value.type="failed",e.value.hideIcon=!1,e.value.iconColor="#EB5757",e.value.icon=fe,e.value.title="Gagal",Object.keys(n.validation).length>0?e.value.subtitle=n.validation:e.value.subtitle=n.message,e.value.show=!0}function E(){e.value.type="success",e.value.hideIcon=!1,e.value.iconColor="#219653",e.value.icon=ve,c.value=="create"?(e.value.title="Berhasil Tambah Data",e.value.subtitle="Data tipe produk berhasil ditambahkan"):(e.value.title="Berhasil Ubah Data",e.value.subtitle="Data tipe produk berhasil diubah"),e.value.show=!0}return(n,s)=>{const f=ie,v=ne("router-link"),w=ue,L=re,O=X,x=ce,D=de,z=pe,p=me,H=_e,J=W,Y=Q;return m(),F(R,null,[T("div",he,[a(f,{style:{"margin-bottom":"4px"}},{default:o(()=>[u("Tambah Tipe Produk")]),_:1}),a(L,null,{default:o(()=>[a(w,null,{default:o(()=>[a(v,{to:"/setting/master-tipe-produk",class:"text-decoration-none"},{default:o(()=>[u(" Tipe Produk ")]),_:1})]),_:1}),a(w,null,{default:o(()=>[u("Tambah Tipe Produk")]),_:1})]),_:1}),T("div",ke,[t(y)?(m(),k(O,{key:0})):(m(),k(z,{key:1,ref:"productTypeFormRef",class:"form-tnt","show-require-mark":!1,"label-width":80,model:t(i),rules:t(M)},{default:o(()=>[a(D,{label:"Nama Tipe Produk",path:"name"},{default:o(()=>[a(x,{value:t(i).name,"onUpdate:value":s[0]||(s[0]=d=>t(i).name=d),placeholder:"Masukkan Nama Tipe Produk"},null,8,["value"])]),_:1}),a(D,{label:"Kode ERP",path:"erp_code"},{default:o(()=>[a(x,{value:t(i).erp_code,"onUpdate:value":s[1]||(s[1]=d=>t(i).erp_code=d),disabled:t(c)=="update",placeholder:"Masukkan Kode ERP"},null,8,["value","disabled"])]),_:1}),a(D,{label:"Deskripsi",path:"description"},{default:o(()=>[a(x,{value:t(i).description,"onUpdate:value":s[2]||(s[2]=d=>t(i).description=d),placeholder:"Ketikkan Deskripsi Tipe Produk",type:"textarea",autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})]),_:1},8,["model","rules"]))]),T("div",be,[T("div",ge,[a(v,{to:"/setting/master-tipe-produk",class:"text-decoration-none"},{default:o(()=>[a(p,{color:"#828282",class:"button-tnt"},{default:o(()=>[u(" Kembali ")]),_:1})]),_:1}),t(c)==="create"&&n.$filters.isGranted(t(C).accessPrivileges.productType+".create")?(m(),k(p,{key:0,color:"#219653",class:"button-tnt",loading:t(l),onClick:V},{default:o(()=>[u(" Simpan ")]),_:1},8,["loading"])):b("",!0),t(c)==="update"&&n.$filters.isGranted(t(C).accessPrivileges.productType+".update")?(m(),k(p,{key:1,color:"#219653",class:"button-tnt",loading:t(l),onClick:V},{default:o(()=>[u(" Simpan ")]),_:1},8,["loading"])):b("",!0)])])]),a(J,{show:t(e).show,"onUpdate:show":s[3]||(s[3]=d=>t(e).show=d),icon:t(e).icon,"icon-color":t(e).iconColor,"hide-icon":t(e).hideIcon,title:t(e).title,subtitle:t(e).subtitle},{default:o(()=>[a(H,{justify:"center"},{default:o(()=>[t(e).type=="confirm"?(m(),F(R,{key:0},[a(p,{loading:t(l),color:"#828282",class:"button-tnt",onClick:_},{default:o(()=>[u(" Tutup ")]),_:1},8,["loading"]),a(p,{loading:t(l),color:"#219653",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:le($,["prevent"])},{default:o(()=>[u(" Yakin ")]),_:1},8,["loading","onClick"])],64)):b("",!0),t(e).type=="success"?(m(),F(R,{key:1},[a(p,{color:"#828282",class:"button-tnt",onClick:_},{default:o(()=>[u(" Tambah Lainya ")]),_:1}),a(v,{to:{name:"setting-master-tipe-produk"},class:"text-decoration-none"},{default:o(()=>[a(p,{color:"#219653",class:"button-tnt"},{default:o(()=>[u(" Kembali ke Beranda ")]),_:1})]),_:1})],64)):b("",!0),t(e).type=="failed"?(m(),k(p,{key:2,color:"#828282",class:"button-tnt",onClick:_},{default:o(()=>[u(" Tutup ")]),_:1})):b("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"]),a(Y,{show:t(h).show,"onUpdate:show":s[4]||(s[4]=d=>t(h).show=d),"onClick:close":G},null,8,["show"])],64)}}});export{Me as default};

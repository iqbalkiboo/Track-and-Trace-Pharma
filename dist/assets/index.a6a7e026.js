import{_ as he}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as ke}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as ve}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as be,u as ye,E as Pe,r,a1 as we,f as Ce,aF as U,p as Ne,o as d,c as p,a as n,k as e,w as t,q as i,j as K,i as a,F as b,S as xe,al as Me,g as W,t as _,h as B,N as X,ah as Z,Q as ee,as as $e,am as Ve,an as Ke,K as Be,v as Se,ak as ze,s as De,a7 as Ee,a8 as Fe,y as Ue,aa as Le,ab as Re,ag as Te}from"./index.21c0d750.js";import{c as S}from"./constant.549d5c21.js";import{m as L}from"./master-mapping-produk.c84c6a61.js";import{E as Ae}from"./EllipsisVertical.56989e7a.js";import{P as Ge}from"./Pencil.0b65f5de.js";import{T as Ie}from"./Trash.4f4f705c.js";import{C as je}from"./CheckmarkCircleOutline.8fddcae1.js";import{H as qe}from"./HelpCircleOutline.a54a41ed.js";import"./AlertCircleOutline.19cf574c.js";import"./getCompanyId.7d0eb93b.js";import"./getHoldingId.48f570fc.js";const He={class:"body-tnt"},Oe={class:"card-tnt"},Qe={class:"card-tnt",style:{"margin-top":"0","background-color":"#eeeeee"}},Ye={key:0,class:"card-tnt"},Je={class:"table-tnt"},We=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"center"}},"No"),n("th",null,"Nama Produk"),n("th",null,"Kode Produk"),n("th",null,"Nama Vendor"),n("th",null,"Kode Produk Vendor"),n("th",null,"Principal"),n("th",null,"UoM"),n("th",{style:{"text-align":"center"}},"Aksi")])],-1),Xe={"data-label":"No",style:{"text-align":"center"}},Ze={"data-label":"Nama Produk"},et={"data-label":"Kode Produk"},tt={"data-label":"Nama Vendor"},at={"data-label":"Kode Produk Vendor"},nt={"data-label":"Principal"},ot={"data-label":"UoM"},st={"data-label":"Aksi",style:{"text-align":"center"}},lt={key:1},it=n("td",{colspan:"8",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),ct=[it],ut={class:"table-footer"},Nt=be({__name:"index",setup(dt){const R=ye(),z=Pe(),w=r(!1),C=r(!1),m=r(!1),N=r({}),D=r({}),y=r(""),k=r({page:1,sort:"desc",limit:10}),T=r({q:null,limit:1e4}),x=r({id:"",name:""}),o=r({show:r(!1),icon:we(),iconColor:"",hideIcon:!1,title:"",subtitle:"",type:""}),A=s=>()=>ee(X,null,{default:()=>ee(s)}),E=r([]);Ce(()=>{te(),U.isGranted(S.accessPrivileges.mappingProduct+".list")&&M()});async function M(){w.value=!0,await L.getMappingProductList(k.value).then(s=>{N.value=s.data,w.value=!1,o.value.show=!1}).catch(s=>{w.value=!1;const l=s.response.data;z.error(l.message)})}function te(){U.isGranted(S.accessPrivileges.mappingProduct+".update")&&E.value.push({label:"Edit Data",key:"edit",icon:A(Ge)}),U.isGranted(S.accessPrivileges.mappingProduct+".delete")&&E.value.push({label:"Hapus Data",key:"delete",icon:A(Ie)})}function ae(s){k.value.page=1,k.value.limit=s,M()}function ne(s,l){var $,V;switch(s){case"edit":const F=($=l.product)==null?void 0:$.id,f=l.id;R.push({path:`/setting/master-mapping-produk/update/${F}`,query:{mapping_id:f}});break;case"delete":x.value.id=l.id,x.value.name=(V=l.product)==null?void 0:V.short_name,ie();break}}async function G(){C.value=!0,m.value=!0,T.value.q=y.value,await L.getProductList(T.value).then(s=>{D.value=s.data,C.value=!1,m.value=!1}).catch(s=>{C.value=!1,m.value=!1;const l=s.response.data;z.error(l.message)})}function oe(s){R.push({path:`/setting/master-mapping-produk/create/${s}`})}function se(){m.value=!0,L.deleteMappingProduk(x.value.id).then(()=>{m.value=!1,M(),setTimeout(()=>{le()},300)}).catch(s=>{m.value=!1;const l=s.response.data;z.error(l.message)})}function I(){o.value.show=!1}function le(){o.value.type="success",o.value.icon=je,o.value.iconColor="#219653",o.value.title="Berhasil",o.value.subtitle="Anda berhasil menghapus data mapping produk",o.value.show=!0}function ie(){o.value.type="delete",o.value.icon=qe,o.value.iconColor="#EB5757",o.value.title="Perhatian",o.value.subtitle=`Apakah Anda yakin untuk menghapus ${x.value.name} ?`,o.value.show=!0}return(s,l)=>{const $=$e,V=Ve,F=Ke,f=Be;Ne("router-link");const h=Se,ce=ze,j=ve,g=De,v=Ee,ue=Fe,de=Ue,re=Le,_e=Re,pe=Te,me=ke,ge=he;return d(),p(b,null,[n("div",He,[e($,{style:{"margin-bottom":"4px"}},{default:t(()=>[i("Mapping Produk")]),_:1}),e(F,null,{default:t(()=>[e(V,null,{default:t(()=>[i("Mapping Produk")]),_:1})]),_:1}),n("div",Oe,[K("",!0),s.$filters.isGranted(a(S).accessPrivileges.mappingProduct+".list")?(d(),p(b,{key:1},[n("div",Qe,[e(h,{vertical:"",align:"center"},{default:t(()=>[e(h,null,{default:t(()=>[e(ce,{ref:"input",value:a(y),"onUpdate:value":l[0]||(l[0]=c=>xe(y)?y.value=c:null),placeholder:"Cari Nama Produk atau Kode Produk",clearable:"",onKeyup:Me(G,["enter"]),style:{width:"35rem"}},null,8,["value","onKeyup"]),e(f,{loading:a(m),disabled:a(y)==="",strong:"",secondary:"",type:"primary",class:"button-tnt",onClick:G},{default:t(()=>[i("Cari")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),a(C)?(d(),p("div",Ye,[e(j)])):(d(),p(b,{key:1},[Object.keys(a(D)).length>0?(d(!0),p(b,{key:0},W(a(D).list,(c,P)=>(d(),p("div",{key:P,class:"card-tnt",style:{"background-color":"#eeeeee"}},[e(ue,{cols:12,gutter:"10","align-items":"center"},{default:t(()=>[e(v,{span:1},{default:t(()=>[e(g,{strong:""},{default:t(()=>[i(_(P+1),1)]),_:2},1024)]),_:2},1024),e(v,{span:5},{default:t(()=>[e(h,{vertical:"",size:0},{default:t(()=>[e(g,{strong:""},{default:t(()=>[i("Nama Produk")]),_:1}),e(g,null,{default:t(()=>[i(_(c.short_name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(v,{span:4},{default:t(()=>[e(h,{vertical:"",size:0},{default:t(()=>[e(g,{strong:""},{default:t(()=>[i("Kode Produk")]),_:1}),e(g,null,{default:t(()=>[i(_(c.item_code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(v,{span:6},{default:t(()=>[e(h,{vertical:"",size:0},{default:t(()=>[e(g,{strong:""},{default:t(()=>[i("Principal")]),_:1}),e(g,null,{default:t(()=>{var u;return[i(_((u=c.principal)==null?void 0:u.name),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),e(v,{span:5},{default:t(()=>[e(h,{vertical:"",size:0},{default:t(()=>[e(g,{strong:""},{default:t(()=>[i("UoM")]),_:1}),e(g,null,{default:t(()=>{var u;return[i(_((u=c.uom)==null?void 0:u.name),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),e(v,{span:3},{default:t(()=>[e(h,{align:"center",justify:"end"},{default:t(()=>[e(f,{strong:"",type:"primary",class:"button-tnt",onClick:u=>oe(c.id)},{default:t(()=>[i("Mapping")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)):K("",!0)],64)),n("div",Je,[a(w)?(d(),B(j,{key:0})):(d(),B(_e,{key:1,"x-scrollable":""},{default:t(()=>[e(re,{"single-line":!1},{default:t(()=>{var c,P;return[We,n("tbody",null,[((P=(c=a(N))==null?void 0:c.list)==null?void 0:P.length)>0?(d(!0),p(b,{key:0},W(a(N).list,(u,q)=>{var H,O,Q,Y,J;return d(),p("tr",{key:q},[n("td",Xe,_(a(k).limit*(a(k).page-1)+(q+1)),1),n("td",Ze,_((H=u.product)==null?void 0:H.short_name),1),n("td",et,_((O=u.product)==null?void 0:O.item_code),1),n("td",tt,_((Q=u.vendor)==null?void 0:Q.name),1),n("td",at,_(u.code),1),n("td",nt,_((Y=u.principal)==null?void 0:Y.name),1),n("td",ot,_((J=u.uom)==null?void 0:J.name),1),n("td",st,[e(de,{placement:"bottom-end",options:a(E),onSelect:fe=>ne(fe,u)},{default:t(()=>[e(f,{tertiary:""},{icon:t(()=>[e(a(X),null,{default:t(()=>[e(a(Ae))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])])}),128)):(d(),p("tr",lt,ct))])]}),_:1})]),_:1})),n("div",ut,[e(pe,{page:a(k).page,"onUpdate:page":[l[1]||(l[1]=c=>a(k).page=c),M],"page-count":a(N).total_page,"page-slot":10,"show-size-picker":"","page-sizes":[10,20,30,40,50],"onUpdate:pageSize":ae},null,8,["page","page-count"])])])],64)):(d(),B(me,{key:2}))])]),e(ge,{show:a(o).show,"onUpdate:show":l[2]||(l[2]=c=>a(o).show=c),icon:a(o).icon,"icon-color":a(o).iconColor,"hide-icon":a(o).hideIcon,title:a(o).title,subtitle:a(o).subtitle},{default:t(()=>[e(h,{justify:"center"},{default:t(()=>[a(o).type=="success"?(d(),B(f,{key:0,color:"#828282",class:"button-tnt",onClick:I},{default:t(()=>[i(" Tutup ")]),_:1})):K("",!0),a(o).type=="delete"?(d(),p(b,{key:1},[e(f,{loading:a(m),color:"#828282",class:"button-tnt",onClick:Z(I,["prevent"])},{default:t(()=>[i(" Tidak ")]),_:1},8,["loading","onClick"]),e(f,{loading:a(m),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:Z(se,["prevent"])},{default:t(()=>[i(" Yakin ")]),_:1},8,["loading","onClick"])],64)):K("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{Nt as default};

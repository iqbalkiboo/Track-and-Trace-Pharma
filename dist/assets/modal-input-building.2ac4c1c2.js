import{m as k}from"./master-warehouse.353b4b3b.js";import{d as N,E as R,r as p,G as y,f as A,aI as E,o as L,h as j,w as u,k as o,a as H,q as w,i as a,ar as I,H as O,I as T,ak as z,K as D,v as F,J as G,M as J}from"./index.21c0d750.js";import"./getCompanyId.7d0eb93b.js";const K={style:{"text-align":"start","margin-bottom":"20px"}},X=N({__name:"modal-input-building",props:{show:{type:Boolean,default:!1},value:{default:()=>({})},loading:{type:Boolean,default:!1}},emits:["update:show","update:value","click:close","click:confirm"],setup(x,{emit:g}){const c=x,_=R(),l=p(!1),h=p(null),t=p({}),m=p([]),f=p([]),v=p();v.value={plant:{required:!0,message:"Plant tidak boleh kosong",trigger:["input","blur"]},building:{required:!0,message:"Building tidak boleh kosong",trigger:["input","blur"]},reason:{required:!0,message:"Alasan tidak boleh kosong",trigger:["input","blur"]}},y(t,n=>g("update:value",n),{deep:!0}),y(()=>c.show,n=>{n&&B()}),A(()=>{t.value=c.value}),E(()=>{t.value=c.value});async function B(){l.value=!0,await P(),l.value=!1}async function P(){l.value=!0,t.value.building=null,m.value=[];const n={sort:"desc",sort_field:"created_at",page:1,limit:-1};await k.getWarehouse(n).then(e=>{e.data.list.forEach(s=>{m.value.push({key:s.key,value:s.id,label:s.name})}),l.value=!1}).catch(e=>{l.value=!1;const d=e.response.data;_.error(d.message)})}async function M(n){l.value=!0,t.value.building=null,f.value=[];const e={warehouse_id:n,sort:"desc",sort_field:"created_at",page:1,limit:-1};await k.getBuilding(e).then(d=>{d.data.list.forEach(r=>{f.value.push({key:r.key,value:r.id,label:r.name})}),l.value=!1}).catch(d=>{l.value=!1;const s=d.response.data;_.error(s.message)})}async function U(){var n;await((n=h.value)==null?void 0:n.validate().then(()=>{g("click:confirm",!0),g("update:value",t.value)}).catch(()=>{_.error("Form tidak valid, tolong periksa kembali")}))}return(n,e)=>{const d=I,s=O,r=T,V=z,q=D,b=F,W=G,C=J;return L(),j(C,{"mask-closable":!1,show:c.show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"470px","max-width":"100%","border-radius":"10px"},"header-style":{paddingLeft:"30px",paddingRight:"30px",paddingBottom:"15px"},"content-style":{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"20px"},"onUpdate:show":e[4]||(e[4]=i=>n.$emit("click:close",i))},{default:u(()=>[o(b,{vertical:"",style:{"padding-left":"10px","padding-right":"10px"}},{default:u(()=>[H("div",K,[o(d,{style:{"margin-bottom":"0"}},{default:u(()=>[w(" Pilih Warehouse Tujuan ")]),_:1})]),o(W,{ref_key:"formRef",ref:h,class:"form-tnt","show-require-mark":!1,"label-width":80,model:a(t),rules:a(v)},{default:u(()=>[o(r,{label:"Pilih Plant",path:"plant"},{default:u(()=>[o(s,{value:a(t).plant,"onUpdate:value":e[0]||(e[0]=i=>a(t).plant=i),options:a(m),filterable:"",placeholder:"Pilih Plant",disabled:a(l),onUpdateValue:e[1]||(e[1]=i=>M(i))},null,8,["value","options","disabled"])]),_:1}),o(r,{label:"Pilih Bulding",path:"building"},{default:u(()=>[o(s,{value:a(t).building,"onUpdate:value":e[2]||(e[2]=i=>a(t).building=i),options:a(f),filterable:"",placeholder:"Pilih Warehouse Bulding",disabled:a(l)},null,8,["value","options","disabled"])]),_:1}),o(r,{label:"Alasan",path:"reason"},{default:u(()=>[o(V,{value:a(t).reason,"onUpdate:value":e[3]||(e[3]=i=>a(t).reason=i),placeholder:"Masukkan Alasan",disabled:a(l)},null,8,["value","disabled"])]),_:1}),o(b,{justify:"center"},{default:u(()=>[o(q,{loading:a(l)||c.loading,type:"primary",class:"button-tnt",onClick:U},{default:u(()=>[w(" Simpan ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"])}}});export{X as default};

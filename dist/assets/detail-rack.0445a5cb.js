import{_ as st}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as it,b as rt,u as dt,E as ut,r as w,f as _t,p as ct,o as f,c as v,k as o,w as l,q as d,t as r,i as a,ah as C,aY as k,a as t,aZ as b,h as F,F as pt,g as mt,j as gt,af as ft,aJ as ht,s as yt,v as vt,ak as kt,a7 as bt,a9 as xt,a8 as wt,K as Ct,aa as Nt,ab as St,ag as Bt,L as $t}from"./index.21c0d750.js";import{m as H}from"./master-warehouse.353b4b3b.js";import"./getCompanyId.7d0eb93b.js";const Tt={class:"body-tnt"},Dt=["value"],It={style:{display:"flex","align-items":"end"}},zt=t("thead",null,[t("tr",null,[t("th",{style:{width:"20%"}},"Non Rack"),t("th",{style:{width:"15%","text-align":"right"}},"Kapasitas(m3)"),t("th",{style:{width:"15%","text-align":"right"}},"Terisi(m3)"),t("th",{style:{width:"15%","text-align":"right"}},"Usage(%)"),t("th",{style:{width:"10%","text-align":"right"}},"Total SKU"),t("th",{style:{width:"10%","text-align":"right"}},"Total Stok"),t("th",{style:{width:"15%","text-align":"center"}},"Aksi")])],-1),Rt={key:0},jt=["value"],Kt={style:{"text-align":"right"}},Lt={style:{"text-align":"right"}},Pt={style:{"text-align":"right"}},Ut={style:{"text-align":"right"}},Mt={style:{"text-align":"right"}},Vt={style:{"text-align":"center"}},Et={key:1},At=t("td",{colspan:"7",style:{"text-align":"center"}},"Belum ada data non rack tersedia",-1),Ft=[At],Ht=t("thead",null,[t("tr",null,[t("th",null,"ID Bin"),t("th",null,"Nama"),t("th",{style:{"text-align":"right"}},"Total Stok"),t("th",{style:{width:"12rem","text-align":"center"}},"Aksi")])],-1),Ot=["value","id"],qt={style:{"text-align":"right"}},Jt={style:{"text-align":"center"}},Wt={key:1},Yt=t("td",{colspan:"5",style:{"text-align":"center"}},"Belum ada data bin tersedia",-1),Zt=[Yt],Gt={style:{"margin-top":"14px",display:"flex","justify-content":"center"}},Qt={class:"bottom-action-button"},Xt={class:"action-item"},ie=it({__name:"detail-rack",setup(te){const I=rt(),B=dt(),N=ut(),S=w(!1),s=w({}),y=w({}),O=localStorage.getItem("room_id"),u=w({search:"",sort:"desc",sort_field:"created_at",page:1,limit:10});_t(()=>{z()});async function z(){q(),await $()}async function q(){const n=I.params.id;await H.getDetailRackPallete(n).then(i=>{s.value=i.data}).catch(i=>{const _=i.response.data;N.error(_.message)})}async function $(){S.value=!0,u.value.warehouse_id=localStorage.getItem("plant_id"),u.value.building_id=localStorage.getItem("building_id"),u.value.room_id=localStorage.getItem("room_id"),u.value.rack_pallete_id=I.params.id,await H.getBin(u.value).then(n=>{y.value=n.data,S.value=!1}).catch(n=>{const i=n.response.data;N.error(i.message),S.value=!1})}function J(n){u.value.page=1,u.value.limit=n,$()}const R=w(0);function W(){clearTimeout(R.value),R.value=setTimeout(function(){$()},600)}function j(){const n=document.getElementById("copyCode");n.select(),n.setSelectionRange(0,99999),navigator.clipboard.writeText(n.value),N.success("Kode erp tersalin")}function Y(n,i){const _=document.getElementById("copyIdBin"+n+i);_.select(),_.setSelectionRange(0,99999),navigator.clipboard.writeText(_.value),N.success("ID Bin tersalin")}function ee(n,i){localStorage.setItem("rack_id",n),B.push({name:"penyimpanan-stok-id-detail-bin",params:{id:i}})}function Z(n,i){localStorage.setItem("warehouse_type",n),localStorage.setItem("rack_id",i),B.push({name:"penyimpanan-stok-id-detail-list-product",params:{id:i}})}function G(n,i,_){localStorage.setItem("warehouse_type",n),localStorage.setItem("rack_id",_),B.push({name:"penyimpanan-stok-id-detail-list-product",params:{id:i}})}return(n,i)=>{const _=ft,Q=ht,p=yt,h=vt,X=kt,T=bt,tt=xt,et=wt,at=st,D=Ct,K=Nt,L=St,nt=Bt,ot=$t,lt=ct("router-link");return f(),v("div",Tt,[o(h,{vertical:"",size:14},{default:l(()=>[o(h,{justify:"space-between"},{default:l(()=>[o(h,{vertical:"",size:0},{default:l(()=>[o(_,{style:{"margin-bottom":"4px"}},{default:l(()=>{var e;return[d(r((e=a(s).warehouse)==null?void 0:e.name),1)]}),_:1}),o(Q,{style:{"margin-bottom":"4px"}},{default:l(()=>{var e,c,m,g,x;return[d(r(Object.keys(a(s)).length>0?((c=(e=a(s))==null?void 0:e.warehouse_building)==null?void 0:c.name)+" / "+((g=(m=a(s))==null?void 0:m.warehouse_room)==null?void 0:g.name)+" / "+((x=a(s))==null?void 0:x.name):""),1)]}),_:1}),o(p,{type:"primary",strong:"",style:{cursor:"pointer"},onClick:C(j,["prevent"])},{default:l(()=>[d(r(a(s).erp_code),1)]),_:1},8,["onClick"]),k(t("div",null,[k(t("input",{type:"text",value:a(s).erp_code,id:"copyCode"},null,8,Dt),[[b,!1]])],512),[[b,!1]])]),_:1}),t("div",It,[o(X,{value:a(u).search,"onUpdate:value":i[0]||(i[0]=e=>a(u).search=e),onKeyup:W,type:"text",placeholder:"Cari nama bin",style:{width:"300px","max-width":"200%"}},null,8,["value"])])]),_:1}),o(et,{cols:12},{default:l(()=>[o(T,{span:4},{default:l(()=>[o(h,{vertical:""},{default:l(()=>[o(p,null,{default:l(()=>[d("Kapsitas(m\xB3) : "+r(n.$filters.toNumber(a(s).volume)),1)]),_:1}),o(p,null,{default:l(()=>{var e;return[d("Terisi(m\xB3) : "+r(n.$filters.toNumber((e=a(s).results)==null?void 0:e.total_used_volume)),1)]}),_:1}),o(p,null,{default:l(()=>{var e;return[d("Usage(%) : "+r(n.$filters.toNumber((e=a(s).results)==null?void 0:e.total_used_volume_percent)),1)]}),_:1})]),_:1})]),_:1}),o(T,{span:4},{default:l(()=>[o(h,{vertical:""},{default:l(()=>[o(p,null,{default:l(()=>{var e;return[d("Total SKU : "+r(n.$filters.toNumber((e=a(s).results)==null?void 0:e.total_product)),1)]}),_:1}),o(p,null,{default:l(()=>{var e;return[d("Total Stok : "+r(n.$filters.toNumber((e=a(s).results)==null?void 0:e.total_first_level)),1)]}),_:1})]),_:1})]),_:1}),o(T,{span:16},{default:l(()=>[o(tt,{bordered:!1,style:{"margin-right":"10px",width:"10rem",height:"2rem","justify-content":"center"}},{default:l(()=>{var e;return[d(r(n.$filters.toNumber((e=a(s).counts)==null?void 0:e.bin))+" Bin ",1)]}),_:1})]),_:1})]),_:1}),o(ot,{style:{"margin-bottom":"1rem","border-radius":"10px"}},{default:l(()=>[a(S)?(f(),F(at,{key:0})):(f(),F(L,{key:1,"x-scrollable":""},{default:l(()=>[o(L,{"x-scrollable":""},{default:l(()=>[o(K,{bordered:!1,"single-line":!1},{default:l(()=>{var e,c,m,g,x,P,U,M,V,E,A;return[zt,t("tbody",null,[Object.keys(a(s)).length>0?(f(),v("tr",Rt,[t("td",null,[t("div",null,[d(r((e=a(s))==null?void 0:e.name)+" ",1),o(p,{type:"primary",strong:"",style:{"font-size":"11px",display:"block",cursor:"pointer"},onClick:C(j,["prevent"])},{default:l(()=>[d(r(a(s).erp_code),1)]),_:1},8,["onClick"])]),k(t("div",null,[k(t("input",{type:"text",value:a(s).erp_code,id:"copyCode"},null,8,jt),[[b,!1]])],512),[[b,!1]])]),t("td",Kt,r(n.$filters.toNumber(a(s).volume)),1),t("td",Lt,r(n.$filters.toNumber((m=(c=a(s))==null?void 0:c.results)==null?void 0:m.total_used_volume)),1),t("td",Pt,r(n.$filters.toNumber((x=(g=a(s))==null?void 0:g.results)==null?void 0:x.total_used_volume_percent)),1),t("td",Ut,r(n.$filters.toNumber((M=(U=(P=a(s))==null?void 0:P.results)==null?void 0:U.current)==null?void 0:M.total_product)),1),t("td",Mt,r(n.$filters.toNumber((A=(E=(V=a(s))==null?void 0:V.results)==null?void 0:E.current)==null?void 0:A.total_first_level)),1),t("td",Vt,[o(h,{justify:"center"},{default:l(()=>[o(D,{tertiary:"",onClick:i[1]||(i[1]=C(ae=>Z("rack_pallete_non_bin",a(s).id),["prevent"]))},{default:l(()=>[d(" List Produk ")]),_:1})]),_:1})])])):(f(),v("tr",Et,Ft))])]}),_:1})]),_:1}),o(K,{bordered:!1,"single-line":!1,style:{"margin-top":"24px"}},{default:l(()=>[Ht,t("tbody",null,[a(y).list&&a(y).list.length>0?(f(!0),v(pt,{key:0},mt(a(y).list,(e,c)=>{var m;return f(),v("tr",{key:c},[t("td",null,[t("div",null,[o(p,{type:"primary",strong:"",style:{display:"block",cursor:"pointer"},onClick:C(g=>Y(c,e.id_bin),["prevent"])},{default:l(()=>[d(r(e.id_bin),1)]),_:2},1032,["onClick"])]),k(t("div",null,[k(t("input",{type:"text",value:e.id_bin,id:"copyIdBin"+c+e.id_bin},null,8,Ot),[[b,!1]])],512),[[b,!1]])]),t("td",null,r(e.name),1),t("td",qt,r(n.$filters.toNumber((m=e.results)==null?void 0:m.total_first_level)),1),t("td",Jt,[o(h,{justify:"center"},{default:l(()=>[gt("",!0),o(D,{tertiary:"",onClick:C(g=>G("bin",e.id,a(s).id),["prevent"])},{default:l(()=>[d(" List Produk ")]),_:2},1032,["onClick"])]),_:2},1024)])])}),128)):(f(),v("tr",Wt,Zt))])]),_:1})]),_:1})),t("div",Gt,[o(nt,{page:a(u).page,"onUpdate:page":[i[2]||(i[2]=e=>a(u).page=e),z],"page-size":a(u).limit,"onUpdate:pageSize":[i[3]||(i[3]=e=>a(u).limit=e),J],"page-count":a(y).total_page,"page-slot":7,"show-size-picker":a(y).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])]),_:1})]),_:1}),t("div",Qt,[t("div",Xt,[o(lt,{to:{name:"penyimpanan-stok-id-detail-room",params:{id:a(O)}},class:"text-decoration-none"},{default:l(()=>[o(D,{color:"#828282",class:"button-tnt",style:{width:"120px"}},{default:l(()=>[d("Kembali")]),_:1})]),_:1},8,["to"])])])])}}});export{ie as default};

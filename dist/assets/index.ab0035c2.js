import{_ as gt}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as ht}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as kt,b as yt,u as bt,E as vt,r as d,f as wt,a1 as Ct,p as jt,o as c,c as g,a as e,i as t,k as s,F as A,w as l,q as m,t as r,j as b,h as v,g as At,N as P,af as St,s as Dt,v as Nt,a9 as $t,ak as Bt,K as Ft,y as Rt,aa as zt,ab as xt,ag as Et,I as It,J as Vt,Q as T}from"./index.21c0d750.js";import{a as $}from"./adjustment.098753fc.js";import{E as qt}from"./EllipsisVertical.56989e7a.js";import{C as Mt}from"./CheckmarkCircleOutline.8fddcae1.js";import{S as Kt}from"./SearchOutline.47b929a4.js";import"./getCompanyId.7d0eb93b.js";const Lt={class:"body-tnt"},Pt={key:0,class:"card-tnt"},Tt={class:"card-tnt"},Ut={class:"table-tnt",style:{"margin-top":"0"}},Ot=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Kode Produk"),e("th",null,"Nama Produk"),e("th",null,"Batch"),e("th",null,"Qty"),e("th",null,"Wh Building"),e("th",null,"Wh Room"),e("th",null,"Rack"),e("th",null,"Bin"),e("th",{style:{"text-align":"center"}},"Aksi")])],-1),Qt={style:{"text-align":"center"}},Wt={key:1},Ht=e("td",{colspan:"10",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),Jt=[Ht],Yt={class:"table-footer"},Gt={class:"bottom-action-button"},Xt={class:"action-item"},ue=kt({__name:"index",setup(Zt){const S=yt(),U=bt(),w=vt(),C=d(!0),f=d(!1),u=d({}),h=d({}),_=d({search:"",status:"",sort:"desc",sort_field:"created_at",page:1,limit:10}),B=d(),y=d({}),F=d();F.value={reason:{required:!0,message:"Alasan tidak boleh kosong",trigger:["input","blur"]}};const O=n=>()=>T(P,null,{default:()=>T(n)});d(0);const Q=[{label:"Scan",key:"scan",icon:O(Kt)}];wt(()=>{j()});async function j(){C.value=!0,await W(),await H(),C.value=!1}async function W(){const n=S.params.id;await $.getDetailAdjustment(n).then(o=>{u.value=o.data,J(u.value)}).catch(o=>{const p=o.response.data;w.error(p.message)})}async function H(){_.value.adjustment_id=S.params.id,await $.getListDetailProduct(_.value).then(n=>{h.value=n.data}).catch(n=>{const o=n.response.data;w.error(o.message)})}function J(n){y.value.reason=n.reason}function Y(n){_.value.page=1,_.value.limit=n,j()}function G(n,o){switch(n){case"scan":localStorage.setItem("product_id",o),U.push({name:"penyimpanan-penyesuaian-id-scan"});break}}function X(){var n;(n=B.value)==null||n.validate().then(()=>{nt()}).catch(()=>{w.error("Form tidak valid, tolong periksa kembali")})}function Z(){f.value=!0;const n=S.params.id,o=new FormData;o.append("adjustment_id",n),o.append("reason",y.value.reason),$.finishAdjustment(o).then(()=>{f.value=!1,setTimeout(()=>{var p;a.value.title="Berhasil Melakukan Adjustmen",a.value.subtitle=`${(p=h.value.list)==null?void 0:p.length} produk berhasil diadjust`,at()},300)}).catch(p=>{f.value=!1;const D=p.response.data;w.error(D.message)})}const a=d({show:d(!1),type:"",icon:Ct(),iconColor:"",hideIcon:!1,title:"",subtitle:"",align:"center"});function tt(){a.value.show=!1}function et(){j(),a.value.show=!1}function nt(){a.value.type="confirm",a.value.hideIcon=!0,a.value.title="Konfirmasi",a.value.subtitle="Apakah Anda yakin untuk melakukan adjustment?",a.value.show=!0}function at(){a.value.type="success",a.value.hideIcon=!1,a.value.iconColor="#219653",a.value.icon=Mt,a.value.show=!0}return(n,o)=>{const p=ht,D=St,ot=Dt,N=Nt,st=$t,lt=Bt,k=Ft,it=Rt,ut=zt,ct=xt,rt=Et,dt=It,_t=Vt,pt=jt("router-link"),mt=gt;return c(),g(A,null,[e("div",Lt,[t(C)?(c(),g("div",Pt,[s(p)])):(c(),g(A,{key:1},[s(N,{justify:"space-between"},{default:l(()=>[s(N,{vertical:"",size:0},{default:l(()=>[s(D,{style:{"margin-bottom":"4px"}},{default:l(()=>[m("Kode Adjustmen : "+r(t(u).adjustment_code),1)]),_:1}),s(ot,null,{default:l(()=>[m("Qty Adjustmen : "+r(t(u).total_qty),1)]),_:1})]),_:1}),s(st,{round:"",bordered:!1,strong:"",type:t(u).status==="complete"?"success":"warning",size:"large"},{default:l(()=>[m(r(t(u).status),1)]),_:1},8,["type"])]),_:1}),e("div",Tt,[b("",!0),e("div",Ut,[t(C)?(c(),v(p,{key:0})):(c(),v(ct,{key:1,"x-scrollable":""},{default:l(()=>[s(ut,{"single-line":!1},{default:l(()=>[Ot,e("tbody",null,[t(h).list.length>0?(c(!0),g(A,{key:0},At(t(h).list,(i,R)=>{var z,x,E,I,V,q,M,K,L;return c(),g("tr",{key:R},[e("td",null,r(t(_).limit*(t(_).page-1)+(R+1)),1),e("td",null,r((z=i.product)==null?void 0:z.item_code),1),e("td",null,r((x=i.product)==null?void 0:x.short_name),1),e("td",null,r(i.batch),1),e("td",null,r(n.$filters.toNumber(i.current_qty)+" / "+n.$filters.toNumber(i.qty)),1),e("td",null,r(n.$filters.isEmpty((E=i.from)==null?void 0:E.building.name)),1),e("td",null,r(n.$filters.isEmpty((V=(I=i.from)==null?void 0:I.room)==null?void 0:V.name)),1),e("td",null,r(n.$filters.isEmpty((M=(q=i.from)==null?void 0:q.rack_pallete)==null?void 0:M.name)),1),e("td",null,r(n.$filters.isEmpty((L=(K=i.from)==null?void 0:K.bin)==null?void 0:L.name)),1),e("td",Qt,[s(it,{placement:"bottom-end",options:Q,onSelect:ft=>G(ft,i.id)},{default:l(()=>[s(k,{tertiary:""},{icon:l(()=>[s(t(P),null,{default:l(()=>[s(t(qt))]),_:1})]),_:1})]),_:2},1032,["onSelect"])])])}),128)):(c(),g("tr",Wt,Jt))])]),_:1})]),_:1})),e("div",Yt,[s(rt,{page:t(_).page,"onUpdate:page":[o[1]||(o[1]=i=>t(_).page=i),j],"page-size":t(_).limit,"onUpdate:pageSize":[o[2]||(o[2]=i=>t(_).limit=i),Y],"page-count":t(h).total_page,"page-slot":7,"show-size-picker":t(h).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])]),t(u).status&&t(u).status!=="cancel"&&t(u).status!=="complete"?(c(),v(_t,{key:1,ref_key:"formRef",ref:B,class:"form-tnt","show-require-mark":!1,"label-width":80,model:t(y),rules:t(F)},{default:l(()=>[s(dt,{label:"Alasan",path:"reason"},{default:l(()=>[s(lt,{value:t(y).reason,"onUpdate:value":o[3]||(o[3]=i=>t(y).reason=i),placeholder:"Masukkan Alasan"},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])):b("",!0)])],64)),e("div",Gt,[e("div",Xt,[s(pt,{to:{name:"penyimpanan-penyesuaian"},class:"text-decoration-none"},{default:l(()=>[s(k,{loading:t(f),color:"#828282",class:"button-tnt",style:{width:"120px"}},{default:l(()=>[m("Kembali")]),_:1},8,["loading"])]),_:1}),t(u).status&&t(u).status!=="cancel"&&t(u).status!=="complete"?(c(),v(k,{key:0,loading:t(f),type:"primary",class:"button-tnt",style:{width:"120px"},onClick:X},{default:l(()=>[m(" Adjust ")]),_:1},8,["loading"])):b("",!0)])])]),s(mt,{show:t(a).show,"onUpdate:show":o[4]||(o[4]=i=>t(a).show=i),icon:t(a).icon,"hide-icon":t(a).hideIcon,title:t(a).title,subtitle:t(a).subtitle,align:t(a).align},{default:l(()=>[s(N,{justify:"center"},{default:l(()=>[t(a).type=="confirm"?(c(),g(A,{key:0},[s(k,{loading:t(f),color:"#828282",class:"button-tnt",onClick:tt},{default:l(()=>[m(" Tutup ")]),_:1},8,["loading"]),s(k,{loading:t(f),type:"primary",class:"button-tnt",onClick:Z},{default:l(()=>[m(" Yakin ")]),_:1},8,["loading"])],64)):b("",!0),t(a).type=="success"?(c(),v(k,{key:1,color:"#828282",class:"button-tnt",onClick:et},{default:l(()=>[m(" Tutup ")]),_:1})):b("",!0)]),_:1})]),_:1},8,["show","icon","hide-icon","title","subtitle","align"])],64)}}});export{ue as default};

import{m as W}from"./master-warehouse.353b4b3b.js";import{d as L,E as R,r as c,G as D,f as z,aI as F,o as _,h,w as l,k as i,a as K,q as g,t as m,c as H,F as I,i as n,ar as O,s as S,v as $,H as j,I as G,K as J,J as T,M as A}from"./index.21c0d750.js";const Q={style:{"text-align":"start","margin-bottom":"20px"}},Z=L({__name:"t-reception-modal",props:{show:{type:Boolean,default:!1},value:{default:()=>({})},isBulk:{type:Boolean},level:{default:1},detailData:{default:()=>({})},selectedData:{default:()=>({})}},emits:["update:show","update:value","click:close","click:confirm"],setup(P,{emit:v}){const o=P,b=R(),u=c(!1),y=c(null),t=c({}),k=c([]),f=c([]),w=c();w.value={plant:{required:!0,message:"Warehouse plant/cabang tidak boleh kosong",trigger:["input","blur"]},building:{required:!0,message:"Warehouse building tidak boleh kosong",trigger:["input","blur"]}},D(t,a=>v("update:value",a),{deep:!0}),D(()=>o.show,a=>{a&&C()}),z(()=>{t.value=o.value}),F(()=>{t.value=o.value});async function C(){u.value=!0,await V(),u.value=!1}async function V(){t.value.plant=null,t.value.building=null,k.value=[],f.value=[];const a={sort:"desc",sort_field:"created_at",page:1,limit:-1};await W.getWarehouse(a).then(e=>{e.data.list.forEach(d=>{k.value.push({key:d.key,value:d.id,label:d.name})})}).catch(e=>{const s=e.response.data;b.error(s.message)})}async function M(a){u.value=!0,t.value.building=null,f.value=[];const e={warehouse_id:a,sort:"desc",sort_field:"created_at",page:1,limit:-1,type:"good"};await W.getBuilding(e).then(s=>{s.data.list.forEach(r=>{f.value.push({key:r.key,value:r.id,label:r.name})}),u.value=!1}).catch(s=>{u.value=!1;const d=s.response.data;b.error(d.message)})}async function N(){var a;await((a=y.value)==null?void 0:a.validate().then(()=>{v("click:confirm",!0),v("update:value",t.value)}).catch(()=>{b.error("Form tidak valid, tolong periksa kembali")}))}return(a,e)=>{const s=O,d=S,r=$,x=j,B=G,U=J,q=T,E=A;return _(),h(E,{"mask-closable":!1,show:o.show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"470px","max-width":"100%","border-radius":"10px"},"header-style":{paddingLeft:"30px",paddingRight:"30px",paddingBottom:"15px"},"content-style":{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"20px"},"onUpdate:show":e[3]||(e[3]=p=>a.$emit("click:close",p))},{default:l(()=>[i(r,{vertical:"",style:{"padding-left":"10px","padding-right":"10px"}},{default:l(()=>[K("div",Q,[a.$route.name==="produksi-pengecekan-tahap2-id"?(_(),h(s,{key:0,style:{"margin-bottom":"0"}},{default:l(()=>[g(" No PK : "+m(o.detailData.pk_id),1)]),_:1})):(_(),H(I,{key:1},[o.isBulk?(_(),h(s,{key:1,style:{"margin-bottom":"0"}},{default:l(()=>[g(" Bulk Penyimpanan "+m(o.detailData.pk_id),1)]),_:1})):(_(),h(s,{key:0,style:{"margin-bottom":"0"}},{default:l(()=>[g(" Kode Level "+m(o.level)+" : "+m(o.selectedData.code),1)]),_:1}))],64)),i(r,{vertical:"",size:0},{default:l(()=>[i(d,{style:{"font-size":"14px"}},{default:l(()=>[g(m(o.detailData.product.long_name),1)]),_:1})]),_:1})]),i(q,{ref_key:"formRef",ref:y,class:"form-tnt","show-require-mark":!1,"label-width":80,model:n(t),rules:n(w)},{default:l(()=>[i(B,{label:"Pilih Warehouse Plant/Cabang",path:"plant"},{default:l(()=>[i(x,{value:n(t).plant,"onUpdate:value":e[0]||(e[0]=p=>n(t).plant=p),options:n(k),filterable:"",placeholder:"Pilih Warehouse Plant/Cabang",disabled:n(u),onUpdateValue:e[1]||(e[1]=p=>M(p))},null,8,["value","options","disabled"])]),_:1}),i(B,{label:"Pilih Warehouse Bulding",path:"building"},{default:l(()=>[i(x,{value:n(t).building,"onUpdate:value":e[2]||(e[2]=p=>n(t).building=p),options:n(f),filterable:"",placeholder:"Pilih Warehouse Bulding",disabled:n(u)},null,8,["value","options","disabled"])]),_:1}),i(r,{justify:"center"},{default:l(()=>[i(U,{loading:n(u),type:"primary",class:"button-tnt",onClick:N},{default:l(()=>[g("Simpan")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"])}}});export{Z as _};

import{_ as ce}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as ue}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as re}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as _e,u as pe,E as de,r as _,a1 as me,f as fe,aF as x,p as he,o as u,c as f,a as o,k as a,w as n,q as p,i as e,h,N as T,j as A,F as w,g as ge,t as g,ah as N,Q as B,af as ve,am as be,an as ke,K as ye,v as we,ak as Ce,a7 as Pe,H as xe,a8 as Te,a9 as Ae,y as Ne,aa as $e,ab as Se,ag as Ee}from"./index.21c0d750.js";import{c as v}from"./constant.549d5c21.js";import{m as D}from"./master-threepl.f4c7982d.js";import{A as Ie}from"./Add.4f3b52cf.js";import{E as Le}from"./EllipsisVertical.56989e7a.js";import{P as Be}from"./Pencil.0b65f5de.js";import{T as De}from"./Trash.4f4f705c.js";import{C as Fe}from"./CheckmarkCircleOutline.8fddcae1.js";import{H as Me}from"./HelpCircleOutline.a54a41ed.js";import"./AlertCircleOutline.19cf574c.js";import"./getHoldingId.48f570fc.js";import"./getCompanyId.7d0eb93b.js";const Ge={class:"body-tnt"},Re={class:"card-tnt"},Ve={class:"table-tnt"},ze=o("thead",null,[o("tr",null,[o("th",{style:{"text-align":"center"}},"No"),o("th",null,"Nama 3PL"),o("th",null,"Kode ERP"),o("th",null,"API Key"),o("th",{style:{"text-align":"center"}},"Status"),o("th",{style:{"text-align":"center"}},"Aksi")])],-1),He={"data-label":"No",style:{"text-align":"center"}},Ke={"data-label":"Nama 3PL"},Ue={"data-label":"Kode ERP"},Oe={"data-label":"API Key"},je={"data-label":"Status",style:{"text-align":"center"}},qe={"data-label":"Aksi",style:{"text-align":"center"}},Qe={class:"table-footer"},_t=_e({__name:"index",setup(Je){const F=pe(),$=de(),b=_(!1),r=_(!1),k=_({}),c=_({search:"",sort:"desc",sort_field:"created_at",page:1,limit:10,status:null}),M=_([{label:"Aktif",value:1},{label:"Tidak Aktif",value:0}]),y=_({id:"",name:""}),t=_({show:_(!1),type:"",icon:me(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),C=_([]),S=s=>()=>B(T,null,{default:()=>B(s)});fe(()=>{G(),x.isGranted(v.accessPrivileges.threepl+".list")&&d()});function G(){x.isGranted(v.accessPrivileges.threepl+".update")&&C.value.push({label:"Edit Data",key:"edit",icon:S(Be)}),x.isGranted(v.accessPrivileges.threepl+".delete")&&C.value.push({label:"Hapus Data",key:"delete",icon:S(De)})}async function d(){b.value=!0,r.value=!0,await D.getThreepl(c.value).then(s=>{k.value=s.data,b.value=!1,r.value=!1,t.value.show=!1}).catch(s=>{b.value=!1,r.value=!1;const l=s.response.data;$.error(l.message)})}function R(){setTimeout(()=>{d()},1e3)}async function V(s){s&&(c.value.status=s),d()}function z(s){c.value.page=1,c.value.limit=s,d()}function H(s,l,P){switch(s){case"edit":F.push({path:`/setting/master-threepl/update/${l}`});break;case"delete":y.value.id=l,y.value.name=P,j();break}}function K(){r.value=!0,D.deleteThreepl(y.value.id).then(()=>{t.value.show=!1,setTimeout(()=>{O(),r.value=!1},300)}).catch(s=>{r.value=!1;const l=s.response.data;$.error(l.message)})}function U(){t.value.show=!1}function O(){t.value.type="success",t.value.icon=Fe,t.value.iconColor="#219653",t.value.title="Berhasil",t.value.subtitle="Anda berhasil menghapus data 3PL",t.value.show=!0}function j(){t.value.type="delete",t.value.icon=Me,t.value.iconColor="#EB5757",t.value.title="Perhatian",t.value.subtitle=`Apakah Anda yakin untuk menghapus ${y.value.name} ?`,t.value.show=!0}return(s,l)=>{const P=ve,q=be,Q=ke,m=ye,J=he("router-link"),E=we,W=Ce,I=Pe,X=xe,Y=Te,Z=re,ee=Ae,te=Ne,ae=$e,ne=Se,oe=Ee,se=ue,le=ce;return u(),f(w,null,[o("div",Ge,[a(P,{style:{"margin-bottom":"4px"}},{default:n(()=>[p("Master 3PL")]),_:1}),a(Q,null,{default:n(()=>[a(q,null,{default:n(()=>[p("Master 3PL")]),_:1})]),_:1}),o("div",Re,[s.$filters.isGranted(e(v).accessPrivileges.threepl+".create")?(u(),h(E,{key:0},{default:n(()=>[a(J,{to:"/setting/master-threepl/create/1",class:"text-decoration-none"},{default:n(()=>[a(m,{color:"#219653",class:"button-tnt"},{default:n(()=>[a(e(T),{component:e(Ie)},null,8,["component"]),p(" Tambah 3PL ")]),_:1})]),_:1})]),_:1})):A("",!0),s.$filters.isGranted(e(v).accessPrivileges.threepl+".list")?(u(),f(w,{key:1},[a(Y,{gutter:"16",style:{"margin-top":"24px"}},{default:n(()=>[a(I,{span:6},{default:n(()=>[a(W,{value:e(c).search,"onUpdate:value":l[0]||(l[0]=i=>e(c).search=i),onInput:R,type:"text",placeholder:"Cari nama 3pl"},null,8,["value"])]),_:1}),a(I,{span:6},{default:n(()=>[a(X,{placeholder:"status",options:e(M),value:e(c).status,"onUpdate:value":[l[1]||(l[1]=i=>e(c).status=i),l[2]||(l[2]=i=>V(i))],clearable:"",style:{"max-width":"100%"}},null,8,["options","value"])]),_:1})]),_:1}),o("div",Ve,[e(b)?(u(),h(Z,{key:0})):(u(),h(ne,{key:1,"x-scrollable":""},{default:n(()=>[a(ae,{"single-line":!1},{default:n(()=>[ze,o("tbody",null,[(u(!0),f(w,null,ge(e(k).list,(i,L)=>(u(),f("tr",{key:L},[o("td",He,g(e(c).limit*(e(c).page-1)+(L+1)),1),o("td",Ke,g(i.name),1),o("td",Ue,g(i.erp_code),1),o("td",Oe,g(i.api_key),1),o("td",je,[a(ee,{bordered:!1,type:i.status.value===1?"success":"error"},{default:n(()=>[p(g(i.status.label=="active"?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),o("td",qe,[a(te,{placement:"bottom-end","show-arrow":!0,options:e(C),onSelect:ie=>H(ie,i.id,i.name)},{default:n(()=>[a(m,{tertiary:""},{icon:n(()=>[a(e(T),null,{default:n(()=>[a(e(Le))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])]))),128))])]),_:1})]),_:1})),o("div",Qe,[a(oe,{page:e(c).page,"onUpdate:page":[l[3]||(l[3]=i=>e(c).page=i),d],"page-count":e(k).total_page,"page-slot":10,"show-size-picker":e(k).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":z},null,8,["page","page-count","show-size-picker"])])])],64)):(u(),h(se,{key:2}))])]),a(le,{show:e(t).show,"onUpdate:show":l[4]||(l[4]=i=>e(t).show=i),icon:e(t).icon,"icon-color":e(t).iconColor,"hide-icon":e(t).hideIcon,title:e(t).title,subtitle:e(t).subtitle},{default:n(()=>[a(E,{justify:"center"},{default:n(()=>[e(t).type=="success"?(u(),h(m,{key:0,loading:e(r),color:"#828282",class:"button-tnt",onClick:N(d,["prevent"])},{default:n(()=>[p(" Tutup ")]),_:1},8,["loading","onClick"])):A("",!0),e(t).type=="delete"?(u(),f(w,{key:1},[a(m,{loading:e(r),color:"#828282",class:"button-tnt",onClick:N(U,["prevent"])},{default:n(()=>[p(" Tidak ")]),_:1},8,["loading","onClick"]),a(m,{loading:e(r),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:N(K,["prevent"])},{default:n(()=>[p(" Iya ")]),_:1},8,["loading","onClick"])],64)):A("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{_t as default};

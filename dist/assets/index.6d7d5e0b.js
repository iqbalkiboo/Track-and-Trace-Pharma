import{_ as de}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as _e}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as pe}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as me,u as fe,E as he,r,a1 as ge,f as ve,aF as I,p as ke,o as c,c as m,a as t,k as o,w as a,q as p,i as e,h as k,N as P,j as C,F as x,g as ye,t as _,ah as A,Q as F,af as be,am as we,an as Ce,K as xe,v as Ve,ak as Ne,a7 as $e,a8 as Ie,R as Pe,a9 as Ae,y as Be,aa as Me,ab as Te,ag as Ee}from"./index.21c0d750.js";import{c as y}from"./constant.549d5c21.js";import{m as G}from"./master-vendor.ed83cfb1.js";import{_ as Se}from"./modal-import-excel.vue_vue_type_script_setup_true_lang.76b9d52c.js";import{A as De}from"./Add.4f3b52cf.js";import{E as Fe}from"./EllipsisVertical.56989e7a.js";import{P as Ge}from"./Pencil.0b65f5de.js";import{T as Re}from"./Trash.4f4f705c.js";import{C as ze}from"./CheckmarkCircleOutline.8fddcae1.js";import{H as He}from"./HelpCircleOutline.a54a41ed.js";import"./AlertCircleOutline.19cf574c.js";import"./getHoldingId.48f570fc.js";import"./getCompanyId.7d0eb93b.js";import"./master-customer.9a7cd6cf.js";import"./master-customer.bc4f2735.js";const qe={class:"body-tnt"},Le={class:"card-tnt"},Ue={class:"table-tnt"},Ke=t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"center"}},"No"),t("th",null,"Nama Vendor"),t("th",null,"Kode ERP"),t("th",{style:{width:"20%"}},"Alamat"),t("th",null,"PIC"),t("th",null,"No Telp"),t("th",null,"Email"),t("th",null,"NPWP"),t("th",{style:{"text-align":"center"}},"Status"),t("th",{style:{"text-align":"center"}},"Aksi")])],-1),Oe={style:{"text-align":"center"}},je={style:{"text-align":"center"}},Qe={style:{"text-align":"center"}},We={key:1},Je=t("td",{colspan:"11",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),Xe=[Je],Ye={class:"table-footer"},kt=me({__name:"index",setup(Ze){const R=fe(),B=he(),b=r(!1),f=r(!1),h=r({}),V=r(!1),u=r({q:"",sort:"created_at",dir:"desc",page:1,limit:10,status:null}),n=r({show:r(!1),type:"",icon:ge(),iconColor:"",hideIcon:!1,title:"",subtitle:""});r([{label:"Aktif",value:1},{label:"Tidak Aktif",value:0}]);const w=r({id:"",name:""}),N=r([]),M=s=>()=>F(P,null,{default:()=>F(s)});ve(()=>{z(),I.isGranted(y.accessPrivileges.vendor+".list")&&g()});function z(){I.isGranted(y.accessPrivileges.vendor+".update")&&N.value.push({label:"Edit Data",key:"edit",icon:M(Ge)}),I.isGranted(y.accessPrivileges.vendor+".delete")&&N.value.push({label:"Hapus Data",key:"delete",icon:M(Re)})}async function g(){b.value=!0,await G.getVendorList(u.value).then(s=>{h.value=s.data,b.value=!1,n.value.show=!1}).catch(s=>{b.value=!1;const l=s.response.data;B.error(l.message)})}function H(){setTimeout(()=>{g()},800)}function q(s){u.value.page=1,u.value.limit=s,g()}function L(s,l,$){switch(s){case"edit":R.push({path:`/setting/master-vendor/update/${l}`});break;case"delete":w.value.id=l,w.value.name=$,j();break}}async function U(){f.value=!0,await G.deleteSoftVendor(w.value.id).then(()=>{n.value.show=!1,setTimeout(()=>{O(),f.value=!1},300)}).catch(s=>{f.value=!1;const l=s.response.data;B.error(l.message)})}function K(){n.value.show=!1}function O(){n.value.type="success",n.value.icon=ze,n.value.iconColor="#219653",n.value.title="Berhasil",n.value.subtitle="Anda berhasil menghapus data vendor",n.value.show=!0}function j(){n.value.type="delete",n.value.icon=He,n.value.iconColor="#EB5757",n.value.title="Perhatian",n.value.subtitle=`Apakah Anda yakin untuk menghapus ${w.value.name} ?`,n.value.show=!0}function et(s){s.preventDefault(),V.value=!0}function Q(){V.value=!1}return(s,l)=>{const $=be,W=we,J=Ce,v=xe,X=ke("router-link"),T=Ve,Y=Ne,Z=$e,ee=Ie,te=pe,ne=Pe,oe=Ae,ae=Be,se=Me,le=Te,ie=Ee,ce=_e,re=de;return c(),m(x,null,[t("div",qe,[o($,{style:{"margin-bottom":"4px"}},{default:a(()=>[p("Master Vendor")]),_:1}),o(J,null,{default:a(()=>[o(W,null,{default:a(()=>[p("Master Vendor")]),_:1})]),_:1}),t("div",Le,[o(T,null,{default:a(()=>[s.$filters.isGranted(e(y).accessPrivileges.vendor+".create")?(c(),k(X,{key:0,to:{path:"/setting/master-vendor/create/1"},class:"text-decoration-none"},{default:a(()=>[o(v,{color:"#219653",class:"button-tnt"},{default:a(()=>[o(e(P),{component:e(De)},null,8,["component"]),p(" Tambah Vendor ")]),_:1})]),_:1})):C("",!0),C("",!0)]),_:1}),s.$filters.isGranted(e(y).accessPrivileges.vendor+".list")?(c(),m(x,{key:0},[o(ee,{gutter:"16",style:{"margin-top":"24px"}},{default:a(()=>[o(Z,{span:6},{default:a(()=>[o(Y,{value:e(u).q,"onUpdate:value":l[0]||(l[0]=d=>e(u).q=d),onInput:H,type:"text",placeholder:"Cari Nama Vendor atau Kode Vendor"},null,8,["value"])]),_:1})]),_:1}),t("div",Ue,[e(b)?(c(),k(te,{key:0})):(c(),k(le,{key:1,"x-scrollable":""},{default:a(()=>[o(se,{"single-line":!1},{default:a(()=>{var d,E;return[Ke,t("tbody",null,[((E=(d=e(h))==null?void 0:d.list)==null?void 0:E.length)>0?(c(!0),m(x,{key:0},ye(e(h).list,(i,S)=>{var D;return c(),m("tr",{key:S},[t("td",Oe,_(e(u).limit*(e(u).page-1)+(S+1)),1),t("td",null,_(i.name),1),t("td",null,_(i.erp_code),1),t("td",null,_(s.$filters.setAddress(i.address)),1),t("td",null,_(i.pic.name),1),t("td",null,_(i.pic.phone),1),t("td",null,_(i.pic.email),1),t("td",null,[o(ne,{width:"30",src:(D=i.npwp)==null?void 0:D.url},null,8,["src"])]),t("td",je,[o(oe,{bordered:!1,type:i.status.value===1?"success":"error"},{default:a(()=>[p(_(i.status.label=="active"?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),t("td",Qe,[o(ae,{placement:"bottom-end","show-arrow":!0,options:e(N),onSelect:ue=>L(ue,i.id,i.name)},{default:a(()=>[o(v,{tertiary:""},{icon:a(()=>[o(e(P),null,{default:a(()=>[o(e(Fe))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])])}),128)):(c(),m("tr",We,Xe))])]}),_:1})]),_:1})),t("div",Ye,[o(ie,{page:e(u).page,"onUpdate:page":[l[1]||(l[1]=d=>e(u).page=d),g],"page-count":e(h).total_page,"page-slot":10,"show-size-picker":e(h).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":q},null,8,["page","page-count","show-size-picker"])])])],64)):(c(),k(ce,{key:1}))])]),o(Se,{"is-show-modal":e(V),onHideModal:Q},null,8,["is-show-modal"]),o(re,{show:e(n).show,"onUpdate:show":l[2]||(l[2]=d=>e(n).show=d),icon:e(n).icon,"icon-color":e(n).iconColor,"hide-icon":e(n).hideIcon,title:e(n).title,subtitle:e(n).subtitle},{default:a(()=>[o(T,{justify:"center"},{default:a(()=>[e(n).type=="success"?(c(),k(v,{key:0,color:"#828282",class:"button-tnt",onClick:A(g,["prevent"])},{default:a(()=>[p(" Tutup ")]),_:1},8,["onClick"])):C("",!0),e(n).type=="delete"?(c(),m(x,{key:1},[o(v,{loading:e(f),color:"#828282",class:"button-tnt",onClick:A(K,["prevent"])},{default:a(()=>[p(" Tidak ")]),_:1},8,["loading","onClick"]),o(v,{loading:e(f),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:A(U,["prevent"])},{default:a(()=>[p(" Iya ")]),_:1},8,["loading","onClick"])],64)):C("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{kt as default};

import{d as I,o as h,c as z,a as c,r as D,E as j,u as W,k as t,w as e,q as _,t as u,i as s,S as X,F as C,aS as E,H as Y,v as Q,a9 as U,N as Z,K as tt,y as et,b as nt,f as at,h as L,g as st,af as ot,s as lt,ad as it,ae as _t,aP as ct,aQ as ut,aR as rt,aT as pt,aa as dt,ag as mt,a4 as V}from"./index.21c0d750.js";import{d as q}from"./3pl.9faacd75.js";import{r as R}from"./render-icon.8c81e0de.js";import{u as gt}from"./breakpoints.0cfc147a.js";import{L as ft}from"./LocationOutline.22b247fa.js";import{E as vt}from"./EllipsisVertical.56989e7a.js";import{_ as bt}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{a as ht}from"./agregasi.9b2e850f.js";import"./getCompanyId.7d0eb93b.js";const yt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},kt=c("path",{d:"M448 64L64 240.14h200a8 8 0 0 1 8 8V448z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),wt=[kt],Dt=I({name:"NavigateOutline",render:function(g,o){return h(),z("svg",yt,wt)}}),$t={"data-label":"Tipe Pengiriman"},xt={style:{"text-transform":"capitalize"}},Mt=I({__name:"t-table-sending-delivery-type",props:{list:{}},setup(P){const g=P,o=D(g.list.delivery_type),{type:p}=gt(),$=j(),d=W(),x=[{label:"Direct Manual",value:"direct_manual"},{label:"Direct Kendaraan",value:"direct_kendaraan"},{label:"3PL",value:"3pl"}];function y(l){o.value=l}const N=[{label:"Submit",key:"submit",disabled:!!g.list.delivery_type,icon:R(Dt)},{label:"Lacak Manifest",key:"lacak",icon:R(ft)}];async function T(l){const v={type_shipping:o.value,manifest_id:g.list._id};switch(l){case"submit":await q.postTypeManifest(v).then(()=>{$.success("Berhasih Mengirim"),setTimeout(()=>{switch(v.type_shipping){case"3pl":d.push({name:"pengiriman-request-3pl"});break;case"direct_manual":d.push({name:"pengiriman-assign-porter"});break;case"direct_kendaraan":d.push({name:"pengiriman-assign-driver"});break}},400)}).catch(n=>{const i=n.response.data;$.error(i.message)});break;case"lacak":d.push({name:"lacak-manifest-id",params:{id:g.list._id}});break}}return(l,v)=>{const n=E,i=Y,k=Q,b=U,r=Z,m=tt,w=et;return h(),z(C,null,[t(n,{"data-label":"ID Manifest"},{default:e(()=>[_(u(l.list.code),1)]),_:1}),t(n,{"data-label":"Qty Packing"},{default:e(()=>[_(u(l.list.total.packing),1)]),_:1}),c("td",$t,[t(k,{align:"center",justify:s(p)==="tablet"?"end":"start"},{default:e(()=>[t(i,{options:x,placeholder:"Pilih Tipe Pengiriman",value:s(o),"onUpdate:value":[v[0]||(v[0]=M=>X(o)?o.value=M:null),y],style:{width:"256px","max-width":"100%"}},null,8,["value"])]),_:1},8,["justify"])]),t(n,{"data-label":"Status"},{default:e(()=>[t(b,{round:"",bordered:!1},{default:e(()=>[c("span",xt,u(l.list.status=="siap_dikirim"?"Siap Dikirim":l.list.status),1)]),_:1})]),_:1}),t(n,{"data-label":"Aksi"},{default:e(()=>[t(w,{placement:"bottom-end","show-arrow":"",options:N,onSelect:T},{default:e(()=>[t(m,{tertiary:""},{icon:e(()=>[t(r,null,{default:e(()=>[t(s(vt))]),_:1})]),_:1})]),_:1})]),_:1})],64)}}}),St={class:"body-tnt"},zt=c("span",null,"PIC: ",-1),Pt=c("span",null,"Total Qty Packing: ",-1),Nt=c("span",null,"Status: ",-1),Tt={class:"card-tnt"},Bt={class:"table-tnt"},Lt={class:"table-footer"},It=I({__name:"list-manifest",setup(P){const g=nt(),o=D({}),p=D({page:1,limit:20,sort:"desc","do.id":g.params.id}),$=j(),d=D(!0),x=D(!1),y=D({});function N(n){var i,k,b,r;if(n){const m=n.detail,w=(i=n.urban_village)==null?void 0:i.name,M=(k=n.sub_district)==null?void 0:k.name,B=(b=n.district)==null?void 0:b.name,f=(r=n.province)==null?void 0:r.name;return`${m}, ${w}, ${M}, ${B}, ${f}`}}async function T(){await ht.getDetailDO(g.params.id).then(n=>{o.value=n.data}).catch(n=>{const i=n.response.data;$.error(i.message)})}async function l(){d.value=!0,x.value=!0,await q.getmanifest(p.value).then(n=>{y.value=n.data,d.value=!1,x.value=!1}).catch(n=>{d.value=!1,x.value=!1;const i=n.response.data;$.error(i.message)})}function v(n){p.value.page=1,p.value.limit=n,l()}return at(()=>{T(),l()}),(n,i)=>{const k=bt,b=ot,r=lt,m=Q,w=it,M=U,B=_t,f=ct,O=ut,A=rt,F=E,H=Mt,K=pt,G=dt,J=mt;return h(),z("div",St,[s(d)?(h(),L(k,{key:0})):(h(),L(m,{key:1,vertical:"",style:{padding:"1rem"}},{default:e(()=>[t(B,{cols:"2","item-responsive":"",responsive:"screen","x-gap":"16","y-gap":"16"},{default:e(()=>[t(w,null,{default:e(()=>[t(b,{style:{"margin-bottom":"16px"}},{default:e(()=>[_("ID DO: "+u(s(o).code),1)]),_:1}),t(m,{vertical:"",size:15},{default:e(()=>[t(m,{vertical:"",size:0},{default:e(()=>[t(r,{style:{"margin-bottom":"0"}},{default:e(()=>{var a,S;return[zt,c("span",null,u((S=(a=s(o))==null?void 0:a.driver)==null?void 0:S.name),1)]}),_:1}),t(r,{style:{"margin-bottom":"0"}},{default:e(()=>{var a;return[Pt,c("span",null,u((a=s(o).total)==null?void 0:a.qty_packed),1)]}),_:1})]),_:1})]),_:1})]),_:1}),t(w,null,{default:e(()=>[t(b,{style:{"margin-bottom":"16px"}},{default:e(()=>{var a;return[_("Tujuan: "+u((a=s(o).customer)==null?void 0:a.name),1)]}),_:1}),t(r,null,{default:e(()=>{var a;return[_(" ID : "+u((a=s(o).customer)==null?void 0:a.erp_code),1)]}),_:1}),t(m,{vertical:"",size:15},{default:e(()=>[t(m,{vertical:"",size:0},{default:e(()=>[t(r,{style:{"margin-bottom":"0"}},{default:e(()=>{var a;return[c("span",null,u(N((a=s(o).destination)==null?void 0:a.address)||""),1)]}),_:1}),t(r,{style:{"margin-bottom":"0"}},{default:e(()=>[Nt,t(M,{round:"",bordered:!1},{default:e(()=>[_(u(s(o).status),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c("div",Tt,[c("div",Bt,[t(G,{"bottom-bordered":!1,bordered:!1,"single-line":!0},{default:e(()=>[t(A,null,{default:e(()=>[t(O,null,{default:e(()=>[t(f,null,{default:e(()=>[_("No")]),_:1}),t(f,null,{default:e(()=>[_("ID Manifest")]),_:1}),t(f,null,{default:e(()=>[_("Qty Packing")]),_:1}),t(f,null,{default:e(()=>[_("Tipe Pengiriman")]),_:1}),t(f,null,{default:e(()=>[_("Status")]),_:1}),t(f,null,{default:e(()=>[_("Aksi")]),_:1})]),_:1})]),_:1}),t(K,null,{default:e(()=>[(h(!0),z(C,null,st(s(y).list,(a,S)=>(h(),L(O,{key:S},{default:e(()=>[t(F,{"data-label":"No"},{default:e(()=>[_(u(s(p).limit*(s(p).page-1)+(S+1)),1)]),_:2},1024),t(H,{list:a,onGetData:l},null,8,["list"])]),_:2},1024))),128))]),_:1})]),_:1}),c("div",Lt,[t(J,{page:s(p).page,"onUpdate:page":[i[0]||(i[0]=a=>s(p).page=a),l],"page-count":s(y).total_page,"page-slot":7,"show-size-picker":s(y).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":v},null,8,["page","page-count","show-size-picker"])])])])]),_:1}))])}}});typeof V=="function"&&V(It);export{It as default};

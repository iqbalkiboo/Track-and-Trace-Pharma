import{d as O,b as G,E as W,r as d,f as X,a1 as Y,p as Z,o as U,c as ee,a as h,k as e,w as n,q as m,i as t,h as P,S as ae,ah as ne,F as te,af as le,am as oe,an as ie,ak as se,I as ue,v as de,s as me,b0 as re,ad as _e,ae as pe,aM as ce,bq as ge,J as fe,K as ve,M as he}from"./index.21c0d750.js";import{s as be}from"./storage.731d7fd8.js";import{_ as ke}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";const we={class:"body-tnt"},ye={class:"card-tnt"},xe={class:"bottom-action-button"},Ue={class:"action-item"},Fe=["src"],Te=O({__name:"serialisasi-unik",props:{value:{}},emits:["hideForm","click:save"],setup($,{emit:F}){const w=$,R=G(),z=W(),a=d({}),u=d(!1);X(async()=>{u.value=!0,a.value=w.value,_.value=await w.value.images_arr?w.value.images_arr:[],u.value=!1});const y=()=>{setTimeout(()=>{F("hideForm",a.value.packaging_method)},100)},q=d(null),C=d();C.value={name:{required:!0,message:"Nama tipe kemasan tidak boleh kosong",trigger:"blur"},dimention_length:{type:"number",required:!0,message:"Tidak boleh kosong",trigger:"blur"},dimention_wide:{type:"number",required:!0,message:"Tidak boleh kosong",trigger:"blur"},dimention_height:{type:"number",required:!0,message:"Tidak boleh kosong",trigger:"blur"},dimention_weight:{type:"number",required:!0,message:"Tidak boleh kosong",trigger:"blur"}};const b=d(!1),M=d(""),_=d([]);function N(i){const{url:l}=i;M.value=l,b.value=!0}async function V(i){var l;i.preventDefault(),await((l=q.value)==null?void 0:l.validate()),a.value.images_arr=_.value,a.value.images=[],a.value.images_arr.length>0?a.value.images_arr.forEach(s=>{a.value.images.push(s.id)}):(a.value.images=[],a.value.images_arr=[]),a.value.packaging_method="unique",F("click:save",a.value)}const r=d({show:d(!1),icon:Y(),iconColor:"#36A630",hideIcon:!1,title:"Selamat",subtitle:"Tipe kemasan kolektif berhasil ditambahkan"});function j(){r.value.show=!1}function D(i){_.value=_.value.filter(function(l){return l.id!==i.file.id})}function L(i){var s;return["image/png","image/jpeg"].indexOf(String((s=i.file.file)==null?void 0:s.type))===-1?(z.error("Format gambar harus png atau jpg, tolong upload ulang"),!1):!0}function x(){if(a.value.dimention_length&&a.value.dimention_wide&&a.value.dimention_height){const i=parseFloat(a.value.dimention_length)*parseFloat(a.value.dimention_wide)*parseFloat(a.value.dimention_height);a.value.dimention_volume=Math.round(i*1e3)/1e3}else a.value.dimention_volume=0}function S({file:i,onFinish:l}){u.value=!0;const s=new FormData;s.append("file",i.file),s.append("source","upload"),s.append("title",i.name),s.append("caption",i.name),s.append("alt",i.name),be.uploadStorage(s).then(g=>{g.data.status===200&&(_.value.push({id:g.data.data.id,name:g.data.data.title,status:"finished",url:g.data.data.public_url}),a.value.images_arr=_.value,u.value=!1,l())})}return(i,l)=>{const s=le,g=Z("router-link"),T=oe,E=ie,H=se,p=ue,c=de,I=me,f=re,v=_e,J=pe,K=ce,B=ge,Q=fe,k=ve,A=he;return U(),ee(te,null,[h("div",we,[e(s,{style:{"margin-bottom":"4px"}},{default:n(()=>[m("Unique Packaging")]),_:1}),e(E,null,{default:n(()=>[e(T,null,{default:n(()=>[e(g,{to:`/setting/master-produk/${t(R).params.id}`,onClick:y,class:"text-decoration-none"},{default:n(()=>[m(" Detail Produk ")]),_:1},8,["to"])]),_:1}),e(T,null,{default:n(()=>[m("Unique Packaging")]),_:1})]),_:1}),h("div",ye,[e(Q,{ref_key:"formRef",ref:q,class:"form-tnt","show-require-mark":!1,"label-width":80,model:t(a),rules:t(C)},{default:n(()=>[e(c,{vertical:"",size:0},{default:n(()=>[e(c,{vertical:"",size:0},{default:n(()=>[e(p,{label:"Nama Packaging",path:"name"},{default:n(()=>[e(H,{value:t(a).name,"onUpdate:value":l[0]||(l[0]=o=>t(a).name=o),placeholder:"Example : Primary"},null,8,["value"])]),_:1})]),_:1}),e(c,{vertical:"",size:0},{default:n(()=>[e(I,{style:{"font-weight":"500",display:"block","padding-bottom":"6px","padding-left":"2px"}},{default:n(()=>[m("Dimensi")]),_:1}),e(J,{cols:"5","item-responsive":"",responsive:"screen","x-gap":"16","y-gap":"0"},{default:n(()=>[e(v,{span:"5 m:1"},{default:n(()=>[e(p,{label:"Panjang (cm)",path:"dimention_length"},{default:n(()=>[e(f,{value:t(a).dimention_length,"onUpdate:value":l[1]||(l[1]=o=>t(a).dimention_length=o),placeholder:"0",onInput:x},null,8,["value"])]),_:1})]),_:1}),e(v,{span:"5 m:1"},{default:n(()=>[e(p,{label:"Lebar (cm)",path:"dimention_wide"},{default:n(()=>[e(f,{value:t(a).dimention_wide,"onUpdate:value":l[2]||(l[2]=o=>t(a).dimention_wide=o),placeholder:"0",onInput:x},null,8,["value"])]),_:1})]),_:1}),e(v,{span:"5 m:1"},{default:n(()=>[e(p,{label:"Tinggi (cm)",path:"dimention_height"},{default:n(()=>[e(f,{value:t(a).dimention_height,"onUpdate:value":l[3]||(l[3]=o=>t(a).dimention_height=o),placeholder:"0",onInput:x},null,8,["value"])]),_:1})]),_:1}),e(v,{span:"5 m:1"},{default:n(()=>[e(p,{label:"Volume (cm3)",path:"dimention_volume"},{default:n(()=>[e(f,{value:t(a).dimention_volume,"onUpdate:value":l[4]||(l[4]=o=>t(a).dimention_volume=o),placeholder:"0"},null,8,["value"])]),_:1})]),_:1}),e(v,{span:"5 m:1"},{default:n(()=>[e(p,{label:"Berat (gram)",path:"dimention_weight"},{default:n(()=>[e(f,{value:t(a).dimention_weight,"onUpdate:value":l[5]||(l[5]=o=>t(a).dimention_weight=o),placeholder:"0"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{vertical:"",size:0},{default:n(()=>[e(I,{style:{"font-weight":"500",display:"block","padding-bottom":"6px","padding-left":"2px"}},{default:n(()=>[m("Upload Photo")]),_:1}),t(u)?(U(),P(c,{key:1,size:8},{default:n(()=>[e(B,{height:"90px",width:"96px"}),e(B,{height:"90px",width:"96px"})]),_:1})):(U(),P(K,{key:0,action:"","default-file-list":t(_),"list-type":"image-card",onPreview:N,onRemove:D,onBeforeUpload:L,"custom-request":S},null,8,["default-file-list"]))]),_:1}),e(c,{vertical:"",size:0,style:{"margin-top":"24px"}},{default:n(()=>[e(p,{label:`Jumlah Maksimum Qty Level ${t(a).level}`,path:"pMaxQty"},{default:n(()=>[e(f,{disabled:t(a).level==1,value:t(a).maximum,"onUpdate:value":l[6]||(l[6]=o=>t(a).maximum=o),placeholder:"Masukkan jumlah maksimum"},null,8,["disabled","value"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),h("div",xe,[h("div",Ue,[e(k,{loading:t(u),color:"#828282",class:"button-tnt",onClick:y},{default:n(()=>[m(" Batalkan ")]),_:1},8,["loading"]),e(k,{loading:t(u),color:"#219653",class:"button-tnt",onClick:V},{default:n(()=>[m(" Submit ")]),_:1},8,["loading"])])])]),e(A,{show:t(b),"onUpdate:show":l[7]||(l[7]=o=>ae(b)?b.value=o:null),preset:"card",style:{width:"600px"},title:""},{default:n(()=>[h("img",{src:t(M),style:{width:"100%"}},null,8,Fe)]),_:1},8,["show"]),e(ke,{show:t(r).show,"onUpdate:show":l[8]||(l[8]=o=>t(r).show=o),icon:t(r).icon,"icon-color":t(r).iconColor,"hide-icon":t(r).hideIcon,title:t(r).title,subtitle:t(r).subtitle},{default:n(()=>[e(c,{justify:"center"},{default:n(()=>[e(k,{loading:t(u),color:"#828282",class:"button-tnt",onClick:y},{default:n(()=>[m(" Kembali ke Beranda ")]),_:1},8,["loading"]),e(k,{loading:t(u),color:"#219653",class:"button-tnt",onClick:ne(j,["prevent"])},{default:n(()=>[m(" Tambah Lainnya ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{Te as _};

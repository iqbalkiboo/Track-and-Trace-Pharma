import{s as Ne}from"./storage.731d7fd8.js";import{A as be}from"./AddOutline.a2e673de.js";import{d as ce,r as m,E as me,aI as Oe,o as M,h as N,w as a,k as e,q as n,i as t,ar as ha,R as Be,K as fe,v as ge,N as he,a$ as Re,aM as Ee,I as ke,ak as ve,J as we,M as Ue,u as $e,G as va,c as ue,F as re,a as p,t as h,af as Fe,s as He,ad as Se,ae as Me,aa as Te,as as Ve,ac as ya,b0 as Ke,aj as xe,a9 as Je,W as ba,f as We,e as ka,g as Qe,a7 as wa,a8 as Ua,H as Ge,a_ as $a,aP as Ze,aQ as Ye,aR as Xe,aS as ea,y as aa,aT as ta,b as Sa,S as Ma,am as Ta,an as xa,b1 as Ca,ab as qa,ag as Da,a4 as ze}from"./index.21c0d750.js";import{_ as Ce}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as pe}from"./3pl.9faacd75.js";import{s as qe}from"./setAddress.d52e9e08.js";import"./master-customer.9a7cd6cf.js";import{m as Pa}from"./master-warehouse.353b4b3b.js";import{u as ja}from"./http.7151dc47.js";import{g as Ia}from"./getCompanyId.7d0eb93b.js";import{D as Le}from"./datetime.3abe85e9.js";import{m as na}from"./master-threepl.f4c7982d.js";import{E as la}from"./EllipsisVertical.56989e7a.js";import{r as ye}from"./render-icon.8c81e0de.js";import{S as Aa}from"./setStatus.eab5cece.js";import{L as za}from"./ListOutline.d860ea46.js";import{A as La}from"./Add.4f3b52cf.js";import{C as Na}from"./CloudUploadOutline.5871e1ae.js";import{L as Oa}from"./LocationOutline.22b247fa.js";import"./getHoldingId.48f570fc.js";const Ba=ce({__name:"t-3pl-serah-terima-tujuan-update-status-modal",props:{show:{type:Boolean,default:!1},data:{}},emits:["click:close","handleChangeForm","handleDeleteImage"],setup(ie,{emit:O}){const j=m(null),f=me();async function d(g){var U;return["image/png","image/jpeg"].indexOf(String((U=g.file.file)==null?void 0:U.type))===-1?(f.error("Format gambar harus png atau jpg, tolong upload ulang"),!1):!0}function E(g){const v=new FormData;v.append("file",g.file.file),v.append("source","upload"),v.append("title",g.file.name),v.append("caption",g.file.name),v.append("alt",g.file.name),Ne.uploadStorage(v).then(U=>{O("handleChangeForm",{url:U.data.data.public_url})}).catch(U=>{const s=U.response.data;f.error(s.message)})}function k(){O("click:close",!0)}return Oe(()=>{var g;(g=j.value)==null||g.focus()}),(g,v)=>{const U=ha,s=Be,B=fe,$=ge,W=he,Q=Re,Y=Ee,V=ke,G=ve,w=we,r=Ue;return M(),N(r,{show:g.show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"600px","max-width":"100%","border-radius":"8px"},"onUpdate:show":v[2]||(v[2]=u=>g.$emit("click:close",u))},{default:a(()=>[e($,{vertical:"",size:24},{default:a(()=>[e(U,{style:{"margin-bottom":"0"}},{default:a(()=>[n("Update Status Diterima")]),_:1}),e(w,null,{default:a(()=>[e(V,{label:"Upload Bukti Delivered"},{default:a(()=>{var u;return[(u=g.data)!=null&&u.status_image_url?(M(),N($,{key:0,vertical:""},{default:a(()=>{var o;return[e(s,{width:"300",height:"300",src:(o=g.data)==null?void 0:o.status_image_url},null,8,["src"]),e(B,{size:"small",type:"primary",strong:"",secondary:"",onClick:v[0]||(v[0]=b=>g.$emit("handleDeleteImage","status_image"))},{default:a(()=>[n("hapus")]),_:1})]}),_:1})):(M(),N(Y,{key:1,onBeforeUpload:d,"show-file-list":!1,"custom-request":E},{default:a(()=>[e(Q,{style:{width:"100px"}},{default:a(()=>[e(W,{size:"40",style:{opacity:"0.8"},depth:3},{default:a(()=>[e(t(be))]),_:1})]),_:1})]),_:1}))]}),_:1}),e(V,{label:"Deskripsi"},{default:a(()=>[e(G,{ref_key:"input",ref:j,type:"textarea",placeholder:"",value:g.data.description,onInput:v[1]||(v[1]=u=>g.$emit("handleChangeForm",{description:u}))},null,8,["value"])]),_:1})]),_:1}),e($,{justify:"space-between"},{default:a(()=>[e(B,{type:"primary",onClick:k},{default:a(()=>[n("Submit")]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ra=p("span",null,"PIC: ",-1),Ea=p("span",null,"Total Qty Packing: ",-1),Fa={class:"card-tnt"},Ha={class:"table-tnt"},Va=p("thead",null,[p("tr",null,[p("th",null,"No"),p("th",null,"ID Manifest"),p("th",null,"No. DO"),p("th",null,"Tujuan"),p("th",null,"Alamat"),p("th",null,"Qty Packing")])],-1),Ka=p("td",null,"1",-1),Ja={class:"card-tnt",style:{"margin-top":"3rem"}},Wa={class:"card-tnt",style:{"margin-top":"3rem"}},Qa=ce({__name:"t-3pl-serah-terima-tujuan",props:{show:{type:Boolean,default:!1},manifest_id:{}},emits:["update:show","click:serah","click:get"],setup(ie,{emit:O}){const j=ie,f=$e(),d=m({name:"",phone:"",email:"",date:void 0,tonase:0,volume:0,description:"",status_image:{url:""},awb_image:{url:""},awb:""}),E=m(null),k=m(!1),g=m(!1),v=me(),U=m(!1),s=m({});m({});async function B(){k.value=!0,await pe.getDetailManifest(j.manifest_id).then(u=>{s.value=u.data,k.value=!1}).catch(u=>{if(k.value=!1,u.response){const o=u.response.data;v.error(o.message)}})}async function $(){var u;await((u=E.value)==null?void 0:u.validate().then(async()=>{var b;k.value=!0,U.value=!0;const o={name:d.value.name,email:d.value.email,phone:d.value.phone,date:d.value.date,proof_image:d.value.status_image_url,description:d.value.description,tonase:d.value.tonase,volume:d.value.volume,awb:d.value.awb,awb_image:(b=d.value.awb_image)==null?void 0:b.url,manifest_id:j.manifest_id};await pe.postArrived(o).then(()=>{k.value=!1,U.value=!1,O("update:show",!1),O("click:get"),v.success("Berhasil")}).catch(K=>{k.value=!1,U.value=!1;const R=K.response.data;v.error(R.message)})}).catch(o=>{console.log(o),v.error("Form tidak valid, tolong periksa kembali"),k.value=!1,U.value=!1}))}const W=m();W.value={name:{required:!0,message:"Nama driver tidak boleh kosong",trigger:["input","blur"]},phone:{required:!0,validator(u,o){if(o)if(/^\d*$/.test(o)){if(o.length<8)return new Error("No. Hp kurang dari 8 angka")}else return new Error("No. Hp harus angka");else return new Error("No. Hp tidak boleh kosong");return!0},trigger:["input","blur"]},email:{required:!0,validator(u,o){const b=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;if(o){if(!o.match(b))return new Error("Email tidak valid")}else return new Error("Email tidak boleh kosong");return!0},trigger:["input","blur"]},date:{required:!0,type:"string",message:"Date tidak boleh kosong",trigger:["blur","change"]}};function Q(){g.value=!1}async function Y(u){var b;return["image/png","image/jpeg"].indexOf(String((b=u.file.file)==null?void 0:b.type))===-1?(v.error("Format gambar harus png atau jpg, tolong upload ulang"),!1):!0}async function V(u){d.value.status_image_url=u.url,d.value.description=u.description}function G(u){const o=new FormData;o.append("file",u.file.file),o.append("source","upload"),o.append("title",u.file.name),o.append("caption",u.file.name),o.append("alt",u.file.name),Ne.uploadStorage(o).then(b=>{d.value.awb_image={id:b.data.data.id,url:b.data.data.public_url}}).catch(b=>{const K=b.response.data;v.error(K.message)})}function w(){localStorage.setItem("is_print_open","0"),localStorage.setItem("data",JSON.stringify(s.value));const u=f.resolve({name:"print-serah-tujuan-manifest"});window.open(u.href,"_blank")}function r(u){switch(u){case"awb":d.value={awb_image:{url:""}};break;case"status_image":{d.value={status_image:{url:""}};break}}}return va(()=>j.manifest_id,()=>{B()}),(u,o)=>{const b=Ce,K=Fe,R=He,x=ge,H=Se,ne=Me,J=fe,de=Te,le=Ve,oe=ya,C=ve,I=ke,se=Ke,P=Be,X=he,ee=Re,ae=Ee,l=xe,c=Je,S=we,te=Ue,Z=Ba;return M(),ue(re,null,[e(te,{show:u.show,preset:"card","auto-focus":"",role:"dialog",size:"huge",bordered:!1,style:{width:"1200px","max-width":"100%","border-radius":"8px"},"onUpdate:show":o[10]||(o[10]=i=>u.$emit("update:show",i))},{default:a(()=>[e(x,{vertical:""},{default:a(()=>[t(k)?(M(),N(b,{key:0})):(M(),ue(re,{key:1},[e(x,{vertical:""},{default:a(()=>[e(K,{style:{"margin-bottom":"4px"}},{default:a(()=>[n("Serah Terima Tujuan")]),_:1}),e(x,{justify:"space-between"},{default:a(()=>[e(ne,{cols:"1","x-gap":70},{default:a(()=>[e(H,null,{default:a(()=>[e(x,{vertical:"",size:0},{default:a(()=>[e(R,{style:{"margin-bottom":"0"}},{default:a(()=>{var i,_,A,y;return[Ra,p("span",null,h(((_=(i=t(s).created_by)==null?void 0:i.superadmin)==null?void 0:_.name)||((y=(A=t(s).created_by)==null?void 0:A.user)==null?void 0:y.name)),1)]}),_:1}),e(R,{style:{"margin-bottom":"0"}},{default:a(()=>{var i;return[Ea,p("span",null,h((i=t(s).total)==null?void 0:i.packing),1)]}),_:1})]),_:1})]),_:1})]),_:1}),e(x,{vertical:""},{default:a(()=>[e(x,null,{default:a(()=>[e(J,{type:"info",class:"button-tnt",onClick:w},{default:a(()=>[n("Cetak Manifest")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p("div",Fa,[p("div",Ha,[e(de,{"single-line":!1},{default:a(()=>{var i,_,A,y,q;return[Va,p("tbody",null,[p("tr",null,[Ka,p("td",null,h(t(s).code),1),p("td",null,h(t(s).do.code),1),p("td",null,h((_=(i=t(s).do)==null?void 0:i.destination)==null?void 0:_.name),1),p("td",null,h(t(qe)((y=(A=t(s).do)==null?void 0:A.destination)==null?void 0:y.address)||""),1),p("td",null,h((q=t(s).total)==null?void 0:q.packing),1)])])]}),_:1})])]),e(S,{ref_key:"formRef",ref:E,class:"form-tnt","show-require-mark":!1,"label-width":80,model:t(d),rules:t(W)},{default:a(()=>[p("div",Ja,[e(le,{style:{"margin-bottom":"4px"}},{default:a(()=>[n("Pangambilan")]),_:1}),e(x,{justify:"space-between",align:"center",style:{"margin-bottom":"1rem"}},{default:a(()=>[e(x,{vertical:"",size:0},{default:a(()=>[e(oe,{style:{margin:"0"}},{default:a(()=>[n("3PL")]),_:1}),e(R,{style:{margin:"0"}},{default:a(()=>{var i;return[n(h((i=t(s)["3pl"])==null?void 0:i.name),1)]}),_:1})]),_:1}),e(x,{vertical:"",size:0},{default:a(()=>[e(oe,{style:{margin:"0"}},{default:a(()=>[n("Tanggal")]),_:1}),e(R,{style:{margin:"0"}},{default:a(()=>{var i;return[n(h((i=t(s)["3pl"])==null?void 0:i.pickup_date),1)]}),_:1})]),_:1})]),_:1}),e(I,{label:"AWB (opsional)"},{default:a(()=>[e(C,{value:t(d).awb,"onUpdate:value":o[0]||(o[0]=i=>t(d).awb=i),placeholder:"Input Nomor AWB"},null,8,["value"])]),_:1}),e(I,{label:"Tonase (gram)",path:"tonase"},{default:a(()=>[e(se,{value:t(d).tonase,"onUpdate:value":o[1]||(o[1]=i=>t(d).tonase=i),clearable:"",style:{width:"100%"}},null,8,["value"])]),_:1}),e(I,{label:"Volume (cm3)",path:"volume"},{default:a(()=>[e(se,{value:t(d).volume,"onUpdate:value":o[2]||(o[2]=i=>t(d).volume=i),clearable:"",style:{width:"100%"}},null,8,["value"])]),_:1}),e(I,{label:"Upload Bukti AWB"},{default:a(()=>{var i;return[(i=t(d).awb_image)!=null&&i.url?(M(),N(x,{key:0,vertical:""},{default:a(()=>{var _;return[e(P,{width:"300",height:"300",src:(_=t(d).awb_image)==null?void 0:_.url},null,8,["src"]),e(J,{size:"small",type:"primary",strong:"",secondary:"",onClick:o[3]||(o[3]=A=>r("awb"))},{default:a(()=>[n("hapus")]),_:1})]}),_:1})):(M(),N(ae,{key:1,onBeforeUpload:Y,"show-file-list":!1,"custom-request":G},{default:a(()=>[e(ee,{style:{width:"100px"}},{default:a(()=>[e(X,{size:"40",style:{opacity:"0.8"},depth:3},{default:a(()=>[e(t(be))]),_:1})]),_:1})]),_:1}))]}),_:1}),e(x,{style:{"margin-top":"5px","margin-left":"3px"}},{default:a(()=>[e(R,{style:{"font-size":"11px"}},{default:a(()=>[n("Format gambar harus png atau jpg. Max ukuran 2Mb")]),_:1})]),_:1})]),p("div",Wa,[e(le,{style:{"margin-bottom":"4px"}},{default:a(()=>[n("Penerima Customer")]),_:1}),e(ne,{cols:"2","x-gap":4},{default:a(()=>[e(H,null,{default:a(()=>[e(I,{label:"Nama",path:"name"},{default:a(()=>[e(C,{value:t(d).name,"onUpdate:value":o[4]||(o[4]=i=>t(d).name=i),placeholder:"Masukkan nama penerima"},null,8,["value"])]),_:1}),e(I,{label:"No. Hp",path:"phone"},{default:a(()=>[e(C,{value:t(d).phone,"onUpdate:value":o[5]||(o[5]=i=>t(d).phone=i),placeholder:"Masukkan nomer handphone"},null,8,["value"])]),_:1})]),_:1}),e(H,null,{default:a(()=>[e(I,{label:"Email",path:"email"},{default:a(()=>[e(C,{value:t(d).email,"onUpdate:value":o[6]||(o[6]=i=>t(d).email=i),placeholder:"Masukkan email"},null,8,["value"])]),_:1}),e(I,{label:"Date",path:"date"},{default:a(()=>[e(l,{style:{width:"100%"},type:"date","formatted-value":t(d).date,"onUpdate:formattedValue":o[7]||(o[7]=i=>t(d).date=i)},null,8,["formatted-value"])]),_:1})]),_:1})]),_:1}),e(x,{align:"center"},{default:a(()=>[e(R,null,{default:a(()=>[n("Status :")]),_:1}),e(c,{type:"primary",round:""},{default:a(()=>[n(h(t(s).status),1)]),_:1}),p("div",{class:"text_link",onClick:o[8]||(o[8]=i=>g.value=!0)}," Update Status ")]),_:1})])]),_:1},8,["model","rules"]),e(x,{justify:"center"},{default:a(()=>[e(J,{onClick:o[9]||(o[9]=i=>u.$emit("update:show",!1)),class:"button-tnt"},{default:a(()=>[n("Batalkan")]),_:1}),e(J,{onClick:$,type:"primary",class:"button-tnt"},{default:a(()=>[n("Simpan")]),_:1})]),_:1})],64))]),_:1})]),_:1},8,["show"]),e(Z,{show:t(g),data:t(d),"onClick:close":Q,onHandleChangeForm:V,onHandleDeleteImage:r},null,8,["show","data"])],64)}}}),Ga={class:"body-tnt"},Za={class:"card-tnt"},Ya={class:"table-tnt"},Xa=ce({__name:"t-3pl-add-request-modal",props:{show:{type:Boolean,default:!1},manifest:{}},emits:["update:show","click:close","getArrManifest"],setup(ie,{emit:O}){const j=ie;Oe(()=>{var w;(w=d.value)==null||w.focus()});const f=ba(()=>j.manifest),d=m(null),E=me(),k=m(!1),g=$e(),v=m(),U=m(!1),s=m({"3pl_id":void 0,pickup_date:void 0,pickup_time:void 0,remark:""}),B=m({"3pl_id":{required:!0,message:"3PL tidak boleh kosong"},pickup_date:{required:!0,message:"Tanggal Kirim tidak boleh kosong"},pickup_time:{required:!0,message:"tanggal pengambilan tidak boleh kosong"}}),$=m([]),{mutate:W}=ja("shipping/v1/3pl/requests/create",{method:"POST",queryOptions:{onSuccess:()=>{g.push({name:"pengiriman-request-3pl-list"}),E.success("Berhasil menambahkan request 3pl"),U.value=!0},onError:w=>{E.error(w.data.message)}},httpOptions:{params:{company_id:Ia}}});function Q(){var w;(w=v.value)==null||w.validate(r=>{var u,o;r?E.error("invalid"):W({...s.value,pickup_date:Le.fromMillis((u=s.value)==null?void 0:u.pickup_date).toISODate(),pickup_time:Le.fromMillis((o=s.value)==null?void 0:o.pickup_time).toISOTime({includeOffset:!1}),manifests:f.value.map(b=>({id:b._id,volume:b.volume,weight:b.weight})),remark:s.value.remark})})}const Y=[{label:"Hapus",key:"delete"}];function V(w,r){switch(w){case"delete":{const u=j.manifest.filter(o=>o._id!==r);O("getArrManifest",u),u.length<1&&O("click:close",!0)}break}}async function G(){await na.getThreepl({limit:1e3}).then(w=>{$.value=w.data.list.map(r=>({value:r==null?void 0:r.id,label:r==null?void 0:r.name}))})}return We(()=>{G()}),(w,r)=>{const u=Ve,o=He,b=ge,K=wa,R=Ua,x=Ge,H=ke,ne=xe,J=Se,de=$a,le=Me,oe=Ce,C=Ze,I=Ye,se=Xe,P=ea,X=Ke,ee=he,ae=fe,l=aa,c=ta,S=Te,te=ve,Z=we,i=Ue;return M(),N(i,{"mask-closable":!1,"auto-focus":"",show:w.show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"1500px","max-width":"100%","border-radius":"10px"},"onUpdate:show":r[5]||(r[5]=_=>w.$emit("click:close",_))},{default:a(()=>[p("div",Ga,[e(b,{vertical:"",style:{padding:"1rem"}},{default:a(()=>[e(R,{cols:12,class:"row"},{default:a(()=>[e(K,{span:4},{default:a(()=>[e(b,{vertical:"",size:0},{default:a(()=>[e(u,{style:{"margin-bottom":"0"}},{default:a(()=>[n(" Request 3PL ")]),_:1}),e(o,null,{default:a(()=>[n("PIC : "+h(t(ka).getAuth().user.name),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{vertical:"",style:{"margin-top":"1rem"}},{default:a(()=>[e(Z,{ref_key:"formRef",ref:v,model:t(s),rules:t(B)},{default:a(()=>[e(H,{label:"3PL",path:"3pl_id"},{default:a(()=>[e(x,{placeholder:" Pilih Status",value:t(s)["3pl_id"],"onUpdate:value":r[0]||(r[0]=_=>t(s)["3pl_id"]=_),style:{"max-width":"100%"},options:t($)},null,8,["value","options"])]),_:1}),e(le,{cols:"2","x-gap":"5"},{default:a(()=>[e(J,null,{default:a(()=>[e(H,{label:"Tanggal Kirim",path:"pickup_date"},{default:a(()=>[e(ne,{value:t(s).pickup_date,"onUpdate:value":r[1]||(r[1]=_=>t(s).pickup_date=_),type:"date",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(J,null,{default:a(()=>[e(H,{label:"Jam Pengambilan",path:"pickup_time"},{default:a(()=>[e(de,{value:t(s).pickup_time,"onUpdate:value":r[2]||(r[2]=_=>t(s).pickup_time=_),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),p("div",Za,[p("div",Ya,[t(k)?(M(),N(oe,{key:0})):(M(),N(S,{key:1,"bottom-bordered":!1,bordered:!1,"single-line":!0},{default:a(()=>[e(se,null,{default:a(()=>[e(I,null,{default:a(()=>[e(C,null,{default:a(()=>[n("No")]),_:1}),e(C,null,{default:a(()=>[n("ID Manifest")]),_:1}),e(C,null,{default:a(()=>[n("No. DO")]),_:1}),e(C,null,{default:a(()=>[n("Tujuan")]),_:1}),e(C,null,{default:a(()=>[n("Kota")]),_:1}),e(C,null,{default:a(()=>[n("Qty Packing")]),_:1}),e(C,null,{default:a(()=>[n("Berat (kg)")]),_:1}),e(C,null,{default:a(()=>[n("Vol (cm3)")]),_:1}),e(C,null,{default:a(()=>[n("Jalur")]),_:1}),e(C,null,{default:a(()=>[n("Aksi")]),_:1})]),_:1})]),_:1}),e(c,null,{default:a(()=>[(M(!0),ue(re,null,Qe(t(f),(_,A)=>(M(),N(I,{key:A},{default:a(()=>[e(P,null,{default:a(()=>[n(h(A+1),1)]),_:2},1024),e(P,null,{default:a(()=>[n(h(_.code),1)]),_:2},1024),e(P,null,{default:a(()=>{var y;return[n(h((y=_.do)==null?void 0:y.code),1)]}),_:2},1024),e(P,null,{default:a(()=>{var y,q;return[n(h((q=(y=_.do)==null?void 0:y.destination)==null?void 0:q.name),1)]}),_:2},1024),e(P,null,{default:a(()=>{var y,q;return[n(h(t(qe)((q=(y=_.do)==null?void 0:y.destination)==null?void 0:q.address)),1)]}),_:2},1024),e(P,null,{default:a(()=>{var y;return[n(h((y=_.total)==null?void 0:y.packing),1)]}),_:2},1024),e(P,{style:{"max-width":"100%",width:"250px"}},{default:a(()=>[e(X,{value:_.weight,"onUpdate:value":y=>_.weight=y},null,8,["value","onUpdate:value"])]),_:2},1024),e(P,{style:{width:"250px","max-width":"100%"}},{default:a(()=>[e(X,{value:_.volume,"onUpdate:value":y=>_.volume=y},null,8,["value","onUpdate:value"])]),_:2},1024),e(P,null,{default:a(()=>[n(h(_.vehicle_type),1)]),_:2},1024),e(P,null,{default:a(()=>[e(l,{placement:"bottom-end","show-arrow":"",options:Y,onSelect:y=>V(y,_._id)},{default:a(()=>[e(ae,{tertiary:""},{icon:a(()=>[e(ee,null,{default:a(()=>[e(t(la))]),_:1})]),_:1})]),_:2},1032,["onSelect"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))])]),e(H,{label:"Remark",style:{"margin-top":"1.5rem"}},{default:a(()=>[e(te,{type:"textarea",value:t(s).remark,"onUpdate:value":r[3]||(r[3]=_=>t(s).remark=_)},null,8,["value"])]),_:1}),e(b,{justify:"center",style:{"margin-top":"1rem"}},{default:a(()=>[e(ae,{type:"primary",color:"gray",onClick:r[4]||(r[4]=_=>w.$emit("click:close",!1)),style:{padding:"1rem 3rem"},class:"button-tnt"},{default:a(()=>[n(" Batalkan ")]),_:1}),e(ae,{type:"primary",onClick:Q,class:"button-tnt",style:{padding:"1rem 3rem"}},{default:a(()=>[n("Simpan ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["show"])}}}),et={class:"body-tnt"},at={class:"card-tnt"},tt={class:"table-tnt"},nt={style:{display:"flex","justify-content":"center"}},lt=p("div",{style:{"padding-right":"10px"}},"All",-1),ot={key:1},st=p("td",{colspan:"20",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),ut=[st],it={class:"table-footer"},dt=ce({__name:"index",setup(ie){const O=Sa(),j=$e(),f=m({sort:"desc",page:1,limit:10,delivery_type:"3pl",vehicle_type:null,target_delivery_date:null,"do.destination._id":null,"3pl.id":null}),d=new Aa,E=me(),k=m(!1),g=m(!1),v=m(""),U=m(!1),s=m({}),B=m(!1),$=m([]),W=m([{label:"Need Assign 3pl",value:"need_assign_3pl"},{label:"Shipping",value:"shipping"},{label:"Terkirim",value:"shipped"},{label:"Accepted",value:"accepted"},{label:"Telah di request",value:"requested"}]);function Q(){B.value?($.value=[],s.value.list.forEach(l=>($.value.push(l),l.checked=!0))):s.value.list.forEach(l=>($.value=[],l.checked=!1))}function Y(l,c){l.checked==!0?$.value.push(s.value.list.filter(S=>S._id===c)[0]):$.value=$.value.filter(S=>S._id!==c)}m([{label:"Semarang",value:"semarang"},{label:"Yogyakarta",value:"yogyakarta"}]);const V=m([{label:"Darat",value:"darat"},{label:"Laut",value:"laut"},{label:"Udara",value:"udara"}]),G=m([]),w=m([]);async function r(){k.value=!0,await pe.getmanifest(f.value).then(l=>{s.value=l.data,k.value=!1}).catch(l=>{k.value=!1;const c=l.response.data;s.error(c.message)})}async function u(){k.value=!0,await Pa.getWarehouse({limit:1e3,sort:"desc"}).then(l=>{var c;k.value=!1,G.value=(c=l.data)==null?void 0:c.list.map(S=>({label:S.name,value:S.id}))}).catch(l=>{k.value=!1;const c=l.response.data;s.error(c.message)})}async function o(){k.value=!0,await na.getThreepl({limit:1e3,sort:"desc"}).then(l=>{var c;k.value=!1,w.value=(c=l.data)==null?void 0:c.list.map(S=>({label:S.name,value:S.id}))}).catch(l=>{k.value=!1;const c=l.response.data;s.error(c.message)})}function b(l){switch(l){case"darat":f.value.vehicle_type="darat";break;case"laut":f.value.vehicle_type="laut";break;case"udara":f.value.vehicle_type="udara";break}r()}function K(l){f.value.target_delivery_date=l||null,r()}function R(l){f.value["do.destination._id"]=l||null,r()}function x(l){f.value["3pl.name"]=l||null,ee()}function H(l){j.push({query:{...O.query,page:l}})}function ne(l){f.value.limit=l,r()}function J(l,c){switch(l){case"detail":break;case"serah":v.value=c,U.value=!0;break;case"track/manifest":j.push(`/lacak/manifest/${c}`);break;case"request":B.value=!1,Q(),$.value=s.value.list.filter(S=>S._id===c),g.value=!0;break}}function de(){g.value=!1}function le(){U.value=!1}function oe(){var l;((l=$.value)==null?void 0:l.length)>0?g.value=!0:E.error("Anda Harus Memilih Manifest")}const C=l=>[{label:"Serah Terima",key:"serah",disabled:l==="shipping"||l==="need_request_3pl",icon:ye(Na)},{label:"Request 3PL",key:"request",icon:ye(be),disabled:l==="requested"},{label:"Lacak Manifest",key:"track/manifest",icon:ye(Oa)}];async function I(l,c,S){const te={line:l,manifest_id:S};await pe.postVechileType(te).catch(Z=>{Z.response&&E.error(Z.response.data.message)})}async function se(l){$.value=l}function P(l){f.value.status=l||null,r()}const X=m(0);function ee(){f.value.page=1,clearTimeout(X.value),X.value=setTimeout(function(){r()},600)}function ae(l){l?f.value.products=l||null:f.value.products=null,ee()}return We(async()=>{O.query.page?(f.value.page=parseInt(O.query.page),await r(),await u(),await o()):await j.replace({query:{page:1}})}),(l,c)=>{const S=Fe,te=Ta,Z=xa,i=ge,_=he,A=fe,y=ve,q=Se,oa=xe,_e=Ge,sa=Me,ua=Ce,z=Ze,De=Ca,Pe=Ye,ia=Xe,L=ea,da=Je,ra=aa,_a=ta,pa=Te,ca=qa,ma=Da,fa=Xa,ga=Qa;return M(),ue(re,null,[p("div",et,[e(i,{justify:"space-between"},{default:a(()=>[e(i,{vertical:"",size:0},{default:a(()=>[e(S,{style:{"margin-bottom":"4px"}},{default:a(()=>[n("3PL")]),_:1}),e(Z,null,{default:a(()=>[e(te,null,{default:a(()=>[n("3PL")]),_:1})]),_:1})]),_:1}),e(i,null,{default:a(()=>[e(A,{class:"button-tnt",type:"info",onClick:c[0]||(c[0]=F=>l.$router.push({name:"pengiriman-request-3pl-list"}))},{default:a(()=>[e(_,{component:t(za)},null,8,["component"]),n(" List Request 3PL ")]),_:1}),e(A,{class:"button-tnt",type:"primary",onClick:oe},{default:a(()=>[e(_,{component:t(La)},null,8,["component"]),n(" Request 3PL ")]),_:1})]),_:1})]),_:1}),e(sa,{cols:"7","x-gap":"12",style:{"margin-top":"1rem"}},{default:a(()=>[e(q,null,{default:a(()=>[e(y,{value:t(f).code,"onUpdate:value":[c[1]||(c[1]=F=>t(f).code=F),ee],clearable:"",placeholder:"Cari Kode Manifest"},null,8,["value"])]),_:1}),e(q,null,{default:a(()=>[e(y,{"onUpdate:value":ae,clearable:"",placeholder:"Cari Kode Product"})]),_:1}),e(q,null,{default:a(()=>[e(y,{"onUpdate:value":x,placeholder:"Cari Nama 3pl",clearable:""})]),_:1}),e(q,null,{default:a(()=>[e(oa,{"value-format":"yyyy-MM-dd",clearable:"",onUpdateFormattedValue:K,placeholder:"Tanggal Kirim",type:"date"})]),_:1}),e(q,null,{default:a(()=>[e(_e,{options:t(G),"onUpdate:value":R,clearable:"",filterable:"",placeholder:"Pilih Tujuan"},null,8,["options"])]),_:1}),e(q,null,{default:a(()=>[e(_e,{options:t(V),placeholder:"Pilih Jalur",clearable:"","onUpdate:value":b},null,8,["options"])]),_:1}),e(q,null,{default:a(()=>[e(_e,{options:t(W),"onUpdate:value":P,clearable:"",filterable:"",placeholder:"Pilih Status"},null,8,["options"])]),_:1})]),_:1}),p("div",at,[p("div",tt,[t(k)?(M(),N(ua,{key:0})):(M(),N(ca,{key:1,"x-scrollable":""},{default:a(()=>[e(pa,{"bottom-bordered":!1,bordered:!1,"single-line":!0},{default:a(()=>[e(ia,null,{default:a(()=>[e(Pe,null,{default:a(()=>[e(z,null,{default:a(()=>[n("No")]),_:1}),e(z,null,{default:a(()=>[n("Tanggal kirim")]),_:1}),e(z,null,{default:a(()=>[n("ID Manifest")]),_:1}),e(z,null,{default:a(()=>[n("No. DO")]),_:1}),e(z,null,{default:a(()=>[n("Tujuan")]),_:1}),e(z,null,{default:a(()=>[n("Kota")]),_:1}),e(z,null,{default:a(()=>[n("Qty Packing")]),_:1}),e(z,null,{default:a(()=>[n("3PL")]),_:1}),e(z,null,{default:a(()=>[n("Jalur")]),_:1}),e(z,null,{default:a(()=>[n("Est Tonase(Gram)")]),_:1}),e(z,null,{default:a(()=>[n("Status")]),_:1}),e(z,null,{default:a(()=>[p("div",nt,[lt,e(De,{size:"large",checked:t(B),"onUpdate:checked":c[2]||(c[2]=F=>Ma(B)?B.value=F:null),onClick:Q},null,8,["checked"])])]),_:1}),e(z,null,{default:a(()=>[n("Aksi")]),_:1})]),_:1})]),_:1}),e(_a,null,{default:a(()=>{var F,je;return[((je=(F=t(s))==null?void 0:F.list)==null?void 0:je.length)>0?(M(!0),ue(re,{key:0},Qe(t(s).list,(T,Ie)=>(M(),N(Pe,{key:Ie},{default:a(()=>[e(L,{"data-label":"NO"},{default:a(()=>[n(h(t(f).limit*(t(f).page-1)+(Ie+1)),1)]),_:2},1024),e(L,{"data-label":"Tanggal Kirim"},{default:a(()=>[n(h(T.target_delivery_date),1)]),_:2},1024),e(L,{"data-label":"ID Manifest"},{default:a(()=>[n(h(T.code),1)]),_:2},1024),e(L,{"data-label":"NO. DO"},{default:a(()=>[n(h(T.do.code),1)]),_:2},1024),e(L,{"data-label":"Tujuan"},{default:a(()=>[n(h(T.do.destination.name),1)]),_:2},1024),e(L,{"data-label":"Kota"},{default:a(()=>{var D,Ae;return[n(h(t(qe)((Ae=(D=T.do)==null?void 0:D.destination)==null?void 0:Ae.address)),1)]}),_:2},1024),e(L,{"data-label":"Qty Packing"},{default:a(()=>[n(h(T.total.packing),1)]),_:2},1024),e(L,{"data-label":"3PL"},{default:a(()=>{var D;return[n(h(((D=T["3pl"])==null?void 0:D.name)||"-"),1)]}),_:2},1024),e(L,{"data-label":"Jalur"},{default:a(()=>[e(i,{justify:"end",align:"center"},{default:a(()=>[e(_e,{value:T.vehicle_type,"onUpdate:value":[D=>T.vehicle_type=D,D=>I(D,D,T._id)],options:t(V),style:{width:"150px","max-width":"100%"}},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1024),e(L,{"data-label":"Est Ton(Gram)"},{default:a(()=>[n(h(T.weight),1)]),_:2},1024),e(L,{"data-label":"Status"},{default:a(()=>[e(da,{type:"primary",round:""},{default:a(()=>[n(h(t(d).Request3pl(T.status)),1)]),_:2},1024)]),_:2},1024),e(L,{style:{"text-align":"center"},"data-label":"All"},{default:a(()=>[e(i,{justify:"end",align:"center"},{default:a(()=>[e(De,{size:"large",label:"",checked:T.checked,"onUpdate:checked":D=>T.checked=D,onClick:D=>Y(T,T._id)},null,8,["checked","onUpdate:checked","onClick"])]),_:2},1024)]),_:2},1024),e(L,{"data-label":"Aksi"},{default:a(()=>[e(ra,{placement:"bottom-end","show-arrow":"",options:C(T.status),onSelect:D=>J(D,T._id)},{default:a(()=>[e(A,{tertiary:""},{icon:a(()=>[e(_,null,{default:a(()=>[e(t(la))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])]),_:2},1024)]),_:2},1024))),128)):(M(),ue("tr",ot,ut))]}),_:1})]),_:1})]),_:1})),p("div",it,[e(ma,{page:t(f).page,"onUpdate:page":[c[3]||(c[3]=F=>t(f).page=F),H],"page-size":t(f).limit,"onUpdate:pageSize":[c[4]||(c[4]=F=>t(f).limit=F),ne],"page-count":t(s).total_page,"page-slot":7,"show-size-picker":t(s).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])])])]),e(fa,{show:t(g),"onClick:close":de,manifest:t($),onGetArrManifest:se},null,8,["show","manifest"]),e(ga,{show:t(U),"onUpdate:show":le,manifest_id:t(v),"onClick:get":r},null,8,["show","manifest_id"])],64)}}});typeof ze=="function"&&ze(dt);export{dt as default};

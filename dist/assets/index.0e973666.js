import{_ as W}from"./t-permission-modal.bdf6acbc.js";import{_ as X}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as Z}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as ee,b as te,E as ae,r,a1 as oe,f as ne,e as se,aF as q,p as le,o as p,c as F,a as M,k as a,w as o,q as u,t as E,i as t,h as k,j as b,F as T,ah as ie,af as ue,am as re,an as ce,ak as de,I as me,J as pe,K as fe,v as _e}from"./index.21c0d750.js";import{c as C}from"./constant.549d5c21.js";import{u as B}from"./uom.5e6088e0.js";import{A as ve}from"./AlertCircleOutline.19cf574c.js";import{C as he}from"./CheckmarkCircleOutline.8fddcae1.js";import"./getHoldingId.48f570fc.js";const ke={class:"body-tnt"},be={class:"card-tnt"},ge={class:"bottom-action-button"},we={class:"action-item"},Ve=ee({__name:"index",setup(ye){const U=te(),N=ae(),g=r(),d=r(""),w=r(!1),l=r(!1),i=r({}),V=r(),A=r();A.value={name:{required:!0,message:"Nama UoM tidak boleh kosong",trigger:"blur"},code:{required:!0,message:"Kode UoM tidak boleh kosong",trigger:"blur"},description:{required:!0,message:"Deskripsi tidak boleh kosong",trigger:"blur"}};const e=r({show:r(!1),icon:oe(),iconColor:"",hideIcon:!1,title:"",subtitle:"",type:""}),h=r({show:!1});ne(()=>{g.value=se.getAuth(),U.params.crud=="create"?(d.value="create",q.isGranted(C.accessPrivileges.uom+".create")?R():h.value.show=!0):(d.value="update",q.isGranted(C.accessPrivileges.uom+".update")?R():h.value.show=!0)});function G(){h.value.show=!1}async function R(){if(d.value=="update"){w.value=!0,l.value=!0;const n=U.params.id;await B.getDetailUom(n).then(s=>{j(s.data),w.value=!1,l.value=!1}).catch(s=>{w.value=!1,l.value=!1;const _=s.response.data;N.error(_.message)})}}function S(){l.value=!0;let n="";g.value.xxtype==="5up3r4dm1n"?n=g.value["xx-usertype-access"].holding_id:n=g.value.users.user_type.id;const s={holding_id:n,name:i.value.name.trim(),description:i.value.description,code:i.value.code.trim()};if(d.value=="create")B.createUom(s).then(()=>{l.value=!1,$(),f(),setTimeout(()=>{P()},300)}).catch(_=>{const v=_.response.data;l.value=!1,f(),setTimeout(()=>{K(v)},300)});else{const _=U.params.id;B.updateUom(_,s).then(()=>{l.value=!1,$(),f(),setTimeout(()=>{P()},300)}).catch(v=>{const y=v.response.data;l.value=!1,f(),setTimeout(()=>{K(y)},300)})}}function j(n){i.value={name:n.name.trim(),description:n.description,code:n.code.trim()}}function $(){i.value={name:"",description:"",code:""}}async function I(n){var s;n.preventDefault(),await((s=V.value)==null?void 0:s.validate().then(()=>{L()}).catch(()=>{N.error("Form tidak valid, tolong periksa kembali")}))}function f(){e.value.show=!1}function L(){e.value.type="confirm",e.value.hideIcon=!0,e.value.title="Konfirmasi",d.value==="create"?e.value.subtitle="Apakah Anda yakin untuk menambah UoM?":e.value.subtitle="Apakah Anda yakin untuk mengubah UoM?",e.value.show=!0}function K(n){e.value.type="failed",e.value.hideIcon=!1,e.value.iconColor="#EB5757",e.value.icon=ve,e.value.title="Gagal",Object.keys(n.validation).length>0?e.value.subtitle=n.validation:e.value.subtitle=n.message,e.value.show=!0}function P(){e.value.type="success",e.value.hideIcon=!1,e.value.iconColor="#219653",e.value.icon=he,d.value==="create"?(e.value.title="Berhasil Tambah Data",e.value.subtitle="Data UoM berhasil ditambahkan"):(e.value.title="Berhasil Ubah Data",e.value.subtitle="Data UoM berhasil diubah"),e.value.show=!0}return(n,s)=>{const _=ue,v=le("router-link"),y=re,O=ce,z=Z,x=de,D=me,H=pe,m=fe,J=_e,Y=X,Q=W;return p(),F(T,null,[M("div",ke,[a(_,{style:{"margin-bottom":"4px"}},{default:o(()=>[u(E(n.$route.params.crud=="create"?"Tambah Unit of Measurement":"Edit Unit of Measurement"),1)]),_:1}),a(O,null,{default:o(()=>[a(y,null,{default:o(()=>[a(v,{to:"/setting/master-uom",class:"text-decoration-none"},{default:o(()=>[u(" Unit of Measurement ")]),_:1})]),_:1}),a(y,null,{default:o(()=>[u(E(n.$route.params.crud=="create"?"Tambah Unit of Measurement":"Edit Unit of Measurement"),1)]),_:1})]),_:1}),M("div",be,[t(w)?(p(),k(z,{key:0})):(p(),k(H,{key:1,ref_key:"formRef",ref:V,class:"form-tnt",model:t(i),rules:t(A),"show-require-mark":!1},{default:o(()=>[a(D,{path:"name",label:"Nama UoM"},{default:o(()=>[a(x,{value:t(i).name,"onUpdate:value":s[0]||(s[0]=c=>t(i).name=c),placeholder:"Masukkan Nama uom"},null,8,["value"])]),_:1}),a(D,{path:"code",label:"Kode UoM"},{default:o(()=>[a(x,{value:t(i).code,"onUpdate:value":s[1]||(s[1]=c=>t(i).code=c),placeholder:"Masukkan kode uom"},null,8,["value"])]),_:1}),a(D,{label:"Deskripsi",path:"description"},{default:o(()=>[a(x,{value:t(i).description,"onUpdate:value":s[2]||(s[2]=c=>t(i).description=c),placeholder:"Masukkan deskripsi",type:"textarea",autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})]),_:1},8,["model","rules"]))]),M("div",ge,[M("div",we,[a(v,{to:{name:"setting-master-uom"},class:"text-decoration-none"},{default:o(()=>[a(m,{color:"#828282",class:"button-tnt"},{default:o(()=>[u("Kembali")]),_:1})]),_:1}),t(d)==="create"&&n.$filters.isGranted(t(C).accessPrivileges.uom+".create")?(p(),k(m,{key:0,color:"#219653",class:"button-tnt",loading:t(l),onClick:I},{default:o(()=>[u(" Simpan ")]),_:1},8,["loading"])):b("",!0),t(d)==="update"&&n.$filters.isGranted(t(C).accessPrivileges.uom+".update")?(p(),k(m,{key:1,color:"#219653",class:"button-tnt",loading:t(l),onClick:I},{default:o(()=>[u(" Simpan ")]),_:1},8,["loading"])):b("",!0)])])]),a(Y,{show:t(e).show,"onUpdate:show":s[3]||(s[3]=c=>t(e).show=c),icon:t(e).icon,"icon-color":t(e).iconColor,"hide-icon":t(e).hideIcon,title:t(e).title,subtitle:t(e).subtitle},{default:o(()=>[a(J,{justify:"center"},{default:o(()=>[t(e).type=="confirm"?(p(),F(T,{key:0},[a(m,{loading:t(l),color:"#828282",class:"button-tnt",onClick:f},{default:o(()=>[u(" Tutup ")]),_:1},8,["loading"]),a(m,{loading:t(l),color:"#219653",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:ie(S,["prevent"])},{default:o(()=>[u(" Yakin ")]),_:1},8,["loading","onClick"])],64)):b("",!0),t(e).type=="success"?(p(),F(T,{key:1},[a(m,{color:"#828282",class:"button-tnt",onClick:f},{default:o(()=>[u(" Tambah Lainya ")]),_:1}),a(v,{to:{name:"setting-master-uom"},class:"text-decoration-none"},{default:o(()=>[a(m,{color:"#219653",class:"button-tnt"},{default:o(()=>[u(" Kembali ke Beranda ")]),_:1})]),_:1})],64)):b("",!0),t(e).type=="failed"?(p(),k(m,{key:2,color:"#828282",class:"button-tnt",onClick:f},{default:o(()=>[u(" Tutup ")]),_:1})):b("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"]),a(Q,{show:t(h).show,"onUpdate:show":s[4]||(s[4]=c=>t(h).show=c),"onClick:close":G},null,8,["show"])],64)}}});export{Ve as default};

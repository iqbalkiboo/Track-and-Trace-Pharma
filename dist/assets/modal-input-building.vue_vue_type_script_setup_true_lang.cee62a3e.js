import{m as k}from"./master-warehouse.353b4b3b.js";import{d as C,E as N,r as p,G as y,f as R,aI as E,o as L,h as j,w as u,k as s,a as H,q as w,i as n,ar as I,H as O,I as T,K as z,v as D,J as F,M as G}from"./index.21c0d750.js";const J={style:{"text-align":"start","margin-bottom":"20px"}},$=C({__name:"modal-input-building",props:{show:{type:Boolean,default:!1},value:{default:()=>({})},loading:{type:Boolean,default:!1}},emits:["update:show","update:value","click:close","click:confirm"],setup(x,{emit:g}){const c=x,_=N(),t=p(!1),h=p(null),l=p({}),m=p([]),f=p([]),v=p();v.value={plant:{required:!0,message:"Plant tidak boleh kosong",trigger:["input","blur"]},building:{required:!0,message:"Building tidak boleh kosong",trigger:["input","blur"]}},y(l,a=>g("update:value",a),{deep:!0}),y(()=>c.show,a=>{a&&B()}),R(()=>{l.value=c.value}),E(()=>{l.value=c.value});async function B(){t.value=!0,await P(),t.value=!1}async function P(){t.value=!0,l.value.building=null,m.value=[];const a={sort:"desc",sort_field:"created_at",page:1,limit:-1};await k.getWarehouse(a).then(e=>{e.data.list.forEach(o=>{m.value.push({key:o.key,value:o.id,label:o.name})}),t.value=!1}).catch(e=>{t.value=!1;const i=e.response.data;_.error(i.message)})}async function V(a){t.value=!0,l.value.building=null,f.value=[];const e={warehouse_id:a,sort:"desc",sort_field:"created_at",page:1,limit:-1};await k.getBuilding(e).then(i=>{i.data.list.forEach(r=>{f.value.push({key:r.key,value:r.id,label:r.name})}),t.value=!1}).catch(i=>{t.value=!1;const o=i.response.data;_.error(o.message)})}async function M(){var a;await((a=h.value)==null?void 0:a.validate().then(()=>{g("click:confirm",!0),g("update:value",l.value)}).catch(()=>{_.error("Form tidak valid, tolong periksa kembali")}))}return(a,e)=>{const i=I,o=O,r=T,U=z,b=D,W=F,q=G;return L(),j(q,{"mask-closable":!1,show:c.show,preset:"card",role:"dialog",size:"huge",bordered:!1,style:{width:"470px","max-width":"100%","border-radius":"10px"},"header-style":{paddingLeft:"30px",paddingRight:"30px",paddingBottom:"15px"},"content-style":{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"20px"},"onUpdate:show":e[3]||(e[3]=d=>a.$emit("click:close",d))},{default:u(()=>[s(b,{vertical:"",style:{"padding-left":"10px","padding-right":"10px"}},{default:u(()=>[H("div",J,[s(i,{style:{"margin-bottom":"0"}},{default:u(()=>[w(" Pilih Warehouse Tujuan ")]),_:1})]),s(W,{ref_key:"formRef",ref:h,class:"form-tnt","show-require-mark":!1,"label-width":80,model:n(l),rules:n(v)},{default:u(()=>[s(r,{label:"Pilih Plant",path:"plant"},{default:u(()=>[s(o,{value:n(l).plant,"onUpdate:value":e[0]||(e[0]=d=>n(l).plant=d),options:n(m),filterable:"",placeholder:"Pilih Plant",disabled:n(t),onUpdateValue:e[1]||(e[1]=d=>V(d))},null,8,["value","options","disabled"])]),_:1}),s(r,{label:"Pilih Bulding",path:"building"},{default:u(()=>[s(o,{value:n(l).building,"onUpdate:value":e[2]||(e[2]=d=>n(l).building=d),options:n(f),filterable:"",placeholder:"Pilih Warehouse Bulding",disabled:n(t)},null,8,["value","options","disabled"])]),_:1}),s(b,{justify:"center"},{default:u(()=>[s(U,{loading:n(t)||c.loading,type:"primary",class:"button-tnt",onClick:M},{default:u(()=>[w(" Simpan ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"])}}});export{$ as _};

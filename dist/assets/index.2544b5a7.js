import{_ as ue}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as _e}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as re}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as pe,u as de,E as me,r as _,a1 as fe,f as ge,aF as N,p as he,o as i,c as k,a as w,k as e,w as t,q as l,i as a,h as r,N as $,j as T,F as C,g as ve,t as E,ah as B,Q as I,af as ye,am as be,an as ke,K as we,v as Ce,ak as Pe,a7 as xe,a8 as Ne,aP as $e,aQ as Te,aR as Ee,aS as Be,y as Se,aT as Ae,aa as De,ab as Fe,ag as Ge}from"./index.21c0d750.js";import{c as f}from"./constant.549d5c21.js";import{m as V}from"./master-company.1c364b5b.js";import{A as Ie}from"./Add.4f3b52cf.js";import{E as Ve}from"./EllipsisVertical.56989e7a.js";import{P as ze}from"./Pencil.0b65f5de.js";import{T as Me}from"./Trash.4f4f705c.js";import{H as Re}from"./HelpCircleOutline.a54a41ed.js";import{C as He}from"./CheckmarkCircleOutline.8fddcae1.js";import"./AlertCircleOutline.19cf574c.js";import"./getCompanyId.7d0eb93b.js";import"./getHoldingId.48f570fc.js";const Ue={class:"body-tnt"},Le={class:"card-tnt"},Oe={class:"table-tnt"},je={class:"table-footer"},it=pe({__name:"index",setup(Ke){const z=de(),S=me(),g=_(!1),p=_(!1),h=_({}),u=_({search:"",sort:"desc",dir:"created_at",page:1,limit:10}),n=_({show:_(!1),type:"",icon:fe(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),v=_({id:"",name:""}),P=_([]),A=o=>()=>I($,null,{default:()=>I(o)});ge(()=>{M(),N.isGranted(f.accessPrivileges.company+".list")&&d()});function M(){N.isGranted(f.accessPrivileges.company+".update")&&P.value.push({label:"Edit Data",key:"edit",icon:A(ze)}),N.isGranted(f.accessPrivileges.company+".delete")&&P.value.push({label:"Hapus Data",key:"delete",icon:A(Me)})}async function d(){g.value=!0,await V.getCompany(u.value).then(o=>{h.value=o.data,g.value=!1,n.value.show=!1}).catch(o=>{g.value=!1;const s=o.response.data;S.error(s.message)})}function R(){u.value.page=0;const o=_();clearTimeout(o.value),o.value=setTimeout(()=>{d()},1e3)}function H(o){u.value.limit=o,d()}function U(o,s,x){switch(o){case"edit":z.push({path:`/setting/master-company/update/${s}`});break;case"delete":v.value.id=s,v.value.name=x,j();break}}function L(){n.value.show=!1}function O(){n.value.type="success",n.value.icon=He,n.value.iconColor="#219653",n.value.title="Berhasil",n.value.subtitle="Anda berhasil menghapus data company",n.value.show=!0}function j(){n.value.type="delete",n.value.icon=Re,n.value.iconColor="#EB5757",n.value.title="Perhatian",n.value.subtitle=`Apakah Anda yakin untuk menghapus ${v.value.name} ?`,n.value.show=!0}function K(){p.value=!0,V.deleteCompany(v.value.id).then(()=>{n.value.show=!1,setTimeout(()=>{O(),p.value=!1},300)}).catch(o=>{p.value=!1;const s=o.response.data;S.error(s.message)})}return(o,s)=>{const x=ye,Q=be,q=ke,m=we,J=he("router-link"),D=Ce,W=Pe,X=xe,Y=Ne,Z=re,y=$e,F=Te,ee=Ee,b=Be,te=Se,ae=Ae,ne=De,oe=Fe,se=Ge,le=_e,ce=ue;return i(),k(C,null,[w("div",Ue,[e(x,{style:{"margin-bottom":"4px"}},{default:t(()=>[l("Perusahaan")]),_:1}),e(q,null,{default:t(()=>[e(Q,null,{default:t(()=>[l("perusahaan")]),_:1})]),_:1}),w("div",Le,[o.$filters.isGranted(a(f).accessPrivileges.company+".create")?(i(),r(D,{key:0},{default:t(()=>[e(J,{to:{path:"/setting/master-company/create/1"},class:"text-decoration-none"},{default:t(()=>[e(m,{color:"#219653",class:"button-tnt"},{default:t(()=>[e(a($),{component:a(Ie)},null,8,["component"]),l(" Tambah Perusahaan ")]),_:1})]),_:1})]),_:1})):T("",!0),o.$filters.isGranted(a(f).accessPrivileges.company+".list")?(i(),k(C,{key:1},[e(Y,{gutter:"16",style:{"margin-top":"24px"}},{default:t(()=>[e(X,{span:6},{default:t(()=>[e(W,{value:a(u).search,"onUpdate:value":s[0]||(s[0]=c=>a(u).search=c),onKeyup:R,type:"text",placeholder:"Cari Perusahaan"},null,8,["value"])]),_:1})]),_:1}),w("div",Oe,[a(g)?(i(),r(Z,{key:0})):(i(),r(oe,{key:1,"x-scrollable":""},{default:t(()=>[e(ne,{bordered:!1,"single-line":!0},{default:t(()=>[e(ee,null,{default:t(()=>[e(F,null,{default:t(()=>[e(y,{style:{"text-align":"center"}},{default:t(()=>[l("No")]),_:1}),e(y,null,{default:t(()=>[l("Nama Perusahaan")]),_:1}),e(y,null,{default:t(()=>[l("Erp Code")]),_:1}),e(y,{style:{"text-align":"center"}},{default:t(()=>[l("Aksi")]),_:1})]),_:1})]),_:1}),e(ae,null,{default:t(()=>[(i(!0),k(C,null,ve(a(h).list,(c,G)=>(i(),r(F,{key:G},{default:t(()=>[e(b,{"data-label":"No",style:{"text-align":"center"}},{default:t(()=>[l(E(a(u).limit*(a(u).page-1)+(G+1)),1)]),_:2},1024),e(b,{"data-label":"Nama Perusahaan"},{default:t(()=>[l(E(c.name),1)]),_:2},1024),e(b,{"data-label":"Erp Code"},{default:t(()=>[l(E(c.erp_code),1)]),_:2},1024),e(b,{"data-label":"Aksi",style:{"text-align":"center"}},{default:t(()=>[e(te,{placement:"bottom-end",options:a(P),"show-arrow":!0,onSelect:ie=>U(ie,c.id,c.name)},{default:t(()=>[e(m,{tertiary:""},{icon:t(()=>[e(a($),null,{default:t(()=>[e(a(Ve))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})),w("div",je,[e(se,{page:a(u).page,"onUpdate:page":[s[1]||(s[1]=c=>a(u).page=c),d],"page-count":a(h).total_page,"page-slot":10,"show-size-picker":a(h).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":H},null,8,["page","page-count","show-size-picker"])])])],64)):(i(),r(le,{key:2}))])]),e(ce,{show:a(n).show,"onUpdate:show":s[2]||(s[2]=c=>a(n).show=c),icon:a(n).icon,"icon-color":a(n).iconColor,"hide-icon":a(n).hideIcon,title:a(n).title,subtitle:a(n).subtitle},{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[a(n).type=="success"?(i(),r(m,{key:0,color:"#828282",class:"button-tnt",onClick:B(d,["prevent"])},{default:t(()=>[l(" Tutup ")]),_:1},8,["onClick"])):T("",!0),a(n).type=="delete"?(i(),k(C,{key:1},[e(m,{loading:a(p),color:"#828282",class:"button-tnt",onClick:B(L,["prevent"])},{default:t(()=>[l(" Tidak ")]),_:1},8,["loading","onClick"]),e(m,{loading:a(p),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:B(K,["prevent"])},{default:t(()=>[l(" Iya ")]),_:1},8,["loading","onClick"])],64)):T("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{it as default};

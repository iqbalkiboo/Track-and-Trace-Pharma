import{_ as be}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as ke}from"./t-not-granted.vue_vue_type_script_setup_true_lang.a30cf979.js";import{_ as ye}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as we,u as Ce,E as xe,r,a1 as Pe,f as Te,aF as S,p as Ve,o as i,c as g,a as x,k as e,w as t,q as s,i as a,h as v,N as $,j as A,F as w,g as U,t as b,ah as B,Q as q,af as Ke,am as Se,an as $e,K as Ae,v as Be,ak as De,a7 as Ne,H as Ee,a8 as Ie,aP as Me,aQ as Fe,aR as Ge,aS as ze,a9 as He,y as Re,aT as Ue,aa as qe,ab as Oe,ag as Le}from"./index.21c0d750.js";import{c as C}from"./constant.549d5c21.js";import{m as O}from"./master-kendaraan.dfe5bfd2.js";import{m as je}from"./master-kategori-kendaraan.1100df56.js";import{A as Qe}from"./Add.4f3b52cf.js";import{E as Je}from"./EllipsisVertical.56989e7a.js";import{P as We}from"./Pencil.0b65f5de.js";import{T as Xe}from"./Trash.4f4f705c.js";import{H as Ye}from"./HelpCircleOutline.a54a41ed.js";import{C as Ze}from"./CheckmarkCircleOutline.8fddcae1.js";import"./AlertCircleOutline.19cf574c.js";import"./getCompanyId.7d0eb93b.js";const et={class:"body-tnt"},tt={class:"card-tnt"},at={class:"table-tnt"},nt={key:1},ot=x("td",{colspan:"8",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),lt=[ot],st={class:"table-footer"},Ct=we({__name:"index",setup(it){const L=Ce(),V=xe(),d=r(!1),_=r(!1),k=r({}),D=r([]),N=r({id:"",name:""}),n=r({type:"",show:r(!1),icon:Pe(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),c=r({q:"",dir:"desc",sort:"created_at",page:1,limit:10,vehicle_categories:null}),K=r([]),E=o=>()=>q($,null,{default:()=>q(o)});Te(()=>{j(),S.isGranted(C.accessPrivileges.vehicle+".list")&&(h(),Q())});function j(){S.isGranted(C.accessPrivileges.vehicle+".update")&&K.value.push({label:"Edit Data",key:"edit",icon:E(We)}),S.isGranted(C.accessPrivileges.vehicle+".delete")&&K.value.push({label:"Hapus Data",key:"delete",icon:E(Xe)})}async function h(){d.value=!0,_.value=!0,await O.getVehicle(c.value).then(o=>{k.value=o.data.data,d.value=!1,_.value=!1,n.value.show=!1}).catch(o=>{d.value=!1,_.value=!1;const l=o.response.data;V.error(l.message)})}async function Q(){d.value=!0,await je.getVehicleCategory({limit:100}).then(o=>{o.data.data.list.forEach(P=>{D.value.push({label:P.name,value:P.id})}),d.value=!1,n.value.show=!1}).catch(o=>{d.value=!1;const l=o.response.data;V.error(l.message)})}function J(o){o&&(c.vehicle_categories=o),h()}const I=r(0);function W(){c.value.page=1,clearTimeout(I.value),I.value=setTimeout(function(){h()},600)}function X(o){c.value.limit=o,h()}function Y(o,l){switch(o){case"edit":L.push({path:`/setting/master-kendaraan/update/${l}`});break;case"delete":N.value.id=l,ee();break}}function M(){n.value.show=!1}function Z(){n.value.type="success",n.value.icon=Ze,n.value.iconColor="#219653",n.value.title="Berhasil",n.value.subtitle="Anda berhasil menghapus data kendaraan",n.value.show=!0}function ee(){n.value.type="delete",n.value.icon=Ye,n.value.iconColor="#EB5757",n.value.title="Perhatian",n.value.subtitle="Apakah Anda yakin untuk menghapus data kendaraan?",n.value.show=!0}async function te(){_.value=!0,await O.deleteVehicle(N.value.id).then(()=>{n.value.show=!1,setTimeout(()=>{h().then(()=>{Z()}),_.value=!1},300)}).catch(o=>{_.value=!1;const l=o.response.data;V.error(l.message)})}return(o,l)=>{const P=Ke,ae=Se,ne=$e,y=Ae,oe=Ve("router-link"),F=Be,le=De,G=Ne,se=Ee,ie=Ie,ce=ye,p=Me,z=Fe,ue=Ge,m=ze,re=He,_e=Re,de=Ue,pe=qe,me=Oe,fe=Le,ge=ke,he=be;return i(),g(w,null,[x("div",et,[e(P,{style:{"margin-bottom":"4px"}},{default:t(()=>[s("Master Kendaraan")]),_:1}),e(ne,null,{default:t(()=>[e(ae,null,{default:t(()=>[s("Master Kendaraan")]),_:1})]),_:1}),x("div",tt,[o.$filters.isGranted(a(C).accessPrivileges.vehicle+".create")?(i(),v(F,{key:0},{default:t(()=>[e(oe,{to:{path:"/setting/master-kendaraan/create/1"},style:{"text-decoration":"none"}},{default:t(()=>[e(y,{color:"#219653",class:"button-tnt"},{default:t(()=>[e(a($),{component:a(Qe)},null,8,["component"]),s(" Tambah Kendaraan ")]),_:1})]),_:1})]),_:1})):A("",!0),o.$filters.isGranted(a(C).accessPrivileges.vehicle+".list")?(i(),g(w,{key:1},[e(ie,{gutter:"16",style:{"margin-top":"24px"}},{default:t(()=>[e(G,{span:6},{default:t(()=>[e(le,{value:a(c).q,"onUpdate:value":[l[0]||(l[0]=u=>a(c).q=u),W],clearable:"",placeholder:"Cari Plat Kendaraan"},null,8,["value"])]),_:1}),e(G,{span:6},{default:t(()=>[e(se,{value:a(c).vehicle_categories,"onUpdate:value":[l[1]||(l[1]=u=>a(c).vehicle_categories=u),l[2]||(l[2]=u=>J(u))],options:a(D),clearable:"",placeholder:"Pilih Jenis Kendaraan",style:{width:"256px","max-width":"100%"}},null,8,["value","options"])]),_:1})]),_:1}),x("div",at,[a(d)?(i(),v(ce,{key:0})):(i(),v(me,{key:1,"x-scrollable":""},{default:t(()=>[e(pe,{"bottom-bordered":!1,bordered:!1,"single-line":!0},{default:t(()=>[e(ue,null,{default:t(()=>[e(z,{style:{"border-radius":"20px"}},{default:t(()=>[e(p,null,{default:t(()=>[s("No")]),_:1}),e(p,null,{default:t(()=>[s("Apikey IoT")]),_:1}),e(p,null,{default:t(()=>[s("Plat")]),_:1}),e(p,null,{default:t(()=>[s("Tipe Kendaraan")]),_:1}),e(p,null,{default:t(()=>[s("Plant/Cabang")]),_:1}),e(p,{style:{"text-align":"center"}},{default:t(()=>[s("Status")]),_:1}),e(p,{style:{width:"4rem","text-align":"center"}},{default:t(()=>[s("Aksi")]),_:1})]),_:1})]),_:1}),e(de,null,{default:t(()=>{var u,H;return[((H=(u=a(k))==null?void 0:u.list)==null?void 0:H.length)>0?(i(!0),g(w,{key:0},U(a(k).list,(f,R)=>(i(),v(z,{key:R},{default:t(()=>[e(m,{"data-label":"No"},{default:t(()=>[s(b(a(c).limit*(a(c).page-1)+(R+1)),1)]),_:2},1024),e(m,{"data-label":"ID Kendaraan"},{default:t(()=>[s(b(f.apikey_iot),1)]),_:2},1024),e(m,{"data-label":"Plat"},{default:t(()=>[s(b(f.plate_number),1)]),_:2},1024),e(m,{"data-label":"Tipe Kendaraan"},{default:t(()=>[s(b(f.vehicle_categories.name),1)]),_:2},1024),e(m,{"data-label":"Plant/Cabang"},{default:t(()=>[(i(!0),g(w,null,U(f.warehouses,(T,ve)=>(i(),g("div",{key:ve},b(T.name+"-"+T.code),1))),128))]),_:2},1024),e(m,{"data-label":"Status",style:{"text-align":"center"}},{default:t(()=>[e(re,{bordered:!1,type:f.status.value===1?"success":"error"},{default:t(()=>[s(b(f.status.label=="active"?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),_:2},1024),e(m,{"data-label":"Aksi",style:{"text-align":"center"}},{default:t(()=>[e(_e,{placement:"bottom-end",options:a(K),"show-arrow":!0,onSelect:T=>Y(T,f.id)},{default:t(()=>[e(y,{tertiary:""},{icon:t(()=>[e(a($),null,{default:t(()=>[e(a(Je))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])]),_:2},1024)]),_:2},1024))),128)):(i(),g("tr",nt,lt))]}),_:1})]),_:1})]),_:1})),x("div",st,[e(fe,{page:a(c).page,"onUpdate:page":[l[3]||(l[3]=u=>a(c).page=u),h],"page-count":a(k).total_page,"page-slot":10,"show-size-picker":a(k).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":X},null,8,["page","page-count","show-size-picker"])])])],64)):(i(),v(ge,{key:2}))])]),e(he,{show:a(n).show,"onUpdate:show":l[4]||(l[4]=u=>a(n).show=u),icon:a(n).icon,"icon-color":a(n).iconColor,"hide-icon":a(n).hideIcon,title:a(n).title,subtitle:a(n).subtitle},{default:t(()=>[e(F,{justify:"center"},{default:t(()=>[a(n).type=="success"?(i(),v(y,{key:0,loading:a(_),color:"#828282",class:"button-tnt",onClick:B(M,["prevent"])},{default:t(()=>[s(" Tutup ")]),_:1},8,["loading","onClick"])):A("",!0),a(n).type=="delete"?(i(),g(w,{key:1},[e(y,{loading:a(_),color:"#828282",class:"button-tnt",onClick:B(M,["prevent"])},{default:t(()=>[s(" Tidak ")]),_:1},8,["loading","onClick"]),e(y,{loading:a(_),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:B(te,["prevent"])},{default:t(()=>[s(" Iya ")]),_:1},8,["loading","onClick"])],64)):A("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"])],64)}}});export{Ct as default};

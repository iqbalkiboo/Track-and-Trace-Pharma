import{_ as A}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as G,b as Q,u as X,E as ee,r as v,f as te,o as m,c as N,k as s,w as n,q as _,t as r,i as o,ah as $,aY as z,a as l,aZ as B,h as w,j as ae,F as oe,g as ne,af as se,aJ as le,s as ie,v as re,ak as ue,a7 as ce,a8 as _e,aa as de,ab as pe,ag as me,L as ge,K as fe}from"./index.21c0d750.js";import{m as C}from"./master-warehouse.353b4b3b.js";import{s as he}from"./penyimpanan-stok.4693d521.js";import{h as ye}from"./moment.62d3fb0a.js";import"./getCompanyId.7d0eb93b.js";const ke={class:"body-tnt"},be=["value"],ve={style:{display:"flex","align-items":"end"}},we=l("thead",null,[l("tr",null,[l("th",null,"No"),l("th",null,"Kode Produk"),l("th",null,"Item"),l("th",null,"No Batch"),l("th",null,"Expired Date"),l("th",{style:{"text-align":"right"}},"Total Stok")])],-1),Se={style:{"text-align":"right"}},xe={key:1},Ne=l("td",{colspan:"6",style:{"text-align":"center"}},"Belum ada data produk tersedia",-1),Ce=[Ne],De={style:{"margin-top":"14px",display:"flex","justify-content":"center"}},Ie={class:"bottom-action-button"},Te={class:"action-item"},Pe=G({__name:"detail-list-product",setup($e){const f=Q(),b=X(),h=ee(),S=v(!1),y=v({}),u=v({}),i=localStorage.getItem("warehouse_type"),M=localStorage.getItem("warehouse_name"),d=v({search:"",sort:"desc",sort_field:"created_at",current_allocation:!0,page:1,limit:10});te(()=>{localStorage.removeItem("xx_product_storage"),K()});async function K(){S.value=!0,await x(),await R(),S.value=!1}async function x(){let e=i;e==="building_non_room"?e="building":e==="room_non_rack"?e="room":e==="rack_pallete_non_bin"&&(e="rack_pallete");const t=f.params.id;await he.getListProduct(e,t,d.value).then(c=>{y.value=c.data}).catch(c=>{const D=c.response.data;h.error(D.message)})}async function R(){const e=f.params.id;i==="building"||i==="building_non_room"?await C.getDetailBuilding(e).then(t=>{u.value=t.data}).catch(t=>{const c=t.response.data;h.error(c.message)}):i==="room"||i==="room_non_rack"?await C.getDetailRoom(e).then(t=>{u.value=t.data}).catch(t=>{const c=t.response.data;h.error(c.message)}):i==="rack_pallete"||i==="rack_pallete_non_bin"?await C.getDetailRackPallete(e).then(t=>{u.value=t.data}).catch(t=>{const c=t.response.data;h.error(c.message)}):await C.getDetailBin(e).then(t=>{u.value=t.data}).catch(t=>{const c=t.response.data;h.error(c.message)})}function L(e){d.value.page=1,d.value.limit=e,x()}const I=v(0);function U(){clearTimeout(I.value),I.value=setTimeout(function(){x()},600)}function P(e){let t="";return e.warehouse_building&&(t+=e.warehouse_building.name+" / "),e.warehouse_room&&(t+=e.warehouse_room.name+" / "),e.warehouse_rack&&(t+=e.warehouse_rack.name+" / "),t+=e.name,t}function j(){const e=document.getElementById("copyCode");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),h.success("Kode erp tersalin")}function E(e){i==="building"||i==="building_non_room"?localStorage.setItem("building_id",f.params.id):i==="room"?localStorage.setItem("room_id",f.params.id):i==="rack_pallete"?localStorage.setItem("rack_id",f.params.id):localStorage.setItem("bin_id",f.params.id),localStorage.setItem("xx_product_storage",JSON.stringify(e)),b.push({name:"penyimpanan-stok-id-list-serialize"})}function V(){if(i==="building")b.push({name:"penyimpanan-stok"});else if(i==="room"||i==="building_non_room"){const e=localStorage.getItem("building_id");b.push({name:"penyimpanan-stok-id-detail-building",params:{id:e}})}else if(i==="rack_pallete"||i==="room_non_rack"){const e=localStorage.getItem("room_id");b.push({name:"penyimpanan-stok-id-detail-room",params:{id:e}})}else if(i==="bin"||i==="rack_pallete_non_bin"){const e=localStorage.getItem("rack_id");b.push({name:"penyimpanan-stok-id-detail-rack",params:{id:e}})}}return(e,t)=>{const c=se,D=le,p=ie,k=re,F=ue,T=ce,H=_e,J=A,O=de,q=pe,W=me,Y=ge,Z=fe;return m(),N("div",ke,[s(k,{vertical:"",size:14},{default:n(()=>[s(k,{justify:"space-between"},{default:n(()=>[s(k,{vertical:"",size:0},{default:n(()=>[s(c,{style:{"margin-bottom":"4px"}},{default:n(()=>[_(r(o(M)),1)]),_:1}),s(D,{style:{"margin-bottom":"0"}},{default:n(()=>[_(r(Object.keys(o(u)).length>0?P(o(u)):"loading..."),1)]),_:1}),s(p,{type:"primary",strong:"",style:{cursor:"pointer"},onClick:$(j,["prevent"])},{default:n(()=>[_(r(o(u).erp_code),1)]),_:1},8,["onClick"]),z(l("div",null,[z(l("input",{type:"text",value:o(u).erp_code,id:"copyCode"},null,8,be),[[B,!1]])],512),[[B,!1]])]),_:1}),l("div",ve,[s(F,{value:o(d).search,"onUpdate:value":[t[0]||(t[0]=a=>o(d).search=a),U],type:"text",placeholder:"Cari nama produk",clearable:"",style:{width:"300px","max-width":"200%"}},null,8,["value"])])]),_:1}),s(H,null,{default:n(()=>[o(i)!=="bin"?(m(),w(T,{key:0,span:4},{default:n(()=>[s(k,{vertical:""},{default:n(()=>[s(p,null,{default:n(()=>[_(" Kapsitas(m3) : "+r(e.$filters.toNumber(o(u).volume)),1)]),_:1}),s(p,null,{default:n(()=>{var a;return[_(" Terisi(m3) : "+r(e.$filters.toNumber((a=o(u).results)==null?void 0:a.total_used_volume)),1)]}),_:1}),s(p,null,{default:n(()=>{var a;return[_(" Usage(%) : "+r(e.$filters.toNumber((a=o(u).results)==null?void 0:a.total_used_volume_percent)),1)]}),_:1})]),_:1})]),_:1})):ae("",!0),s(T,{span:4},{default:n(()=>[o(i)==="bin"?(m(),w(k,{key:0,vertical:""},{default:n(()=>[s(p,null,{default:n(()=>{var a;return[_(" Total SKU : "+r(e.$filters.toNumber((a=o(u).results)==null?void 0:a.total_product)),1)]}),_:1}),s(p,null,{default:n(()=>{var a;return[_(" Total Stok : "+r(e.$filters.toNumber((a=o(u).results)==null?void 0:a.total_first_level)),1)]}),_:1})]),_:1})):(m(),w(k,{key:1,vertical:""},{default:n(()=>[s(p,null,{default:n(()=>{var a,g;return[_(" Total SKU : "+r(e.$filters.toNumber((g=(a=o(u).results)==null?void 0:a.current)==null?void 0:g.total_product)),1)]}),_:1}),s(p,null,{default:n(()=>{var a,g;return[_(" Total Stok : "+r(e.$filters.toNumber((g=(a=o(u).results)==null?void 0:a.current)==null?void 0:g.total_first_level)),1)]}),_:1})]),_:1}))]),_:1})]),_:1}),s(Y,{style:{"margin-bottom":"1rem","border-radius":"10px"}},{default:n(()=>[o(S)?(m(),w(J,{key:0})):(m(),w(q,{key:1,"x-scrollable":""},{default:n(()=>[s(O,{bordered:!1,"single-line":!1},{default:n(()=>[we,l("tbody",null,[o(y).products&&o(y).products.length>0?(m(!0),N(oe,{key:0},ne(o(y).products,(a,g)=>(m(),N("tr",{key:g},[l("td",null,r(o(d).limit*(o(d).page-1)+(g+1)),1),l("td",null,[s(p,{type:"primary",strong:"",style:{cursor:"pointer","text-decoration":"underline"},onClick:$(ze=>E(a),["prevent"])},{default:n(()=>[_(r(a.code),1)]),_:2},1032,["onClick"])]),l("td",null,r(a.name),1),l("td",null,r(a.batch),1),l("td",null,r(o(ye)(a.expired_date).format("yyyy-MM-DD")),1),l("td",Se,r(e.$filters.toNumber(a.count)),1)]))),128)):(m(),N("tr",xe,Ce))])]),_:1})]),_:1})),l("div",De,[s(W,{page:o(d).page,"onUpdate:page":[t[1]||(t[1]=a=>o(d).page=a),x],"page-size":o(d).limit,"onUpdate:pageSize":[t[2]||(t[2]=a=>o(d).limit=a),L],"page-count":o(y).total_page,"page-slot":7,"show-size-picker":o(y).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])]),_:1})]),_:1}),l("div",Ie,[l("div",Te,[s(Z,{color:"#828282",class:"button-tnt",style:{width:"120px"},loading:o(S),onClick:V},{default:n(()=>[_(" Kembali ")]),_:1},8,["loading"])])])])}}});export{Pe as default};

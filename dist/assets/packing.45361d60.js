import{_ as Q}from"./t-modal-scan-serialisasi.vue_vue_type_script_setup_true_lang.9d726df6.js";import{_ as T}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as G,E as J,b as W,r as u,f as X,o as _,c as b,i as t,h as k,F as C,k as n,w as e,q as l,t as r,g as Y,j as Z,S as ee,as as ae,ac as ne,v as te,ak as se,K as le,L as oe,ag as ie}from"./index.21c0d750.js";import{d as ue,f as R,e as re,m as j}from"./reception.0ba4dd71.js";import"./getCompanyId.7d0eb93b.js";const me=G({__name:"packing",setup(ce){const D=J(),z=W(),f=u(!1),h=u(!1),S=u(!1),c=u(null),L=u(null),g=u({}),P=u(),$=u(!1),y=u(null);X(()=>{N()});async function N(){S.value=!0,await A(),await V(),await w(),S.value=!1}async function A(){const o=await ue(z.params.id);L.value=o.data,P.value={page:1,limit:10,reception_id:L.value.id,parent_code:z.params.code}}async function V(){const o=await R(z.params.code);c.value=o.data}async function w(){const o=await re(P.value);g.value=o.data}function x(){w()}async function E(o){h.value=!0;const s=await R(o).finally(()=>{h.value=!1});$.value=!0,y.value=s.data}async function F(){await j({codes:[y.value.code],status:"approved"}),D.success("Serialize berhasil diupdate."),w(),f.value=!1}async function K(){await j({codes:[y.value.code],status:"broken"}),D.success("Serialize berhasil diupdate."),w(),f.value=!1}return(o,s)=>{const U=T,B=ae,m=ne,d=te,q=se,v=le,M=oe,H=ie,O=Q;return _(),b(C,null,[t(S)?(_(),k(U,{key:0})):(_(),b(C,{key:1},[n(d,{vertical:"",style:{padding:"1rem"}},{default:e(()=>[n(d,{vertical:"",size:0},{default:e(()=>[n(B,{style:{"margin-bottom":"0"}},{default:e(()=>{var a,p;return[l(" ID Level "+r((a=t(c))==null?void 0:a.level)+": "+r((p=t(c))==null?void 0:p.code),1)]}),_:1}),n(m,null,{default:e(()=>{var a;return[l("ID Manifest: "+r((a=t(c))==null?void 0:a.manifest.code),1)]}),_:1}),n(m,null,{default:e(()=>{var a;return[l("ID DO: "+r((a=t(c))==null?void 0:a.do.code),1)]}),_:1}),n(m,null,{default:e(()=>{var a;return[l("Produk: "+r((a=t(c))==null?void 0:a.product.name),1)]}),_:1}),n(m,null,{default:e(()=>{var a,p;return[l(" Location: "+r((a=t(c))==null?void 0:a.warehouse_building.code)+" - "+r((p=t(c))==null?void 0:p.warehouse_building.name),1)]}),_:1})]),_:1})]),_:1}),n(d,{justify:"space-between",style:{padding:"1rem"}},{default:e(()=>[n(q,{placeholder:"ID Kemasan/Product"}),n(d,null,{default:e(()=>[n(v,{type:"error",onClick:s[0]||(s[0]=a=>o.$router.push(`/penerimaan/serialisasi/${o.$route.params.id}/bulk`))},{default:e(()=>[l("Bulk Aksi")]),_:1}),n(v,{type:"warning",onClick:s[1]||(s[1]=a=>f.value=!0)},{default:e(()=>[l("ScanQR")]),_:1})]),_:1})]),_:1}),n(M,null,{default:e(()=>[n(d,{vertical:"",size:24},{default:e(()=>{var a,p;return[(_(!0),b(C,null,Y((p=(a=t(g))==null?void 0:a.list)!=null?p:[],i=>(_(),k(M,{key:i.id,"content-style":{background:"#eee",padding:".5rem"}},{default:e(()=>[n(d,{style:{padding:"0 1rem"},align:"center",justify:"space-between"},{default:e(()=>[n(B,{style:{margin:"0"}},{default:e(()=>[l(" ID Level "+r(i.level)+": "+r(i.code),1)]),_:2},1024),n(d,{align:"center"},{default:e(()=>[n(m,{style:{"font-size":"0.8rem"}},{default:e(()=>[l(" Status: "),i.status=="missing"?(_(),k(v,{key:0,type:"warning",size:"small"},{default:e(()=>[l(" Missing ")]),_:1})):i.status=="broken"?(_(),k(v,{key:1,type:"error",size:"small"},{default:e(()=>[l(" Broken ")]),_:1})):i.status=="approved"?(_(),k(v,{key:2,type:"success",size:"small"},{default:e(()=>[l(" Approved ")]),_:1})):Z("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),n(d,{justify:"center"},{default:e(()=>{var i;return[n(H,{page:t(g).page,"onUpdate:page":[s[2]||(s[2]=I=>t(g).page=I),s[3]||(s[3]=I=>x())],"page-count":(i=t(g).total_page)!=null?i:0,"page-slot":5},null,8,["page","page-count"])]}),_:1})]}),_:1})]),_:1})],64)),n(O,{show:t(f),"onUpdate:show":s[4]||(s[4]=a=>ee(f)?f.value=a:null),result:t($),data:t(y),"onClick:submit":E,"onClick:approve":F,"onClick:broken":K},null,8,["show","result","data"])],64)}}});export{me as default};

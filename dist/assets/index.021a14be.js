import{_ as _e}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as pe,u as me,E as fe,r as i,a1 as he,f as ge,o as m,c as S,a as e,k as t,w as o,q as f,ah as R,i as a,S as ye,h as V,F as G,g as be,t as c,af as ke,am as ve,an as Se,N as we,K as Me,v as xe,ak as Pe,a7 as Ce,a8 as ze,a9 as Ne,y as De,aa as $e,ab as Be,ag as Ie}from"./index.21c0d750.js";import{r as b}from"./render-icon.8c81e0de.js";import{h as Te}from"./moment.62d3fb0a.js";import{s as Ke}from"./serialisasi.378d5040.js";import{_ as Oe}from"./modal-import-excel.vue_vue_type_script_setup_true_lang.1bc6b06c.js";import{_ as Ae}from"./modal-sync-sap.vue_vue_type_script_setup_true_lang.d60543c8.js";import{_ as Ee}from"./modal-cancel-serialize.vue_vue_type_script_setup_true_lang.f6dd7ab8.js";import{A as H}from"./Add.4f3b52cf.js";import{C as Le}from"./CloudUploadOutline.5871e1ae.js";import{E as Re}from"./EllipsisVertical.56989e7a.js";import{S as Ve}from"./SearchOutline.47b929a4.js";import{P as Ge}from"./PrintOutline.c0cc935d.js";import{C as He}from"./CloseOutline.cda7564f.js";import{L as Ue}from"./LocationOutline.22b247fa.js";import"./getCompanyId.7d0eb93b.js";import"./getHoldingId.48f570fc.js";const Fe={class:"body-tnt"},je={class:"card-tnt"},qe={class:"table-tnt"},Qe=e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"center"}},"No"),e("th",null,"No PK"),e("th",null,"Tanggal"),e("th",null,"Kode Produk"),e("th",null,"Nama Produk"),e("th",null,"No. Batch"),e("th",null,"Expired Duration"),e("th",null,"Qty"),e("th",{style:{"text-align":"center"}},"Tipe Serialisasi"),e("th",{style:{"text-align":"center"}},"Status"),e("th",{style:{"text-align":"center"}},"Aksi")])],-1),We={style:{"text-align":"center"},"data-label":"No"},Je={"data-label":"No Pk"},Xe={"data-label":"Tanggal Produk"},Ye={"data-label":"Kode Produk"},Ze={"data-label":"Nama Produk"},et={"data-label":"No. Batch"},tt={"data-label":"Expired Duration"},at={"data-label":"Qty"},ot={"data-label":"Tipe Serialisasi",style:{"text-align":"center"}},nt={"data-label":"Status",style:{"text-align":"center"}},lt={"data-label":"Aksi",style:{"text-align":"center"}},st={key:1},it=e("td",{colspan:"11",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),ct=[it],rt={class:"table-footer"},zt=pe({__name:"index",setup(ut){const w=me(),U=fe(),D=i(null),k=i(""),v=i(!0),M=i(!1),h=i({}),r=i({search:"",sort:"desc",sort_field:"created_at",page:1,limit:10}),g=i({id:"",name:"",type:""}),F=i({show:i(!1),type:"",icon:he(),iconColor:"",hideIcon:!1,title:"",subtitle:""}),x=i(!1),P=i(!1),$=i(""),C=i(!1);ge(()=>{d()});async function d(){v.value=!0,M.value=!0,await Ke.getSerialize(r.value).then(n=>{h.value=n.data,v.value=!1,M.value=!1,F.value.show=!1}).catch(n=>{v.value=!1,M.value=!1;const l=n.response.data;U.error(l.message)})}function j(n){r.value.page=1,r.value.limit=n,d()}function q(n){const l=[{label:"Detail Serialisasi",key:"detail",icon:b(Ve)},{label:"Cetak Serialisasi",key:"print",icon:b(Ge)},{label:"Tambah Serialisasi",key:"create",icon:b(H)},{label:"Batalkan Serialisasi",key:"cancel",icon:b(He)},{label:"Lacak PK",key:"lacak",icon:b(Ue)}];return n==="canceled"||n==="rejected"||n==="released"?l.filter(u=>u.key==="detail"||u.key==="lacak"):n==="draft"?l.filter(u=>u.key==="detail"||u.key==="cancel"||u.key==="lacak"):l}function Q(n,l){switch(n){case"detail":w.push({path:`/produksi/serialisasi/${l}`});break;case"print":w.push({path:`/produksi/serialisasi/${l}/print`});break;case"create":g.value.id=l,B("bon");break;case"cancel":Y(l);break;case"lacak":w.push({path:`/lacak/pk/${l}`});break}}function B(n){n==="bon"?g.value.type="bon":g.value.type="",x.value=!0}function W(){x.value=!1}function J(){P.value=!0}function X(){P.value=!1}function Y(n){$.value=n,C.value=!0}function Z(){C.value=!1}function ee(){r.value.page=1,clearTimeout(D.value),D.value=setTimeout(()=>{r.value.search=k.value,d()},300)}return(n,l)=>{const u=ke,te=ve,ae=Se,z=we,N=Me,oe=xe,ne=Pe,le=Ce,se=ze,ie=_e,I=Ne,ce=De,re=$e,ue=Be,de=Ie;return m(),S(G,null,[e("div",Fe,[t(u,{style:{"margin-bottom":"4px"}},{default:o(()=>[f("Serialisasi")]),_:1}),t(ae,null,{default:o(()=>[t(te,null,{default:o(()=>[f("Serialisasi")]),_:1})]),_:1}),e("div",je,[t(oe,null,{default:o(()=>[t(N,{color:"#219653",class:"button-tnt",onClick:l[0]||(l[0]=R(_=>B(""),["prevent"]))},{icon:o(()=>[t(z,null,{default:o(()=>[t(a(H))]),_:1})]),default:o(()=>[f(" Tambah PK ")]),_:1}),t(N,{type:"primary",class:"button-tnt",onClick:R(J,["prevent"])},{icon:o(()=>[t(z,null,{default:o(()=>[t(a(Le))]),_:1})]),default:o(()=>[f(" Sync With ERP ")]),_:1},8,["onClick"])]),_:1}),t(se,{gutter:"16",style:{"margin-top":"24px"}},{default:o(()=>[t(le,{span:6},{default:o(()=>[t(ne,{placeholder:"Cari ID PK",value:a(k),"onUpdate:value":l[1]||(l[1]=_=>ye(k)?k.value=_:null),onKeyup:ee},null,8,["value"])]),_:1})]),_:1}),e("div",qe,[a(v)?(m(),V(ie,{key:0})):(m(),V(ue,{key:1,"x-scrollable":""},{default:o(()=>[t(re,{"single-line":!1},{default:o(()=>{var _;return[Qe,e("tbody",null,[((_=a(h).list)==null?void 0:_.length)>0?(m(!0),S(G,{key:0},be(a(h).list,(s,T)=>{var K,O,A,E;return m(),S("tr",{key:T},[e("td",We,c(a(r).limit*(a(r).page-1)+(T+1)),1),e("td",Je,c(s.pk_id),1),e("td",Xe,c(a(Te)(s.date.pk_date).format("yyyy-MM-DD")),1),e("td",Ye,c(s.product.item_code),1),e("td",Ze,c(s.product.short_name),1),e("td",et,c(s.batch_number),1),e("td",tt,c(s.product.expired_date_duration)+" tahun ",1),e("td",at,c(s.serialize.length>0?s.serialize[0].qty:0),1),e("td",ot,[t(I,{bordered:!1,type:"primary"},{default:o(()=>{var p,y,L;return[f(c(((p=s.product)==null?void 0:p.serialize_type)=="authentication_bpom"?"Authentication BPOM":((y=s.product)==null?void 0:y.serialize_type)=="authentication_gtin"?"Authentication GTIN":((L=s.product)==null?void 0:L.serialize_type)=="identification_bpom"?"Identifikasi BPOM":"-"),1)]}),_:2},1024)]),e("td",nt,[t(I,{bordered:!1,type:((K=s.status.global)==null?void 0:K.value)==="canceled"||((O=s.status.global)==null?void 0:O.value)==="rejected"?"error":((A=s.status.global)==null?void 0:A.value)==="draft"?"warning":"success",round:""},{default:o(()=>{var p,y;return[f(c(n.$filters.toStatus((y=(p=s.status)==null?void 0:p.global)==null?void 0:y.value)),1)]}),_:2},1032,["type"])]),e("td",lt,[t(ce,{placement:"bottom-end",options:q((E=s.status.global)==null?void 0:E.value),onSelect:p=>Q(p,s.id)},{default:o(()=>[t(N,{tertiary:""},{icon:o(()=>[t(z,null,{default:o(()=>[t(a(Re))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])])}),128)):(m(),S("tr",st,ct))])]}),_:1})]),_:1})),e("div",rt,[t(de,{page:a(r).page,"onUpdate:page":[l[2]||(l[2]=_=>a(r).page=_),d],"page-count":a(h).total_page,"page-slot":7,"show-size-picker":a(h).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":j},null,8,["page","page-count","show-size-picker"])])])])]),t(Oe,{"is-show-modal":a(x),type:a(g).type,id:a(g).id,onHideModal:W,onGetData:d},null,8,["is-show-modal","type","id"]),t(Ae,{"is-show-modal":a(P),onHideModal:X,onGetData:d},null,8,["is-show-modal"]),t(Ee,{"is-show-modal":a(C),"id-serialize":a($),onHideModal:Z,onGetData:d},null,8,["is-show-modal","id-serialize"])],64)}}});export{zt as default};

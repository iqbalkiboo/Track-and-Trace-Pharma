import{_ as I}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as J,b as Q,E as W,r as m,f as X,o as r,c as _,a as x,k as l,w as s,q as n,t as o,i as a,ak as Y,S,al as Z,F as v,h as w,j as g,af as aa,am as ea,an as ta,s as la,K as sa,v as na,a5 as oa,a6 as ia}from"./index.21c0d750.js";import{h as N}from"./moment.62d3fb0a.js";import{_ as ua,l as U}from"./modal-detail-storage.vue_vue_type_script_setup_true_lang.94220208.js";import{_ as da}from"./distribusi.vue_vue_type_script_setup_true_lang.9e366c7a.js";import{_ as ra}from"./penyimpanan.vue_vue_type_script_setup_true_lang.9683b465.js";import{_ as pa}from"./modal-detail-distribution.vue_vue_type_script_setup_true_lang.8f610336.js";import"./exportFromJSON.6e5672c8.js";import"./getCompanyId.7d0eb93b.js";const ca={class:"body-tnt"},ma={class:"card-tnt",style:{"background-color":"#eeeeee"}},fa={key:0,class:"card-tnt"},_a=x("div",{style:{"margin-top":"15px"}},null,-1),ya=x("div",{style:{"margin-top":"15px"}},null,-1),va=x("div",{style:{"margin-top":"15px"}},null,-1),ga={class:"card-tnt"},Ca=J({__name:"index",setup(ba){const E=Q(),C=W(),D=m(!1),$=m(!1),y=m(!1),c=m(""),e=m({}),L=m({}),K=m(null),M=m({sort:"created_at",dir:"desc",limit:1e4}),h=m({show:!1,data:{}}),f=m({show:!1,data:{},dataDistribution:{}}),b=m(""),B=m("distribusi");X(()=>{var u;b.value=E.params.type,(u=K.value)==null||u.focus()});async function z(){if(c.value){D.value=!0,$.value=!0;const u=c.value;B.value="distribusi",b.value==="batch"?await U.getLacakDOBatch(u,M.value).then(t=>{e.value=t.data,D.value=!1,$.value=!1}).catch(t=>{D.value=!1,$.value=!1;const p=t.response.data;C.error(p.message)}):b.value==="serialisasi"&&await U.getLacakDOSerial(u,M.value).then(t=>{e.value=t.data,D.value=!1,$.value=!1}).catch(t=>{D.value=!1,$.value=!1;const p=t.response.data;C.error(p.message)})}}async function T(u){y.value=!0;const t=c.value;b.value==="batch"?u==="distribusi"?await U.getLacakDOBatch(t,M.value).then(p=>{e.value=p.data,y.value=!1}).catch(p=>{y.value=!1;const k=p.response.data;C.error(k.message)}):await U.getListPlantByBatch(t,M.value).then(p=>{L.value=p.data,y.value=!1}).catch(p=>{y.value=!1;const k=p.response.data;C.error(k.message)}):b.value==="serialisasi"&&u==="distribusi"&&await U.getLacakDOSerial(t,M.value).then(p=>{e.value=p.data,y.value=!1}).catch(p=>{y.value=!1;const k=p.response.data;C.error(k.message)})}function V(u){h.value.data=u,h.value.show=!0}function j(){h.value.show=!1}function A(u){var t;f.value.data=u,f.value.data.batch=c.value,f.value.dataDistribution=(t=e==null?void 0:e.value)==null?void 0:t.list[0],f.value.show=!0}function F(){f.value.show=!1}return(u,t)=>{const p=aa,k=ea,q=ta,i=la,H=sa,P=na,O=I,R=oa,G=ia;return r(),_(v,null,[x("div",ca,[l(p,{style:{"margin-bottom":"4px","text-transform":"capitalize"}},{default:s(()=>[n("Lacak By "+o(a(b)),1)]),_:1}),l(q,null,{default:s(()=>[l(k,{style:{"text-transform":"capitalize"}},{default:s(()=>[n("Lacak By "+o(a(b)),1)]),_:1})]),_:1}),x("div",ma,[l(P,{vertical:"",align:"center"},{default:s(()=>[l(i,{style:{"text-transform":"capitalize"}},{default:s(()=>[n("Masukkan Kode "+o(a(b)),1)]),_:1}),l(P,null,{default:s(()=>[l(a(Y),{ref_key:"input",ref:K,value:a(c),"onUpdate:value":t[0]||(t[0]=d=>S(c)?c.value=d:null),placeholder:"",clearable:"",onKeyup:Z(z,["enter"]),style:{width:"35rem"}},null,8,["value","onKeyup"]),l(H,{loading:a($),disabled:a(c)=="",strong:"",type:"primary",class:"button-tnt",onClick:z},{default:s(()=>[n("Cari")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),a(D)?(r(),_("div",fa,[l(O)])):(r(),_(v,{key:1},[Object.keys(a(e)).length>0?(r(),_(v,{key:0},[a(e).list.length>0?(r(),w(P,{key:0,vertical:"",size:0,style:{"margin-top":"18px"}},{default:s(()=>[a(E).params.type==="batch"?(r(),_(v,{key:0},[l(i,{strong:"",style:{"font-size":"16px"}},{default:s(()=>[n(" Batch : "+o(a(e).list[0].do.products[0].batch),1)]),_:1}),l(i,null,{default:s(()=>[n("Nama Produk : "+o(a(e).list[0].do.products[0].name),1)]),_:1}),l(i,null,{default:s(()=>[n("Kode Produk : "+o(a(e).list[0].do.products[0].code),1)]),_:1}),l(i,null,{default:s(()=>[n("Exp Date : "+o(a(N)(a(e).list[0].do.products[0].expired_date).format("yyyy-MM-DD")),1)]),_:1})],64)):g("",!0),a(E).params.type==="serialisasi"?(r(),_(v,{key:1},["do"in a(e).list[0]?(r(),_(v,{key:0},[a(E).params.type==="serialisasi"?(r(),w(i,{key:0,strong:"",style:{"font-size":"16px"}},{default:s(()=>[n(" No DO : "+o(a(e).list[0].do.code),1)]),_:1})):g("",!0),l(i,null,{default:s(()=>[n("Customer : "+o(a(e).list[0].do.customer.name),1)]),_:1}),l(i,null,{default:s(()=>[n("Alamat : "+o(u.$filters.setAddress(a(e).list[0].do.destination.address)),1)]),_:1}),_a,l(i,null,{default:s(()=>[n("Plant : "+o(u.$filters.isEmpty(a(e).list[0].do.origin.warehouse.name)),1)]),_:1}),l(i,null,{default:s(()=>[n("Building : "+o(u.$filters.isEmpty(a(e).list[0].do.origin.warehouse_building.name)),1)]),_:1}),l(i,null,{default:s(()=>[n("Room : "+o(u.$filters.isEmpty(a(e).list[0].do.origin.warehouse_room.name)),1)]),_:1}),l(i,null,{default:s(()=>[n("Rack : "+o(u.$filters.isEmpty(a(e).list[0].do.origin.warehouse_rack.name)),1)]),_:1}),l(i,null,{default:s(()=>[n("Bin : "+o(u.$filters.isEmpty(a(e).list[0].do.origin.warehouse_bin.name)),1)]),_:1}),ya,l(i,null,{default:s(()=>[n("Nama Produk : "+o(a(e).list[0].do.products[0].name),1)]),_:1}),l(i,null,{default:s(()=>[n("Kode Produk : "+o(a(e).list[0].do.products[0].code),1)]),_:1}),l(i,null,{default:s(()=>[n("Exp Date : "+o(a(N)(a(e).list[0].do.products[0].expired_date).format("yyyy-MM-DD")),1)]),_:1})],64)):(r(),_(v,{key:1},[l(i,null,{default:s(()=>[n("Plant : "+o(u.$filters.isEmpty(a(e).list[0].allocation.warehouse.name)),1)]),_:1}),l(i,null,{default:s(()=>[n("Building : "+o(u.$filters.isEmpty(a(e).list[0].allocation.building.name)),1)]),_:1}),l(i,null,{default:s(()=>[n("Room : "+o(u.$filters.isEmpty(a(e).list[0].allocation.room.name)),1)]),_:1}),l(i,null,{default:s(()=>[n("Rack : "+o(u.$filters.isEmpty(a(e).list[0].allocation.rack_pallete.name)),1)]),_:1}),l(i,null,{default:s(()=>[n("Bin : "+o(u.$filters.isEmpty(a(e).list[0].allocation.bin.name)),1)]),_:1}),va,l(i,null,{default:s(()=>[n("Nama Produk : "+o(a(e).list[0].name),1)]),_:1}),l(i,null,{default:s(()=>[n("Kode Produk : "+o(a(e).list[0].code),1)]),_:1}),l(i,null,{default:s(()=>[n("Exp Date : "+o(a(N)(a(e).list[0].expired_date).format("yyyy-MM-DD")),1)]),_:1})],64))],64)):g("",!0)]),_:1})):g("",!0),x("div",ga,[a(E).params.type==="batch"?(r(),w(G,{key:0,class:"card-tabs",animated:"","pane-wrapper-style":"margin: 0 -4px","pane-style":"padding-left: 4px; padding-right: 4px; box-sizing: border-box;",value:a(B),"onUpdate:value":[t[1]||(t[1]=d=>S(B)?B.value=d:null),T]},{default:s(()=>[l(R,{disabled:a(y),name:"penyimpanan",tab:"Penyimpanan"},null,8,["disabled"]),l(R,{disabled:a(y),name:"distribusi",tab:"Distribusi"},null,8,["disabled"])]),_:1},8,["value"])):g("",!0),a(y)?(r(),w(O,{key:1})):(r(),_(v,{key:2},[a(B)==="distribusi"?(r(),_(v,{key:0},[a(e).list.length>0?(r(),_(v,{key:0},["do"in a(e).list[0]?(r(),w(da,{key:0,data:a(e),"onUpdate:data":t[2]||(t[2]=d=>S(e)?e.value=d:null),codeScan:a(c),"onUpdate:codeScan":t[3]||(t[3]=d=>S(c)?c.value=d:null),"onClick:showDetail":V},null,8,["data","codeScan"])):g("",!0)],64)):(r(),w(i,{key:1},{default:s(()=>[n("Belum ada data tersedia")]),_:1}))],64)):g("",!0),a(B)==="penyimpanan"?(r(),w(ra,{key:1,data:a(L),"onUpdate:data":t[4]||(t[4]=d=>S(L)?L.value=d:null),codeScan:a(c),"onUpdate:codeScan":t[5]||(t[5]=d=>S(c)?c.value=d:null),"onClick:showDetail":A},null,8,["data","codeScan"])):g("",!0)],64))])],64)):g("",!0)],64))]),l(pa,{show:a(h).show,"onUpdate:show":t[6]||(t[6]=d=>a(h).show=d),data:a(h).data,"onUpdate:data":t[7]||(t[7]=d=>a(h).data=d),"onClick:close":j},null,8,["show","data"]),l(ua,{show:a(f).show,"onUpdate:show":t[8]||(t[8]=d=>a(f).show=d),data:a(f).data,"onUpdate:data":t[9]||(t[9]=d=>a(f).data=d),"data-distribution":a(f).dataDistribution,"onUpdate:dataDistribution":t[10]||(t[10]=d=>a(f).dataDistribution=d),"onClick:close":F},null,8,["show","data","data-distribution"])],64)}}});export{Ca as default};

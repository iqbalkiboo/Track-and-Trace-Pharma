import{_ as ge}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{a2 as x,a3 as fe,d as ye,f as be,u as ve,E as he,r as g,o as y,c as S,k as e,w as a,q as n,a as b,i as o,h as D,F as ke,g as Se,t as r,af as De,am as we,an as xe,ak as Pe,ad as Me,aj as Ae,H as Ne,ae as Te,aP as Ue,aQ as $e,aR as Ie,aS as ze,N as Ce,a9 as Le,K as Oe,y as Ve,aT as Re,aa as je,ab as Be,ag as Qe,v as We,C as Ee,D as He,m as qe,a4 as R}from"./index.21c0d750.js";import{r as w}from"./render-icon.8c81e0de.js";import{g as j}from"./getCompanyId.7d0eb93b.js";import{S as Fe}from"./setStatus.eab5cece.js";import{m as Ke}from"./master-warehouse.353b4b3b.js";import{H as Ge,R as Je,C as Xe}from"./ReloadOutline.48ff66be.js";import{W as Ye}from"./WarningOutline.87384d2c.js";import{E as Ze}from"./EllipsisVertical.56989e7a.js";import{A as ea}from"./ArrowRedoOutline.89a5a384.js";import{S as aa}from"./SearchOutline.47b929a4.js";import{L as ta}from"./LocationOutline.22b247fa.js";x.interceptors.request.use(fe.auth);const na={async getManifest(c){return c.company_id=j,(await x.get("shipping/v1/manifest/list",{params:c})).data},async getDetailManifest(c){const h={company_id:j};return(await x.get(`shipping/v1/manifest/detail/${c}`,{params:h})).data}},B=c=>(Ee("data-v-953e2e3a"),c=c(),He(),c),oa={class:"body-tnt"},sa={class:"card-tnt"},la={class:"table-tnt"},ia=B(()=>b("sup",null,"3",-1)),_a={style:{"text-transform":"capitalize"}},ua={key:1},ra=B(()=>b("td",{colspan:"12",style:{"text-align":"center"},class:"not-content"}," Belum ada data tersedia ",-1)),ca=[ra],da={class:"table-footer"},Q=ye({__name:"index",setup(c){be(()=>{m(),K()});const h=ve(),P=he(),p=g(!0),f=g({}),l=g({code:"",sort:"desc",page:1,limit:10,delivery_type:"direct_manual"});g({page:1,limit:10});const W=new Fe,M=g([]),E=g([{label:"Need Assign Porter",value:"need_assign_porter"},{label:"Shipping",value:"shipping"},{label:"Accepted",value:"accepted"}]),H=t=>[{label:"Assign Porter",key:`/pengiriman/assign-porter/${t}/assign-porter`,disabled:!1,icon:w(ea)}],q=t=>[{label:"Detail",key:`/pengiriman/assign-porter/${t}/assign-porter`,disabled:!1,icon:w(aa)},{label:"Lacak Manifest",key:`/lacak/manifest/${t}`,disabled:!1,icon:w(ta)}];function F(t){h.push(t)}async function m(){p.value=!0;try{const t=await na.getManifest(l.value);f.value=t.data,p.value=!1}catch(t){if(t.response){const i=t.response.data.message;P.error(i),p.value=!1}}}async function K(){p.value=!0,await Ke.getWarehouse({limit:1e3,sort:"desc"}).then(t=>{var i;p.value=!1,M.value=(i=t.data)==null?void 0:i.list.map(k=>({label:k.name,value:k.id}))}).catch(t=>{p.value=!1;const i=t.response.data;f.error(i.message)})}function G(t){l.value.limit=t,m()}const A=g(0);function N(){l.value.page=1,clearTimeout(A.value),A.value=setTimeout(function(){m()},600)}function J(t){l.value["do.destination._id"]=t||null,m()}function X(t){l.value.target_delivery_date=t||null,m()}function Y(t){l.value.status=t||null,m()}function Z(t){t?l.value.products=t||null:l.value.products=null,N()}return(t,i)=>{const k=De,ee=we,ae=xe,T=Pe,v=Me,te=Ae,U=Ne,ne=Te,oe=ge,_=Ue,$=$e,se=Ie,u=ze,I=Ce,le=Le,ie=Oe,_e=Ve,ue=Re,re=je,ce=Be,de=Qe,pe=We;return y(),S("div",oa,[e(k,{style:{"margin-bottom":"4px"}},{default:a(()=>[n("Assign Porter")]),_:1}),e(ae,null,{default:a(()=>[e(ee,null,{default:a(()=>[n("Assign Porter")]),_:1})]),_:1}),e(pe,{vertical:"",size:0},{default:a(()=>{var z;return[b("div",sa,[e(ne,{cols:"5","x-gap":"12",style:{"margin-top":"1rem"}},{default:a(()=>[e(v,null,{default:a(()=>[e(T,{value:o(l).code,"onUpdate:value":[i[0]||(i[0]=d=>o(l).code=d),N],clearable:"",placeholder:"Cari Kode Manifest"},null,8,["value"])]),_:1}),e(v,null,{default:a(()=>[e(T,{"onUpdate:value":Z,clearable:"",placeholder:"Pilih Product"})]),_:1}),e(v,null,{default:a(()=>[e(te,{"value-format":"yyyy-MM-dd",clearable:"",onUpdateFormattedValue:X,type:"date"})]),_:1}),e(v,null,{default:a(()=>[e(U,{options:o(M),"onUpdate:value":J,clearable:"",filterable:"",placeholder:"Pilih Tujuan"},null,8,["options"])]),_:1}),e(v,null,{default:a(()=>[e(U,{options:o(E),"onUpdate:value":Y,clearable:"",filterable:"",placeholder:"Pilih Status"},null,8,["options"])]),_:1})]),_:1}),b("div",la,[o(p)?(y(),D(oe,{key:0})):(y(),D(ce,{key:1,"x-scrollable":""},{default:a(()=>[e(re,{bordered:!1,"single-line":!0},{default:a(()=>[e(se,null,{default:a(()=>[e($,{style:{"border-radius":"20px"}},{default:a(()=>[e(_,null,{default:a(()=>[n("No")]),_:1}),e(_,null,{default:a(()=>[n("ID Manifest")]),_:1}),e(_,null,{default:a(()=>[n("No. DO")]),_:1}),e(_,null,{default:a(()=>[n("Tujuan")]),_:1}),e(_,null,{default:a(()=>[n("Qty Packing")]),_:1}),e(_,null,{default:a(()=>[n("Qty Load")]),_:1}),e(_,null,{default:a(()=>[n("Sisa Vol (cm"),ia,n(")")]),_:1}),e(_,null,{default:a(()=>[n("Tipe Pengiriman")]),_:1}),e(_,null,{default:a(()=>[n("Status")]),_:1}),e(_,null,{default:a(()=>[n("Driver")]),_:1}),e(_,{style:{"text-align":"center"}},{default:a(()=>[n("Aksi")]),_:1})]),_:1})]),_:1}),e(ue,null,{default:a(()=>{var d,C,L;return[((C=(d=o(f))==null?void 0:d.list)==null?void 0:C.length)>0?(y(!0),S(ke,{key:0},Se((L=o(f))==null?void 0:L.list,(s,O)=>(y(),D($,{key:O},{default:a(()=>[e(u,{"data-label":"No"},{default:a(()=>[n(r(o(l).limit*(o(l).page-1)+(O+1)),1)]),_:2},1024),e(u,{"data-label":"ID Manifest"},{default:a(()=>[n(r(s.code),1)]),_:2},1024),e(u,{"data-label":"No. DO"},{default:a(()=>[n(r(s.do.code),1)]),_:2},1024),e(u,{"data-label":"Tujuan"},{default:a(()=>[n(r(s.do.destination.name),1)]),_:2},1024),e(u,{"data-label":"Qty Packing"},{default:a(()=>[n(r(s.total.packing),1)]),_:2},1024),e(u,{"data-label":"Qty Load"},{default:a(()=>[n(r(s.total.qty),1)]),_:2},1024),e(u,{"data-label":"Sisa Vol (cm3)"},{default:a(()=>[n(r(s.volume),1)]),_:2},1024),e(u,{"data-label":"Tipe Pengiriman"},{default:a(()=>[n(r(s.delivery_type),1)]),_:2},1024),e(u,{"data-label":"Status"},{default:a(()=>[e(le,{round:"",bordered:!1,type:s.status=="siap_dikirim"?"warning":s.status=="agregasi"?"error":s.status=="loading"?"info":"success"},{icon:a(()=>[e(I,{component:s.status=="siap_dikirim"?o(Ge):s.status=="agregasi"?o(Ye):s.status=="loading"?o(Je):o(Xe)},null,8,["component"])]),default:a(()=>[b("span",_a,r(o(W).AssignPorter(s.status)),1)]),_:2},1032,["type"])]),_:2},1024),e(u,{"data-label":"Driver"},{default:a(()=>{var V;return[n(r(((V=s.driver_info.drivers)==null?void 0:V.map(me=>me.name).join(", "))||"-"),1)]}),_:2},1024),e(u,{"data-label":"Aksi",style:{"text-align":"center"}},{default:a(()=>[e(_e,{placement:"bottom-end",options:s.driver_info.drivers?q(s._id):H(s._id),"show-arrow":!0,onSelect:F},{default:a(()=>[e(ie,{tertiary:""},{icon:a(()=>[e(I,null,{default:a(()=>[e(o(Ze))]),_:1})]),_:1})]),_:2},1032,["options"])]),_:2},1024)]),_:2},1024))),128)):(y(),S("tr",ua,ca))]}),_:1})]),_:1})]),_:1})),b("div",da,[e(de,{page:o(l).page,"onUpdate:page":[i[1]||(i[1]=d=>o(l).page=d),m],"page-size":o(l).limit,"onUpdate:pageSize":[i[2]||(i[2]=d=>o(l).limit=d),G],"page-count":(z=o(f))==null?void 0:z.total_page,"page-slot":7,"show-size-picker":o(f).total_data>10,"page-sizes":[10,20,30,40,50]},null,8,["page","page-size","page-count","show-size-picker"])])])])]}),_:1})])}}});typeof R=="function"&&R(Q);const xa=qe(Q,[["__scopeId","data-v-953e2e3a"]]);export{xa as default};

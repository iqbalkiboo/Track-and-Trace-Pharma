import{_ as ve}from"./t-feedback.vue_vue_type_script_setup_true_lang.83eb0b14.js";import{_ as be}from"./t-loading.vue_vue_type_script_setup_true_lang.71bf4981.js";import{d as ke,e as ye,u as we,E as xe,r as u,f as Ce,aF as $,a1 as Pe,p as Se,o as c,c as p,a as l,k as a,w as o,q as f,i as e,h as S,N as D,j as U,F as w,g as H,t as g,ah as B,S as Ue,Q as O,af as Te,am as Ae,an as Ne,K as $e,v as De,ak as Be,a7 as Ee,H as Me,a8 as Re,ab as Fe,a9 as Ge,y as Ie,aa as Ve,ag as ze}from"./index.21c0d750.js";import{c as x}from"./constant.549d5c21.js";import{m as W}from"./master-user.75b9491b.js";import{m as He}from"./master-warehouse.353b4b3b.js";import{_ as Oe}from"./t-modal-reset-password.vue_vue_type_script_setup_true_lang.ffba3032.js";import{A as We}from"./Add.4f3b52cf.js";import{E as Le}from"./EllipsisVertical.56989e7a.js";import{S as je}from"./SettingsOutline.9ab700f4.js";import{P as Je}from"./Pencil.0b65f5de.js";import{T as qe}from"./Trash.4f4f705c.js";import{C as Ke}from"./CheckmarkCircleOutline.8fddcae1.js";import{H as Qe}from"./HelpCircleOutline.a54a41ed.js";import"./getSuperholdingId.94511ad9.js";import"./getHoldingId.48f570fc.js";import"./getCompanyId.7d0eb93b.js";const Xe={class:"body-tnt"},Ye={class:"card-tnt"},Ze={class:"table-tnt"},et=l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"center"}},"No"),l("th",null,"Username"),l("th",null,"Nama User"),l("th",null,"Jabatan"),l("th",null,"Plant/Cabang"),l("th",{style:{"text-align":"center"}},"Status"),l("th",{style:{"text-align":"center"}},"Aksi")])],-1),tt={"data-label":"No",style:{"text-align":"center"}},at={"data-label":"Username"},nt={"data-label":"Nama User"},st={"data-label":"Jabatan"},ot={"data-label":"Plant/Cabang"},lt={"data-label":"Status",style:{"text-align":"center"}},it={"data-label":"Aksi",style:{"text-align":"center"}},rt={key:1},ut=l("td",{colspan:"8",style:{"text-align":"center"}}," Belum ada data tersedia ",-1),ct=[ut],dt={class:"table-footer"},Nt=ke({__name:"index",setup(pt){const L=ye.getAuth(),j=we(),E=xe(),h=u(!0),v=u(!1),b=u({}),r=u({search:"",sort:"desc",sort_field:"created_at",page:1,limit:10,user_type:"porter",status:null,plant:null}),J=u([{label:"Aktif",value:1},{label:"Tidak Aktif",value:0}]),_=u({id:"",name:""}),C=u([]),T=s=>()=>O(D,null,{default:()=>O(s)});Ce(async()=>{q(),$.isGranted(x.accessPrivileges.porter+".list")&&(await m(),Q())});function q(){L.xxtype==="5up3r4dm1n"&&C.value.unshift({label:"Reset Password",key:"reset-password",icon:T(je)}),$.isGranted(x.accessPrivileges.porter+".update")&&C.value.push({label:"Edit Data",key:"edit",icon:T(Je)}),$.isGranted(x.accessPrivileges.porter+".delete")&&C.value.push({label:"Hapus Data",key:"delete",icon:T(qe)})}async function K(s){s&&(r.value.status=s),m()}async function m(){h.value=!0,await W.getUser(r.value).then(s=>{b.value=s.data,h.value=!1,n.value.show=!1}).catch(s=>{h.value=!1;const t=s.response.data;E.error(t.message)})}const M=u([]);async function Q(){h.value=!0,He.getWarehouse({limit:100}).then(s=>{s.data.list.forEach(t=>{M.value.push({label:t.name,value:t.id})})}),h.value=!1}async function X(s){s&&(r.value.plant=s),m()}const R=u(0);function Y(){r.value.page=1,clearTimeout(R.value),R.value=setTimeout(function(){m()},600)}function Z(s){r.value.page=1,r.value.limit=s,m()}function ee(){v.value=!v.value}function te(s,t,P){switch(s){case"edit":j.push({path:`/setting/master-porter/update/${t}`});break;case"delete":_.value.id=t,_.value.name=P,oe();break;case"reset-password":_.value.id=t,_.value.name=P,ee();break}}function ae(){k.value=!0,W.deleteUser(_.value.id).then(()=>{n.value.show=!1,setTimeout(()=>{se(),k.value=!1},300)}).catch(s=>{k.value=!1;const t=s.response.data;E.error(t.message)})}const k=u(!1),n=u({show:u(!1),type:"",icon:Pe(),iconColor:"",hideIcon:!1,title:"",subtitle:""});function ne(){n.value.show=!1}function se(){n.value.type="success",n.value.icon=Ke,n.value.iconColor="#219653",n.value.title="Berhasil",n.value.subtitle="Anda berhasil menghapus data porter",n.value.show=!0}function oe(){n.value.type="delete",n.value.icon=Qe,n.value.iconColor="#EB5757",n.value.title="Perhatian",n.value.subtitle=`Apakah Anda yakin untuk menghapus ${_.value.name} ?`,n.value.show=!0}return(s,t)=>{const P=Te,le=Ae,ie=Ne,y=$e,re=Se("router-link"),F=De,ue=Be,A=Ee,G=Me,ce=Re,de=be,I=Fe,pe=Ge,_e=Ie,me=Ve,fe=ze,he=ve;return c(),p(w,null,[l("div",Xe,[a(P,{style:{"margin-bottom":"4px"}},{default:o(()=>[f("Master Porter")]),_:1}),a(ie,null,{default:o(()=>[a(le,null,{default:o(()=>[f("Master Porter")]),_:1})]),_:1}),l("div",Ye,[s.$filters.isGranted(e(x).accessPrivileges.porter+".create")?(c(),S(F,{key:0},{default:o(()=>[a(re,{to:"/setting/master-porter/create/1",class:"text-decoration-none"},{default:o(()=>[a(y,{color:"#219653",class:"button-tnt"},{default:o(()=>[a(e(D),{component:e(We)},null,8,["component"]),f(" Tambah Porter ")]),_:1})]),_:1})]),_:1})):U("",!0),s.$filters.isGranted(e(x).accessPrivileges.porter+".list")?(c(),p(w,{key:1},[a(ce,{gutter:"16",style:{"margin-top":"24px"}},{default:o(()=>[a(A,{span:6},{default:o(()=>[a(ue,{value:e(r).search,"onUpdate:value":[t[0]||(t[0]=i=>e(r).search=i),Y],placeholder:"Cari nama porter"},null,8,["value"])]),_:1}),a(A,{span:6},{default:o(()=>[a(G,{placeholder:"Status",options:e(J),clearable:"",value:e(r).status,"onUpdate:value":[t[1]||(t[1]=i=>e(r).status=i),t[2]||(t[2]=i=>K(i))],style:{"max-width":"100%"}},null,8,["options","value"])]),_:1}),a(A,{span:6},{default:o(()=>[a(G,{placeholder:"Plant/Cabang",options:e(M),clearable:"",style:{"max-width":"100%"},value:e(r).plant,"onUpdate:value":[t[3]||(t[3]=i=>e(r).plant=i),t[4]||(t[4]=i=>X(i))]},null,8,["options","value"])]),_:1})]),_:1}),l("div",Ze,[e(h)?(c(),S(de,{key:0})):(c(),S(I,{key:1,"x-scrollable":""},{default:o(()=>[a(me,{"single-line":!1},{default:o(()=>{var i,V;return[et,l("tbody",null,[((V=(i=e(b))==null?void 0:i.list)==null?void 0:V.length)>0?(c(!0),p(w,{key:0},H(e(b).list,(d,z)=>(c(),p("tr",{key:z},[l("td",tt,g(e(r).limit*(e(r).page-1)+(z+1)),1),l("td",at,g(d.username),1),l("td",nt,g(d.name),1),l("td",st,g(d.position),1),l("td",ot,[a(I,{style:{"max-height":"100px"}},{default:o(()=>[(c(!0),p(w,null,H(d.warehouses,(N,ge)=>(c(),p("div",{key:ge},g(N.name),1))),128))]),_:2},1024)]),l("td",lt,[a(pe,{bordered:!1,type:d.status.value===1?"success":"error"},{default:o(()=>[f(g(d.status.label=="active"?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["type"])]),l("td",it,[a(_e,{placement:"bottom-end",options:e(C),"show-arrow":!0,onSelect:N=>te(N,d.id,d.name)},{default:o(()=>[a(y,{tertiary:""},{icon:o(()=>[a(e(D),null,{default:o(()=>[a(e(Le))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"])])]))),128)):(c(),p("tr",rt,ct))])]}),_:1})]),_:1})),l("div",dt,[a(fe,{page:e(r).page,"onUpdate:page":[t[5]||(t[5]=i=>e(r).page=i),m],"page-count":e(b).total_page,"page-slot":10,"show-size-picker":e(b).total_data>10,"page-sizes":[10,20,30,40,50],"onUpdate:pageSize":Z},null,8,["page","page-count","show-size-picker"])])])],64)):U("",!0)])]),a(he,{show:e(n).show,"onUpdate:show":t[6]||(t[6]=i=>e(n).show=i),icon:e(n).icon,"icon-color":e(n).iconColor,"hide-icon":e(n).hideIcon,title:e(n).title,subtitle:e(n).subtitle},{default:o(()=>[a(F,{justify:"center"},{default:o(()=>[e(n).type=="success"?(c(),S(y,{key:0,color:"#828282",class:"button-tnt",onClick:B(m,["prevent"])},{default:o(()=>[f(" Tutup ")]),_:1},8,["onClick"])):U("",!0),e(n).type=="delete"?(c(),p(w,{key:1},[a(y,{loading:e(k),color:"#828282",class:"button-tnt",onClick:B(ne,["prevent"])},{default:o(()=>[f(" Tidak ")]),_:1},8,["loading","onClick"]),a(y,{loading:e(k),color:"#EB5757",class:"button-tnt",style:{"padding-left":"25px","padding-right":"25px"},onClick:B(ae,["prevent"])},{default:o(()=>[f(" Iya ")]),_:1},8,["loading","onClick"])],64)):U("",!0)]),_:1})]),_:1},8,["show","icon","icon-color","hide-icon","title","subtitle"]),a(Oe,{show:e(v),"onUpdate:show":t[7]||(t[7]=i=>Ue(v)?v.value=i:null),user_id:e(_).id},null,8,["show","user_id"])],64)}}});export{Nt as default};
